{smcl}
{txt}{sf}{ul off}{.-}
      name:  {res}<unnamed>
       {txt}log:  {res}/Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3/Econ120_F20_Section3.smcl
  {txt}log type:  {res}smcl
 {txt}opened on:  {res}19 Oct 2020, 19:27:19
{txt}
{com}. 
. sss
{err}command {bf}sss{sf} is unrecognized
{txt}{search r(199):r(199);}

end of do-file

{search r(199):r(199);}

{com}. do "/Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3/Econ120_F20_Section3.do"
{txt}
{com}. * ---------------------------- *
. * Econ120 (J. Robinson, F2020) *
. * Section 3 (Oct. 19, 2020)        * NOTE: all the path directories are based on my own computer, 
. * TA: David Sungho Park        *       so you should change them according to yours.
. * ---------------------------- *
. 
. clear all
{txt}
{com}. set more off
{txt}
{com}. 
. cap noisily cd "/Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3/" // Note: I changed this from previous do-files for Sections 1 & 2
{res}/Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3
{txt}
{com}. 
. log using "Econ120_F20_Section3.smcl", replace // you can just comment out this line if you don't want to keep a Stata log file
{err}log file already open
{txt}{search r(604):r(604);}

end of do-file

{search r(604):r(604);}

{com}. do "/var/folders/wy/26794k5d4ydcf0nqcms58wkr0000gn/T//SD43744.000000"
{txt}
{com}. * ---------------------------- *
. * Econ120 (J. Robinson, F2020) *
. * Section 3 (Oct. 19, 2020)        * NOTE: all the path directories are based on my own computer, 
. * TA: David Sungho Park        *       so you should change them according to yours.
. * ---------------------------- *
. 
. clear all
{txt}
{com}. set more off
{txt}
{com}. 
. cap noisily cd "/Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3/" // Note: I changed this from previous do-files for Sections 1 & 2
{res}/Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3
{txt}
{com}. 
. //log using "Econ120_F20_Section3.smcl", replace // you can uncomment this line if you want to keep a Stata log file
. 
. use "farming.dta", clear
{txt}
{com}. 
{txt}end of do-file

{com}. do "/var/folders/wy/26794k5d4ydcf0nqcms58wkr0000gn/T//SD43744.000000"
{txt}
{com}. su kg_tdfert_unmarked kg_plantfert_unmarked packets_hyb_unmarked

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
kg_tdfert_~d {c |}{res}        820     8.09878    7.103199          0         75
{txt}kg_plantfe~d {c |}{res}        806    6.143238    6.342009          0         25
{txt}packets_hy~d {c |}{res}        812    1.314483    .5807212          0         10
{txt}
{com}. 
{txt}end of do-file

{com}. do "/var/folders/wy/26794k5d4ydcf0nqcms58wkr0000gn/T//SD43744.000000"
{txt}
{com}. su kg_tdfert_blue kg_plantfert_blue packets_hyb_blue

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
kg_tdfert_~e {c |}{res}        822     12.3455    1.376406          0         25
{txt}kg_plantfe~e {c |}{res}        811    11.31751    3.389863          0         25
{txt}packets_hy~e {c |}{res}        816    1.370196    .4662883          0         10
{txt}
{com}. 
{txt}end of do-file

{com}. do "/Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3/Econ120_F20_Section3.do"
{txt}
{com}. * ---------------------------- *
. * Econ120 (J. Robinson, F2020) *
. * Section 3 (Oct. 19, 2020)        * NOTE: all the path directories are based on my own computer, 
. * TA: David Sungho Park        *       so you should change them according to yours.
. * ---------------------------- *
. 
. clear all
{txt}
{com}. set more off
{txt}
{com}. 
. cap noisily cd "/Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3/" // Note: I changed this from previous do-files for Sections 1 & 2
{res}/Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3
{txt}
{com}. 
. //log using "Econ120_F20_Section3.smcl", replace // you can uncomment this line if you want to keep a Stata log file
. 
. use "farming.dta", clear
{txt}
{com}. 
. // Getting sumstats 
. su kg_tdfert_unmarked kg_plantfert_unmarked packets_hyb_unmarked

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
kg_tdfert_~d {c |}{res}        820     8.09878    7.103199          0         75
{txt}kg_plantfe~d {c |}{res}        806    6.143238    6.342009          0         25
{txt}packets_hy~d {c |}{res}        812    1.314483    .5807212          0         10
{txt}
{com}. su kg_tdfert_blue kg_plantfert_blue packets_hyb_blue

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
kg_tdfert_~e {c |}{res}        822     12.3455    1.376406          0         25
{txt}kg_plantfe~e {c |}{res}        811    11.31751    3.389863          0         25
{txt}packets_hy~e {c |}{res}        816    1.370196    .4662883          0         10
{txt}
{com}. 
. // Constructing variables 
. su kg_tdfert_diff = kg_tdfert_blue - kg_tdfert_unmarked
{err}variable {bf}kg_tdfert_diff{sf} not found
{txt}{search r(111):r(111);}

end of do-file

{search r(111):r(111);}

{com}. do "/Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3/Econ120_F20_Section3.do"
{txt}
{com}. * ---------------------------- *
. * Econ120 (J. Robinson, F2020) *
. * Section 3 (Oct. 19, 2020)        * NOTE: all the path directories are based on my own computer, 
. * TA: David Sungho Park        *       so you should change them according to yours.
. * ---------------------------- *
. 
. clear all
{txt}
{com}. set more off
{txt}
{com}. 
. cap noisily cd "/Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3/" // Note: I changed this from previous do-files for Sections 1 & 2
{res}/Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3
{txt}
{com}. 
. //log using "Econ120_F20_Section3.smcl", replace // you can uncomment this line if you want to keep a Stata log file
. 
. use "farming.dta", clear
{txt}
{com}. 
. // Getting sumstats 
. su kg_tdfert_unmarked kg_plantfert_unmarked packets_hyb_unmarked

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
kg_tdfert_~d {c |}{res}        820     8.09878    7.103199          0         75
{txt}kg_plantfe~d {c |}{res}        806    6.143238    6.342009          0         25
{txt}packets_hy~d {c |}{res}        812    1.314483    .5807212          0         10
{txt}
{com}. su kg_tdfert_blue kg_plantfert_blue packets_hyb_blue

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
kg_tdfert_~e {c |}{res}        822     12.3455    1.376406          0         25
{txt}kg_plantfe~e {c |}{res}        811    11.31751    3.389863          0         25
{txt}packets_hy~e {c |}{res}        816    1.370196    .4662883          0         10
{txt}
{com}. 
. // Constructing variables 
. gen kg_tdfert_diff = kg_tdfert_blue - kg_tdfert_unmarked
{txt}(435 missing values generated)

{com}. ttest kg_tdfert_diff=0

{txt}One-sample t test
{hline 9}{c TT}{hline 68}
Variable{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
kg_td~ff {c |}{res}{col 12}    813{col 22} 4.195572{col 34} .2448409{col 46} 6.981185{col 58} 3.714976{col 70} 4.676168
{txt}{hline 9}{c BT}{hline 68}
    mean = mean({res}kg_tdfert_diff{txt})                                   t = {res} 17.1359
{txt}Ho: mean = {res}0                                     {txt}degrees of freedom = {res}     812

    {txt}Ha: mean < {res}0                 {txt}Ha: mean != {res}0                 {txt}Ha: mean > {res}0
 {txt}Pr(T < t) = {res}1.0000         {txt}Pr(|T| > |t|) = {res}0.0000          {txt}Pr(T > t) = {res}0.0000
{txt}
{com}. 
. sss
{err}command {bf}sss{sf} is unrecognized
{txt}{search r(199):r(199);}

end of do-file

{search r(199):r(199);}

{com}. do "/Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3/Econ120_F20_Section3.do"
{txt}
{com}. * ---------------------------- *
. * Econ120 (J. Robinson, F2020) *
. * Section 3 (Oct. 19, 2020)        * NOTE: all the path directories are based on my own computer, 
. * TA: David Sungho Park        *       so you should change them according to yours.
. * ---------------------------- *
. 
. clear all
{txt}
{com}. set more off
{txt}
{com}. 
. cap noisily cd "/Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3/" // Note: I changed this from previous do-files for Sections 1 & 2
{res}/Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3
{txt}
{com}. 
. //log using "Econ120_F20_Section3.smcl", replace // you can uncomment this line if you want to keep a Stata log file
. 
. use "farming.dta", clear
{txt}
{com}. 
. // Getting sumstats 
. su kg_tdfert_unmarked kg_plantfert_unmarked packets_hyb_unmarked

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
kg_tdfert_~d {c |}{res}        820     8.09878    7.103199          0         75
{txt}kg_plantfe~d {c |}{res}        806    6.143238    6.342009          0         25
{txt}packets_hy~d {c |}{res}        812    1.314483    .5807212          0         10
{txt}
{com}. su kg_tdfert_blue kg_plantfert_blue packets_hyb_blue

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
kg_tdfert_~e {c |}{res}        822     12.3455    1.376406          0         25
{txt}kg_plantfe~e {c |}{res}        811    11.31751    3.389863          0         25
{txt}packets_hy~e {c |}{res}        816    1.370196    .4662883          0         10
{txt}
{com}. 
. // Testing for mean differences
. gen kg_tdfert_diff              = kg_tdfert_blue        - kg_tdfert_unmarked
{txt}(435 missing values generated)

{com}. gen kg_plantfert_diff   = kg_plantfert_blue - kg_plantfert_unmarked
{txt}(447 missing values generated)

{com}. gen packets_hyb_diff    = packets_hyb_blue      - packets_hyb_unmarked
{txt}(436 missing values generated)

{com}. 
. ttest kg_tdfert_diff    = 0

{txt}One-sample t test
{hline 9}{c TT}{hline 68}
Variable{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
kg_td~ff {c |}{res}{col 12}    813{col 22} 4.195572{col 34} .2448409{col 46} 6.981185{col 58} 3.714976{col 70} 4.676168
{txt}{hline 9}{c BT}{hline 68}
    mean = mean({res}kg_tdfert_diff{txt})                                   t = {res} 17.1359
{txt}Ho: mean = {res}0                                     {txt}degrees of freedom = {res}     812

    {txt}Ha: mean < {res}0                 {txt}Ha: mean != {res}0                 {txt}Ha: mean > {res}0
 {txt}Pr(T < t) = {res}1.0000         {txt}Pr(|T| > |t|) = {res}0.0000          {txt}Pr(T > t) = {res}0.0000
{txt}
{com}. ttest kg_plantfert_diff = 0

{txt}One-sample t test
{hline 9}{c TT}{hline 68}
Variable{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
kg_pl~ff {c |}{res}{col 12}    801{col 22} 5.152996{col 34} .2192189{col 46} 6.204321{col 58} 4.722684{col 70} 5.583308
{txt}{hline 9}{c BT}{hline 68}
    mean = mean({res}kg_plantfert_diff{txt})                                t = {res} 23.5062
{txt}Ho: mean = {res}0                                     {txt}degrees of freedom = {res}     800

    {txt}Ha: mean < {res}0                 {txt}Ha: mean != {res}0                 {txt}Ha: mean > {res}0
 {txt}Pr(T < t) = {res}1.0000         {txt}Pr(|T| > |t|) = {res}0.0000          {txt}Pr(T > t) = {res}0.0000
{txt}
{com}. ttest packets_hyb_diff  = 0

{txt}One-sample t test
{hline 9}{c TT}{hline 68}
Variable{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
packe~ff {c |}{res}{col 12}    812{col 22} .0559975{col 34} .0137451{col 46} .3916762{col 58} .0290173{col 70} .0829778
{txt}{hline 9}{c BT}{hline 68}
    mean = mean({res}packets_hyb_diff{txt})                                 t = {res}  4.0740
{txt}Ho: mean = {res}0                                     {txt}degrees of freedom = {res}     811

    {txt}Ha: mean < {res}0                 {txt}Ha: mean != {res}0                 {txt}Ha: mean > {res}0
 {txt}Pr(T < t) = {res}1.0000         {txt}Pr(|T| > |t|) = {res}0.0001          {txt}Pr(T > t) = {res}0.0000
{txt}
{com}. sss
{err}command {bf}sss{sf} is unrecognized
{txt}{search r(199):r(199);}

end of do-file

{search r(199):r(199);}

{com}. do "/var/folders/wy/26794k5d4ydcf0nqcms58wkr0000gn/T//SD43744.000000"
{txt}
{com}. * ---------------------------- *
. * Econ120 (J. Robinson, F2020) *
. * Section 3 (Oct. 19, 2020)        * NOTE: all the path directories are based on my own computer, 
. * TA: David Sungho Park        *       so you should change them according to yours.
. * ---------------------------- *
. 
. clear all
{txt}
{com}. set more off
{txt}
{com}. 
. cap noisily cd "/Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3/" // Note: I changed this from previous do-files for Sections 1 & 2
{res}/Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3
{txt}
{com}. 
. //log using "Econ120_F20_Section3.smcl", replace // you can uncomment this line if you want to keep a Stata log file
. 
. use "farming.dta", clear
{txt}
{com}. 
. // Getting sumstats 
. su kg_tdfert_unmarked kg_plantfert_unmarked packets_hyb_unmarked

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
kg_tdfert_~d {c |}{res}        820     8.09878    7.103199          0         75
{txt}kg_plantfe~d {c |}{res}        806    6.143238    6.342009          0         25
{txt}packets_hy~d {c |}{res}        812    1.314483    .5807212          0         10
{txt}
{com}. su kg_tdfert_blue kg_plantfert_blue packets_hyb_blue

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
kg_tdfert_~e {c |}{res}        822     12.3455    1.376406          0         25
{txt}kg_plantfe~e {c |}{res}        811    11.31751    3.389863          0         25
{txt}packets_hy~e {c |}{res}        816    1.370196    .4662883          0         10
{txt}
{com}. 
. // Testing for mean differences
. gen kg_tdfert_diff              = kg_tdfert_blue        - kg_tdfert_unmarked
{txt}(435 missing values generated)

{com}. gen kg_plantfert_diff   = kg_plantfert_blue - kg_plantfert_unmarked
{txt}(447 missing values generated)

{com}. gen packets_hyb_diff    = packets_hyb_blue      - packets_hyb_unmarked
{txt}(436 missing values generated)

{com}. 
. ttest kg_tdfert_diff    = 0

{txt}One-sample t test
{hline 9}{c TT}{hline 68}
Variable{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
kg_td~ff {c |}{res}{col 12}    813{col 22} 4.195572{col 34} .2448409{col 46} 6.981185{col 58} 3.714976{col 70} 4.676168
{txt}{hline 9}{c BT}{hline 68}
    mean = mean({res}kg_tdfert_diff{txt})                                   t = {res} 17.1359
{txt}Ho: mean = {res}0                                     {txt}degrees of freedom = {res}     812

    {txt}Ha: mean < {res}0                 {txt}Ha: mean != {res}0                 {txt}Ha: mean > {res}0
 {txt}Pr(T < t) = {res}1.0000         {txt}Pr(|T| > |t|) = {res}0.0000          {txt}Pr(T > t) = {res}0.0000
{txt}
{com}. ttest kg_plantfert_diff = 0

{txt}One-sample t test
{hline 9}{c TT}{hline 68}
Variable{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
kg_pl~ff {c |}{res}{col 12}    801{col 22} 5.152996{col 34} .2192189{col 46} 6.204321{col 58} 4.722684{col 70} 5.583308
{txt}{hline 9}{c BT}{hline 68}
    mean = mean({res}kg_plantfert_diff{txt})                                t = {res} 23.5062
{txt}Ho: mean = {res}0                                     {txt}degrees of freedom = {res}     800

    {txt}Ha: mean < {res}0                 {txt}Ha: mean != {res}0                 {txt}Ha: mean > {res}0
 {txt}Pr(T < t) = {res}1.0000         {txt}Pr(|T| > |t|) = {res}0.0000          {txt}Pr(T > t) = {res}0.0000
{txt}
{com}. ttest packets_hyb_diff  = 0

{txt}One-sample t test
{hline 9}{c TT}{hline 68}
Variable{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
packe~ff {c |}{res}{col 12}    812{col 22} .0559975{col 34} .0137451{col 46} .3916762{col 58} .0290173{col 70} .0829778
{txt}{hline 9}{c BT}{hline 68}
    mean = mean({res}packets_hyb_diff{txt})                                 t = {res}  4.0740
{txt}Ho: mean = {res}0                                     {txt}degrees of freedom = {res}     811

    {txt}Ha: mean < {res}0                 {txt}Ha: mean != {res}0                 {txt}Ha: mean > {res}0
 {txt}Pr(T < t) = {res}1.0000         {txt}Pr(|T| > |t|) = {res}0.0001          {txt}Pr(T > t) = {res}0.0000
{txt}
{com}. 
. // Constructing mean-difference table (similar to what you've done for Econ104)
. est clear
{txt}
{com}. estpost unmarked:       estpost summarize       kg_tdfert_unmarked      kg_plantfert_unmarked   packets_hyb_unmarked
{err}invalid subcommand
{txt}{search r(198):r(198);}

end of do-file

{search r(198):r(198);}

{com}. do "/var/folders/wy/26794k5d4ydcf0nqcms58wkr0000gn/T//SD43744.000000"
{txt}
{com}. * ---------------------------- *
. * Econ120 (J. Robinson, F2020) *
. * Section 3 (Oct. 19, 2020)        * NOTE: all the path directories are based on my own computer, 
. * TA: David Sungho Park        *       so you should change them according to yours.
. * ---------------------------- *
. 
. clear all
{txt}
{com}. set more off
{txt}
{com}. 
. cap noisily cd "/Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3/" // Note: I changed this from previous do-files for Sections 1 & 2
{res}/Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3
{txt}
{com}. 
. //log using "Econ120_F20_Section3.smcl", replace // you can uncomment this line if you want to keep a Stata log file
. 
. use "farming.dta", clear
{txt}
{com}. 
. // Getting sumstats 
. su kg_tdfert_unmarked kg_plantfert_unmarked packets_hyb_unmarked

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
kg_tdfert_~d {c |}{res}        820     8.09878    7.103199          0         75
{txt}kg_plantfe~d {c |}{res}        806    6.143238    6.342009          0         25
{txt}packets_hy~d {c |}{res}        812    1.314483    .5807212          0         10
{txt}
{com}. su kg_tdfert_blue kg_plantfert_blue packets_hyb_blue

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
kg_tdfert_~e {c |}{res}        822     12.3455    1.376406          0         25
{txt}kg_plantfe~e {c |}{res}        811    11.31751    3.389863          0         25
{txt}packets_hy~e {c |}{res}        816    1.370196    .4662883          0         10
{txt}
{com}. 
. // Testing for mean differences
. gen kg_tdfert_diff              = kg_tdfert_blue        - kg_tdfert_unmarked
{txt}(435 missing values generated)

{com}. gen kg_plantfert_diff   = kg_plantfert_blue - kg_plantfert_unmarked
{txt}(447 missing values generated)

{com}. gen packets_hyb_diff    = packets_hyb_blue      - packets_hyb_unmarked
{txt}(436 missing values generated)

{com}. 
. ttest kg_tdfert_diff    = 0

{txt}One-sample t test
{hline 9}{c TT}{hline 68}
Variable{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
kg_td~ff {c |}{res}{col 12}    813{col 22} 4.195572{col 34} .2448409{col 46} 6.981185{col 58} 3.714976{col 70} 4.676168
{txt}{hline 9}{c BT}{hline 68}
    mean = mean({res}kg_tdfert_diff{txt})                                   t = {res} 17.1359
{txt}Ho: mean = {res}0                                     {txt}degrees of freedom = {res}     812

    {txt}Ha: mean < {res}0                 {txt}Ha: mean != {res}0                 {txt}Ha: mean > {res}0
 {txt}Pr(T < t) = {res}1.0000         {txt}Pr(|T| > |t|) = {res}0.0000          {txt}Pr(T > t) = {res}0.0000
{txt}
{com}. ttest kg_plantfert_diff = 0

{txt}One-sample t test
{hline 9}{c TT}{hline 68}
Variable{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
kg_pl~ff {c |}{res}{col 12}    801{col 22} 5.152996{col 34} .2192189{col 46} 6.204321{col 58} 4.722684{col 70} 5.583308
{txt}{hline 9}{c BT}{hline 68}
    mean = mean({res}kg_plantfert_diff{txt})                                t = {res} 23.5062
{txt}Ho: mean = {res}0                                     {txt}degrees of freedom = {res}     800

    {txt}Ha: mean < {res}0                 {txt}Ha: mean != {res}0                 {txt}Ha: mean > {res}0
 {txt}Pr(T < t) = {res}1.0000         {txt}Pr(|T| > |t|) = {res}0.0000          {txt}Pr(T > t) = {res}0.0000
{txt}
{com}. ttest packets_hyb_diff  = 0

{txt}One-sample t test
{hline 9}{c TT}{hline 68}
Variable{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
packe~ff {c |}{res}{col 12}    812{col 22} .0559975{col 34} .0137451{col 46} .3916762{col 58} .0290173{col 70} .0829778
{txt}{hline 9}{c BT}{hline 68}
    mean = mean({res}packets_hyb_diff{txt})                                 t = {res}  4.0740
{txt}Ho: mean = {res}0                                     {txt}degrees of freedom = {res}     811

    {txt}Ha: mean < {res}0                 {txt}Ha: mean != {res}0                 {txt}Ha: mean > {res}0
 {txt}Pr(T < t) = {res}1.0000         {txt}Pr(|T| > |t|) = {res}0.0001          {txt}Pr(T > t) = {res}0.0000
{txt}
{com}. 
. // Constructing mean-difference table (similar to what you've done for Econ104)
. est clear
{txt}
{com}. estpost unmarked:       estpost summarize       kg_tdfert_unmarked      kg_plantfert_unmarked   packets_hyb_unmarked
{err}invalid subcommand
{txt}{search r(198):r(198);}

end of do-file

{search r(198):r(198);}

{com}. do "/Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3/Econ120_F20_Section3.do"
{txt}
{com}. * ---------------------------- *
. * Econ120 (J. Robinson, F2020) *
. * Section 3 (Oct. 19, 2020)        * NOTE: all the path directories are based on my own computer, 
. * TA: David Sungho Park        *       so you should change them according to yours.
. * ---------------------------- *
. 
. clear all
{txt}
{com}. set more off
{txt}
{com}. 
. cap noisily cd "/Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3/" // Note: I changed this from previous do-files for Sections 1 & 2
{res}/Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3
{txt}
{com}. 
. //log using "Econ120_F20_Section3.smcl", replace // you can uncomment this line if you want to keep a Stata log file
. 
. use "farming.dta", clear
{txt}
{com}. 
. // Getting sumstats 
. su kg_tdfert_unmarked kg_plantfert_unmarked packets_hyb_unmarked

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
kg_tdfert_~d {c |}{res}        820     8.09878    7.103199          0         75
{txt}kg_plantfe~d {c |}{res}        806    6.143238    6.342009          0         25
{txt}packets_hy~d {c |}{res}        812    1.314483    .5807212          0         10
{txt}
{com}. su kg_tdfert_blue kg_plantfert_blue packets_hyb_blue

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
kg_tdfert_~e {c |}{res}        822     12.3455    1.376406          0         25
{txt}kg_plantfe~e {c |}{res}        811    11.31751    3.389863          0         25
{txt}packets_hy~e {c |}{res}        816    1.370196    .4662883          0         10
{txt}
{com}. 
. // Testing for mean differences
. gen kg_tdfert_diff              = kg_tdfert_blue        - kg_tdfert_unmarked
{txt}(435 missing values generated)

{com}. gen kg_plantfert_diff   = kg_plantfert_blue - kg_plantfert_unmarked
{txt}(447 missing values generated)

{com}. gen packets_hyb_diff    = packets_hyb_blue      - packets_hyb_unmarked
{txt}(436 missing values generated)

{com}. 
. ttest kg_tdfert_diff    = 0

{txt}One-sample t test
{hline 9}{c TT}{hline 68}
Variable{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
kg_td~ff {c |}{res}{col 12}    813{col 22} 4.195572{col 34} .2448409{col 46} 6.981185{col 58} 3.714976{col 70} 4.676168
{txt}{hline 9}{c BT}{hline 68}
    mean = mean({res}kg_tdfert_diff{txt})                                   t = {res} 17.1359
{txt}Ho: mean = {res}0                                     {txt}degrees of freedom = {res}     812

    {txt}Ha: mean < {res}0                 {txt}Ha: mean != {res}0                 {txt}Ha: mean > {res}0
 {txt}Pr(T < t) = {res}1.0000         {txt}Pr(|T| > |t|) = {res}0.0000          {txt}Pr(T > t) = {res}0.0000
{txt}
{com}. ttest kg_plantfert_diff = 0

{txt}One-sample t test
{hline 9}{c TT}{hline 68}
Variable{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
kg_pl~ff {c |}{res}{col 12}    801{col 22} 5.152996{col 34} .2192189{col 46} 6.204321{col 58} 4.722684{col 70} 5.583308
{txt}{hline 9}{c BT}{hline 68}
    mean = mean({res}kg_plantfert_diff{txt})                                t = {res} 23.5062
{txt}Ho: mean = {res}0                                     {txt}degrees of freedom = {res}     800

    {txt}Ha: mean < {res}0                 {txt}Ha: mean != {res}0                 {txt}Ha: mean > {res}0
 {txt}Pr(T < t) = {res}1.0000         {txt}Pr(|T| > |t|) = {res}0.0000          {txt}Pr(T > t) = {res}0.0000
{txt}
{com}. ttest packets_hyb_diff  = 0

{txt}One-sample t test
{hline 9}{c TT}{hline 68}
Variable{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
packe~ff {c |}{res}{col 12}    812{col 22} .0559975{col 34} .0137451{col 46} .3916762{col 58} .0290173{col 70} .0829778
{txt}{hline 9}{c BT}{hline 68}
    mean = mean({res}packets_hyb_diff{txt})                                 t = {res}  4.0740
{txt}Ho: mean = {res}0                                     {txt}degrees of freedom = {res}     811

    {txt}Ha: mean < {res}0                 {txt}Ha: mean != {res}0                 {txt}Ha: mean > {res}0
 {txt}Pr(T < t) = {res}1.0000         {txt}Pr(|T| > |t|) = {res}0.0001          {txt}Pr(T > t) = {res}0.0000
{txt}
{com}. 
. // Constructing mean-difference table (similar to what you've done for Econ104)
. est clear
{txt}
{com}. estpost unmarked:       estpost summarize       kg_tdfert_unmarked      kg_plantfert_unmarked   packets_hyb_unmarked
{err}invalid subcommand
{txt}{search r(198):r(198);}

end of do-file

{search r(198):r(198);}

{com}. do "/Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3/Econ120_F20_Section3.do"
{txt}
{com}. * ---------------------------- *
. * Econ120 (J. Robinson, F2020) *
. * Section 3 (Oct. 19, 2020)        * NOTE: all the path directories are based on my own computer, 
. * TA: David Sungho Park        *       so you should change them according to yours.
. * ---------------------------- *
. 
. clear all
{txt}
{com}. set more off
{txt}
{com}. 
. cap noisily cd "/Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3/" // Note: I changed this from previous do-files for Sections 1 & 2
{res}/Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3
{txt}
{com}. 
. //log using "Econ120_F20_Section3.smcl", replace // you can uncomment this line if you want to keep a Stata log file
. 
. use "farming.dta", clear
{txt}
{com}. 
. // Getting sumstats 
. su kg_tdfert_unmarked kg_plantfert_unmarked packets_hyb_unmarked

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
kg_tdfert_~d {c |}{res}        820     8.09878    7.103199          0         75
{txt}kg_plantfe~d {c |}{res}        806    6.143238    6.342009          0         25
{txt}packets_hy~d {c |}{res}        812    1.314483    .5807212          0         10
{txt}
{com}. su kg_tdfert_blue kg_plantfert_blue packets_hyb_blue

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
kg_tdfert_~e {c |}{res}        822     12.3455    1.376406          0         25
{txt}kg_plantfe~e {c |}{res}        811    11.31751    3.389863          0         25
{txt}packets_hy~e {c |}{res}        816    1.370196    .4662883          0         10
{txt}
{com}. 
. // Testing for mean differences
. gen kg_tdfert_diff              = kg_tdfert_blue        - kg_tdfert_unmarked
{txt}(435 missing values generated)

{com}. gen kg_plantfert_diff   = kg_plantfert_blue - kg_plantfert_unmarked
{txt}(447 missing values generated)

{com}. gen packets_hyb_diff    = packets_hyb_blue      - packets_hyb_unmarked
{txt}(436 missing values generated)

{com}. 
. ttest kg_tdfert_diff    = 0

{txt}One-sample t test
{hline 9}{c TT}{hline 68}
Variable{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
kg_td~ff {c |}{res}{col 12}    813{col 22} 4.195572{col 34} .2448409{col 46} 6.981185{col 58} 3.714976{col 70} 4.676168
{txt}{hline 9}{c BT}{hline 68}
    mean = mean({res}kg_tdfert_diff{txt})                                   t = {res} 17.1359
{txt}Ho: mean = {res}0                                     {txt}degrees of freedom = {res}     812

    {txt}Ha: mean < {res}0                 {txt}Ha: mean != {res}0                 {txt}Ha: mean > {res}0
 {txt}Pr(T < t) = {res}1.0000         {txt}Pr(|T| > |t|) = {res}0.0000          {txt}Pr(T > t) = {res}0.0000
{txt}
{com}. ttest kg_plantfert_diff = 0

{txt}One-sample t test
{hline 9}{c TT}{hline 68}
Variable{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
kg_pl~ff {c |}{res}{col 12}    801{col 22} 5.152996{col 34} .2192189{col 46} 6.204321{col 58} 4.722684{col 70} 5.583308
{txt}{hline 9}{c BT}{hline 68}
    mean = mean({res}kg_plantfert_diff{txt})                                t = {res} 23.5062
{txt}Ho: mean = {res}0                                     {txt}degrees of freedom = {res}     800

    {txt}Ha: mean < {res}0                 {txt}Ha: mean != {res}0                 {txt}Ha: mean > {res}0
 {txt}Pr(T < t) = {res}1.0000         {txt}Pr(|T| > |t|) = {res}0.0000          {txt}Pr(T > t) = {res}0.0000
{txt}
{com}. ttest packets_hyb_diff  = 0

{txt}One-sample t test
{hline 9}{c TT}{hline 68}
Variable{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
packe~ff {c |}{res}{col 12}    812{col 22} .0559975{col 34} .0137451{col 46} .3916762{col 58} .0290173{col 70} .0829778
{txt}{hline 9}{c BT}{hline 68}
    mean = mean({res}packets_hyb_diff{txt})                                 t = {res}  4.0740
{txt}Ho: mean = {res}0                                     {txt}degrees of freedom = {res}     811

    {txt}Ha: mean < {res}0                 {txt}Ha: mean != {res}0                 {txt}Ha: mean > {res}0
 {txt}Pr(T < t) = {res}1.0000         {txt}Pr(|T| > |t|) = {res}0.0001          {txt}Pr(T > t) = {res}0.0000
{txt}
{com}. 
. // Constructing mean-difference table (similar to what you've done for Econ104)
. est clear
{txt}
{com}. eststo unmarked:        estpost summarize       kg_tdfert_unmarked      kg_plantfert_unmarked   packets_hyb_unmarked

{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(sum_w)}{space 1}{space 1}{ralign 9:e(mean)}{space 1}{space 1}{ralign 9:e(Var)}{space 1}{space 1}{ralign 9:e(sd)}{space 1}{space 1}{ralign 9:e(min)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert_~d}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      820}}}{space 1}{space 1}{ralign 9:{res:{sf:      820}}}{space 1}{space 1}{ralign 9:{res:{sf:  8.09878}}}{space 1}{space 1}{ralign 9:{res:{sf: 50.45543}}}{space 1}{space 1}{ralign 9:{res:{sf: 7.103199}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfe~d}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      806}}}{space 1}{space 1}{ralign 9:{res:{sf:      806}}}{space 1}{space 1}{ralign 9:{res:{sf: 6.143238}}}{space 1}{space 1}{ralign 9:{res:{sf: 40.22108}}}{space 1}{space 1}{ralign 9:{res:{sf: 6.342009}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hy~d}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      812}}}{space 1}{space 1}{ralign 9:{res:{sf:      812}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.314483}}}{space 1}{space 1}{ralign 9:{res:{sf: .3372371}}}{space 1}{space 1}{ralign 9:{res:{sf: .5807212}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(max)}{space 1}{space 1}{ralign 9:e(sum)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert_~d}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       75}}}{space 1}{space 1}{ralign 9:{res:{sf:     6641}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfe~d}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       25}}}{space 1}{space 1}{ralign 9:{res:{sf:  4951.45}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hy~d}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       10}}}{space 1}{space 1}{ralign 9:{res:{sf:  1067.36}}}{space 1}

{com}. eststo blue:            estpost summarize       kg_tdfert_blue          kg_plantfert_blue               packets_hyb_blue

{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(sum_w)}{space 1}{space 1}{ralign 9:e(mean)}{space 1}{space 1}{ralign 9:e(Var)}{space 1}{space 1}{ralign 9:e(sd)}{space 1}{space 1}{ralign 9:e(min)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert_~e}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      822}}}{space 1}{space 1}{ralign 9:{res:{sf:      822}}}{space 1}{space 1}{ralign 9:{res:{sf:  12.3455}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.894493}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.376406}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfe~e}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      811}}}{space 1}{space 1}{ralign 9:{res:{sf:      811}}}{space 1}{space 1}{ralign 9:{res:{sf: 11.31751}}}{space 1}{space 1}{ralign 9:{res:{sf: 11.49117}}}{space 1}{space 1}{ralign 9:{res:{sf: 3.389863}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hy~e}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      816}}}{space 1}{space 1}{ralign 9:{res:{sf:      816}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.370196}}}{space 1}{space 1}{ralign 9:{res:{sf: .2174247}}}{space 1}{space 1}{ralign 9:{res:{sf: .4662883}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(max)}{space 1}{space 1}{ralign 9:e(sum)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert_~e}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       25}}}{space 1}{space 1}{ralign 9:{res:{sf:    10148}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfe~e}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       25}}}{space 1}{space 1}{ralign 9:{res:{sf:   9178.5}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hy~e}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       10}}}{space 1}{space 1}{ralign 9:{res:{sf:  1118.08}}}{space 1}

{com}. eststo difference:      estpost ttest           kg_tdfert_diff          kg_plantfert_diff               packets_hyb_diff
{err}option by() required
{txt}{search r(198):r(198);}

end of do-file

{search r(198):r(198);}

{com}. do "/Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3/Econ120_F20_Section3.do"
{txt}
{com}. * ---------------------------- *
. * Econ120 (J. Robinson, F2020) *
. * Section 3 (Oct. 19, 2020)        * NOTE: all the path directories are based on my own computer, 
. * TA: David Sungho Park        *       so you should change them according to yours.
. * ---------------------------- *
. 
. clear all
{txt}
{com}. set more off
{txt}
{com}. 
. cap noisily cd "/Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3/" // Note: I changed this from previous do-files for Sections 1 & 2
{res}/Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3
{txt}
{com}. 
. //log using "Econ120_F20_Section3.smcl", replace // you can uncomment this line if you want to keep a Stata log file
. 
. use "farming.dta", clear
{txt}
{com}. 
. // Getting sumstats 
. su kg_tdfert_unmarked kg_plantfert_unmarked packets_hyb_unmarked

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
kg_tdfert_~d {c |}{res}        820     8.09878    7.103199          0         75
{txt}kg_plantfe~d {c |}{res}        806    6.143238    6.342009          0         25
{txt}packets_hy~d {c |}{res}        812    1.314483    .5807212          0         10
{txt}
{com}. su kg_tdfert_blue kg_plantfert_blue packets_hyb_blue

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
kg_tdfert_~e {c |}{res}        822     12.3455    1.376406          0         25
{txt}kg_plantfe~e {c |}{res}        811    11.31751    3.389863          0         25
{txt}packets_hy~e {c |}{res}        816    1.370196    .4662883          0         10
{txt}
{com}. 
. // Testing for mean differences
. gen kg_tdfert_diff              = kg_tdfert_blue        - kg_tdfert_unmarked
{txt}(435 missing values generated)

{com}. gen kg_plantfert_diff   = kg_plantfert_blue - kg_plantfert_unmarked
{txt}(447 missing values generated)

{com}. gen packets_hyb_diff    = packets_hyb_blue      - packets_hyb_unmarked
{txt}(436 missing values generated)

{com}. 
. ttest kg_tdfert_diff    = 0

{txt}One-sample t test
{hline 9}{c TT}{hline 68}
Variable{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
kg_td~ff {c |}{res}{col 12}    813{col 22} 4.195572{col 34} .2448409{col 46} 6.981185{col 58} 3.714976{col 70} 4.676168
{txt}{hline 9}{c BT}{hline 68}
    mean = mean({res}kg_tdfert_diff{txt})                                   t = {res} 17.1359
{txt}Ho: mean = {res}0                                     {txt}degrees of freedom = {res}     812

    {txt}Ha: mean < {res}0                 {txt}Ha: mean != {res}0                 {txt}Ha: mean > {res}0
 {txt}Pr(T < t) = {res}1.0000         {txt}Pr(|T| > |t|) = {res}0.0000          {txt}Pr(T > t) = {res}0.0000
{txt}
{com}. ttest kg_plantfert_diff = 0

{txt}One-sample t test
{hline 9}{c TT}{hline 68}
Variable{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
kg_pl~ff {c |}{res}{col 12}    801{col 22} 5.152996{col 34} .2192189{col 46} 6.204321{col 58} 4.722684{col 70} 5.583308
{txt}{hline 9}{c BT}{hline 68}
    mean = mean({res}kg_plantfert_diff{txt})                                t = {res} 23.5062
{txt}Ho: mean = {res}0                                     {txt}degrees of freedom = {res}     800

    {txt}Ha: mean < {res}0                 {txt}Ha: mean != {res}0                 {txt}Ha: mean > {res}0
 {txt}Pr(T < t) = {res}1.0000         {txt}Pr(|T| > |t|) = {res}0.0000          {txt}Pr(T > t) = {res}0.0000
{txt}
{com}. ttest packets_hyb_diff  = 0

{txt}One-sample t test
{hline 9}{c TT}{hline 68}
Variable{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
packe~ff {c |}{res}{col 12}    812{col 22} .0559975{col 34} .0137451{col 46} .3916762{col 58} .0290173{col 70} .0829778
{txt}{hline 9}{c BT}{hline 68}
    mean = mean({res}packets_hyb_diff{txt})                                 t = {res}  4.0740
{txt}Ho: mean = {res}0                                     {txt}degrees of freedom = {res}     811

    {txt}Ha: mean < {res}0                 {txt}Ha: mean != {res}0                 {txt}Ha: mean > {res}0
 {txt}Pr(T < t) = {res}1.0000         {txt}Pr(|T| > |t|) = {res}0.0001          {txt}Pr(T > t) = {res}0.0000
{txt}
{com}. 
. // Constructing mean-difference table (similar to what you've done for Econ104)
. est clear
{txt}
{com}. eststo unmarked:        estpost summarize       kg_tdfert_unmarked      kg_plantfert_unmarked   packets_hyb_unmarked

{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(sum_w)}{space 1}{space 1}{ralign 9:e(mean)}{space 1}{space 1}{ralign 9:e(Var)}{space 1}{space 1}{ralign 9:e(sd)}{space 1}{space 1}{ralign 9:e(min)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert_~d}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      820}}}{space 1}{space 1}{ralign 9:{res:{sf:      820}}}{space 1}{space 1}{ralign 9:{res:{sf:  8.09878}}}{space 1}{space 1}{ralign 9:{res:{sf: 50.45543}}}{space 1}{space 1}{ralign 9:{res:{sf: 7.103199}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfe~d}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      806}}}{space 1}{space 1}{ralign 9:{res:{sf:      806}}}{space 1}{space 1}{ralign 9:{res:{sf: 6.143238}}}{space 1}{space 1}{ralign 9:{res:{sf: 40.22108}}}{space 1}{space 1}{ralign 9:{res:{sf: 6.342009}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hy~d}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      812}}}{space 1}{space 1}{ralign 9:{res:{sf:      812}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.314483}}}{space 1}{space 1}{ralign 9:{res:{sf: .3372371}}}{space 1}{space 1}{ralign 9:{res:{sf: .5807212}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(max)}{space 1}{space 1}{ralign 9:e(sum)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert_~d}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       75}}}{space 1}{space 1}{ralign 9:{res:{sf:     6641}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfe~d}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       25}}}{space 1}{space 1}{ralign 9:{res:{sf:  4951.45}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hy~d}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       10}}}{space 1}{space 1}{ralign 9:{res:{sf:  1067.36}}}{space 1}

{com}. eststo blue:            estpost summarize       kg_tdfert_blue          kg_plantfert_blue               packets_hyb_blue

{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(sum_w)}{space 1}{space 1}{ralign 9:e(mean)}{space 1}{space 1}{ralign 9:e(Var)}{space 1}{space 1}{ralign 9:e(sd)}{space 1}{space 1}{ralign 9:e(min)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert_~e}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      822}}}{space 1}{space 1}{ralign 9:{res:{sf:      822}}}{space 1}{space 1}{ralign 9:{res:{sf:  12.3455}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.894493}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.376406}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfe~e}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      811}}}{space 1}{space 1}{ralign 9:{res:{sf:      811}}}{space 1}{space 1}{ralign 9:{res:{sf: 11.31751}}}{space 1}{space 1}{ralign 9:{res:{sf: 11.49117}}}{space 1}{space 1}{ralign 9:{res:{sf: 3.389863}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hy~e}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      816}}}{space 1}{space 1}{ralign 9:{res:{sf:      816}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.370196}}}{space 1}{space 1}{ralign 9:{res:{sf: .2174247}}}{space 1}{space 1}{ralign 9:{res:{sf: .4662883}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(max)}{space 1}{space 1}{ralign 9:e(sum)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert_~e}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       25}}}{space 1}{space 1}{ralign 9:{res:{sf:    10148}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfe~e}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       25}}}{space 1}{space 1}{ralign 9:{res:{sf:   9178.5}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hy~e}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       10}}}{space 1}{space 1}{ralign 9:{res:{sf:  1118.08}}}{space 1}

{com}. eststo difference:      estpost summarize       kg_tdfert_diff          kg_plantfert_diff               packets_hyb_diff

{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(sum_w)}{space 1}{space 1}{ralign 9:e(mean)}{space 1}{space 1}{ralign 9:e(Var)}{space 1}{space 1}{ralign 9:e(sd)}{space 1}{space 1}{ralign 9:e(min)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert~ff}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      813}}}{space 1}{space 1}{ralign 9:{res:{sf:      813}}}{space 1}{space 1}{ralign 9:{res:{sf: 4.195572}}}{space 1}{space 1}{ralign 9:{res:{sf: 48.73695}}}{space 1}{space 1}{ralign 9:{res:{sf: 6.981185}}}{space 1}{space 1}{ralign 9:{res:{sf:    -62.5}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantf~ff}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      801}}}{space 1}{space 1}{ralign 9:{res:{sf:      801}}}{space 1}{space 1}{ralign 9:{res:{sf: 5.152996}}}{space 1}{space 1}{ralign 9:{res:{sf:  38.4936}}}{space 1}{space 1}{ralign 9:{res:{sf: 6.204321}}}{space 1}{space 1}{ralign 9:{res:{sf:      -15}}}{space 1}
{space 0}{space 0}{ralign 12:packets_h~ff}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      812}}}{space 1}{space 1}{ralign 9:{res:{sf:      812}}}{space 1}{space 1}{ralign 9:{res:{sf: .0559975}}}{space 1}{space 1}{ralign 9:{res:{sf: .1534102}}}{space 1}{space 1}{ralign 9:{res:{sf: .3916762}}}{space 1}{space 1}{ralign 9:{res:{sf:       -2}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(max)}{space 1}{space 1}{ralign 9:e(sum)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert~ff}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     17.5}}}{space 1}{space 1}{ralign 9:{res:{sf:     3411}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantf~ff}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       25}}}{space 1}{space 1}{ralign 9:{res:{sf:  4127.55}}}{space 1}
{space 0}{space 0}{ralign 12:packets_h~ff}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      2.5}}}{space 1}{space 1}{ralign 9:{res:{sf:    45.47}}}{space 1}

{com}. 
. esttab unmarked blue difference using "Section3_table1_raw.csv", replace cells("mean(pattern(1 1 0) fmt(2)) b(pattern(0 0 1) fmt(2) star)" "sd(pattern(1 1 0) fmt(2) par)" "p(pattern(0 0 1) fmt(3) par)") 
{res}{txt}(note: file Section3_table1_raw.csv not found)
(output written to {browse  `"Section3_table1_raw.csv"'})

{com}. 
. sss
{err}command {bf}sss{sf} is unrecognized
{txt}{search r(199):r(199);}

end of do-file

{search r(199):r(199);}

{com}. tab group_blue

 {txt}perception {c |}
         of {c |}
facilitator {c |}
  valuation {c |}
    of blue {c |}
plot (1-10) {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
          1 {c |}{res}          1        0.12        0.12
{txt}          2 {c |}{res}          3        0.36        0.48
{txt}          3 {c |}{res}          1        0.12        0.60
{txt}          4 {c |}{res}         10        1.21        1.81
{txt}          5 {c |}{res}         27        3.26        5.07
{txt}          6 {c |}{res}         44        5.31       10.39
{txt}          7 {c |}{res}        123       14.86       25.24
{txt}          8 {c |}{res}        300       36.23       61.47
{txt}          9 {c |}{res}        257       31.04       92.51
{txt}         10 {c |}{res}         62        7.49      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}        828      100.00

{com}. sort kg_tdfert_unmarked kg_tdfert_blue

. br kg_tdfert_unmarked kg_tdfert_blue

. do "/var/folders/wy/26794k5d4ydcf0nqcms58wkr0000gn/T//SD43744.000000"
{txt}
{com}. su kg_tdfert_unmarked kg_plantfert_unmarked packets_hyb_unmarked

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
kg_tdfert_~d {c |}{res}        820     8.09878    7.103199          0         75
{txt}kg_plantfe~d {c |}{res}        806    6.143238    6.342009          0         25
{txt}packets_hy~d {c |}{res}        812    1.314483    .5807212          0         10
{txt}
{com}. 
{txt}end of do-file

{com}. do "/var/folders/wy/26794k5d4ydcf0nqcms58wkr0000gn/T//SD43744.000000"
{txt}
{com}. su kg_tdfert_blue kg_plantfert_blue packets_hyb_blue

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
kg_tdfert_~e {c |}{res}        822     12.3455    1.376406          0         25
{txt}kg_plantfe~e {c |}{res}        811    11.31751    3.389863          0         25
{txt}packets_hy~e {c |}{res}        816    1.370196    .4662883          0         10
{txt}
{com}. 
{txt}end of do-file

{com}. do "/var/folders/wy/26794k5d4ydcf0nqcms58wkr0000gn/T//SD43744.000000"
{txt}
{com}. gen kg_tdfert_diff              = kg_tdfert_blue        - kg_tdfert_unmarked
{err}variable {bf}kg_tdfert_diff{sf} already defined
{txt}{search r(110):r(110);}

end of do-file

{search r(110):r(110);}

{com}. do "/var/folders/wy/26794k5d4ydcf0nqcms58wkr0000gn/T//SD43744.000000"
{txt}
{com}. * ---------------------------- *
. * Econ120 (J. Robinson, F2020) *
. * Section 3 (Oct. 19, 2020)        * NOTE: all the path directories are based on my own computer, 
. * TA: David Sungho Park        *       so you should change them according to yours.
. * ---------------------------- *
. 
. clear all
{txt}
{com}. set more off
{txt}
{com}. 
. cap noisily cd "/Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3/" // Note: I changed this from previous do-files for Sections 1 & 2
{res}/Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3
{txt}
{com}. 
. //log using "Econ120_F20_Section3.smcl", replace // you can uncomment this line if you want to keep a Stata log file
. 
. use "farming.dta", clear
{txt}
{com}. 
. // Getting sumstats 
. su kg_tdfert_unmarked kg_plantfert_unmarked packets_hyb_unmarked

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
kg_tdfert_~d {c |}{res}        820     8.09878    7.103199          0         75
{txt}kg_plantfe~d {c |}{res}        806    6.143238    6.342009          0         25
{txt}packets_hy~d {c |}{res}        812    1.314483    .5807212          0         10
{txt}
{com}. su kg_tdfert_blue kg_plantfert_blue packets_hyb_blue

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
kg_tdfert_~e {c |}{res}        822     12.3455    1.376406          0         25
{txt}kg_plantfe~e {c |}{res}        811    11.31751    3.389863          0         25
{txt}packets_hy~e {c |}{res}        816    1.370196    .4662883          0         10
{txt}
{com}. 
. // Testing for mean differences
. gen kg_tdfert_diff              = kg_tdfert_blue        - kg_tdfert_unmarked
{txt}(435 missing values generated)

{com}. gen kg_plantfert_diff   = kg_plantfert_blue - kg_plantfert_unmarked
{txt}(447 missing values generated)

{com}. gen packets_hyb_diff    = packets_hyb_blue      - packets_hyb_unmarked
{txt}(436 missing values generated)

{com}. 
{txt}end of do-file

{com}. su kg_tdfert_diff

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
kg_tdfert~ff {c |}{res}        813    4.195572    6.981185      -62.5       17.5

{com}. ttest kg_tdfert_diff
{err}by() option required
{txt}{search r(100):r(100);}

{com}. ttest kg_tdfert_diff=0

{txt}One-sample t test
{hline 9}{c TT}{hline 68}
Variable{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
kg_td~ff {c |}{res}{col 12}    813{col 22} 4.195572{col 34} .2448409{col 46} 6.981185{col 58} 3.714976{col 70} 4.676168
{txt}{hline 9}{c BT}{hline 68}
    mean = mean({res}kg_tdfert_diff{txt})                                   t = {res} 17.1359
{txt}Ho: mean = {res}0                                     {txt}degrees of freedom = {res}     812

    {txt}Ha: mean < {res}0                 {txt}Ha: mean != {res}0                 {txt}Ha: mean > {res}0
 {txt}Pr(T < t) = {res}1.0000         {txt}Pr(|T| > |t|) = {res}0.0000          {txt}Pr(T > t) = {res}0.0000

{com}. ttest kg_tdfert_diff=0  kg_plantfert_diff=0
{err}invalid 'kg_plantfert_diff' 
{txt}{search r(198):r(198);}

{com}. do "/var/folders/wy/26794k5d4ydcf0nqcms58wkr0000gn/T//SD43744.000000"
{txt}
{com}. use "farming.dta", clear
{txt}
{com}. reshape kg_tdfert kg_plantfert packets_hyb, i(respondent_id) 
{err}invalid syntax
{p 4 4 2}
In the {bf:reshape} command that you typed, you omitted the word {bf:wide} or {bf:long},
or substituted some other word for it.  You should have typed

        . {bf:reshape wide} {it:varlist}{bf:, ...}
    or
        . {bf:reshape long} {it:varlist}, ...

{p 4 4 2}
You might have omitted {it:varlist}, too.
The basic syntax of {bf:reshape} is
{p_end}

{col 9} {it:long}                                {it:wide}
{col 9}{c TLC}{hline 15}{c TRC}                   {c TLC}{hline 18}{c TRC}
{col 9}{c |} {it:i   j}   a   b {c |}                   {c |} {it:i}   a1 a2  b1 b2 {c |}
{col 9}{c |}{hline 15}{c |} <--- {bf:reshape} ---> {c |}{hline 18}{c |}
{col 9}{c |} 1   1   1   2 {c |}                   {c |} 1   1   3   2  4 {c |}
{col 9}{c |} 1   2   3   4 {c |}                   {c |} 2   5   7   6  8 {c |}
{col 9}{c |} 2   1   5   6 {c |}                   {c BLC}{hline 18}{c BRC}
{col 9}{c |} 2   2   7   8 {c |}
{col 9}{c BLC}{hline 15}{c BRC}

{col 9}long to wide: {bf:reshape wide a b, i(}{it:i}{bf:) j(}{it:j}{bf:)}    ({it:j} existing variable)
{col 9}wide to long: {bf:reshape long a b, i(}{it:i}{bf:) j(}{it:j}{bf:)}    ({it:j}    new   variable)
{txt}{search r(198):r(198);}

end of do-file

{search r(198):r(198);}

{com}. do "/var/folders/wy/26794k5d4ydcf0nqcms58wkr0000gn/T//SD43744.000000"
{txt}
{com}. use "farming.dta", clear
{txt}
{com}. reshape long kg_tdfert kg_plantfert packets_hyb, i(respondent_id) 
{err}variable {bf:_j} contains all missing values
{txt}{search r(498):r(498);}

end of do-file

{search r(498):r(498);}

{com}. help reshape

. do "/var/folders/wy/26794k5d4ydcf0nqcms58wkr0000gn/T//SD43744.000000"
{txt}
{com}. use "farming.dta", clear
{txt}
{com}. reshape long kg_tdfert kg_plantfert packets_hyb, i(respondent_id) j(plot)
{err}variable {bf:plot} contains all missing values
{txt}{search r(498):r(498);}

end of do-file

{search r(498):r(498);}

{com}. codebook respondent_id 

{txt}{hline}
{res}respondent_id{right:Farmer  ID}
{txt}{hline}

{col 19}type:  numeric ({res}long{txt})

{col 18}range:  [{res}53{txt},{res}93010{txt}]{col 55}units:  {res}1
{col 10}{txt}unique values:  {res}1,248{col 51}{txt}missing .:  {res}0{txt}/{res}1,248

{txt}{col 19}mean:{res}{col 26} 6865.61
{txt}{col 15}std. dev:{res}{col 26} 5050.54

{txt}{col 12}percentiles:{col 32}10%{col 42}25%{col 52}50%{col 62}75%{col 72}90%
{res}{col 27}    1503{col 37}  3210.5{col 47}  6602.5{col 57} 10306.5{col 67}   12301

{com}. br kg_tdfert_blue kg_tdfert_unmarked kg_tdfert_rof

. do "/var/folders/wy/26794k5d4ydcf0nqcms58wkr0000gn/T//SD43744.000000"
{txt}
{com}. use "farming.dta", clear
{txt}
{com}. reshape long kg_tdfert kg_plantfert packets_hyb, i(respondent_id) j(plot,string)
{txt}(note: j = _blue _rof _unmarked)

Data{col 36}wide{col 43}->{col 48}long
{hline 77}
Number of obs.                 {res}    1248   {txt}->{res}    3744
{txt}Number of variables            {res}      75   {txt}->{res}      70
{txt}j variable (3 values)                     ->   {res}plot
{txt}xij variables:
{res}kg_tdfert_blue kg_tdfert_rof kg_tdfert_unmarked{txt}->{res}kg_tdfert
kg_plantfert_blue kg_plantfert_rof kg_plantfert_unmarked{txt}->{res}kg_plantfert
packets_hyb_blue packets_hyb_rof packets_hyb_unmarked{txt}->{res}packets_hyb
{txt}{hline 77}

{com}. 
{txt}end of do-file

{com}. do "/var/folders/wy/26794k5d4ydcf0nqcms58wkr0000gn/T//SD43744.000000"
{txt}
{com}. use "farming.dta", clear
{txt}
{com}. keep respondent_id kg_tdfert_unmarked kg_plantfert_unmarked packets_hyb_unmarked kg_tdfert_blue kg_plantfert_blue packets_hyb_blue 
{txt}
{com}. reshape long kg_tdfert kg_plantfert packets_hyb, i(respondent_id) j(plot,string)
{txt}(note: j = _blue _unmarked)

Data{col 36}wide{col 43}->{col 48}long
{hline 77}
Number of obs.                 {res}    1248   {txt}->{res}    2496
{txt}Number of variables            {res}       7   {txt}->{res}       5
{txt}j variable (2 values)                     ->   {res}plot
{txt}xij variables:
      {res}kg_tdfert_blue kg_tdfert_unmarked   {txt}->   {res}kg_tdfert
kg_plantfert_blue kg_plantfert_unmarked   {txt}->   {res}kg_plantfert
  packets_hyb_blue packets_hyb_unmarked   {txt}->   {res}packets_hyb
{txt}{hline 77}

{com}. 
{txt}end of do-file

{com}. tab plot 

       {txt}plot {c |}      Freq.     Percent        Cum.
{hline 12}{c +}{hline 35}
      _blue {c |}{res}      1,248       50.00       50.00
{txt}  _unmarked {c |}{res}      1,248       50.00      100.00
{txt}{hline 12}{c +}{hline 35}
      Total {c |}{res}      2,496      100.00

{com}. do "/var/folders/wy/26794k5d4ydcf0nqcms58wkr0000gn/T//SD43744.000000"
{txt}
{com}. use "farming.dta", clear
{txt}
{com}. keep respondent_id kg_tdfert_unmarked kg_plantfert_unmarked packets_hyb_unmarked kg_tdfert_blue kg_plantfert_blue packets_hyb_blue 
{txt}
{com}. reshape long kg_tdfert kg_plantfert packets_hyb, i(respondent_id) j(plot,string)
{txt}(note: j = _blue _unmarked)

Data{col 36}wide{col 43}->{col 48}long
{hline 77}
Number of obs.                 {res}    1248   {txt}->{res}    2496
{txt}Number of variables            {res}       7   {txt}->{res}       5
{txt}j variable (2 values)                     ->   {res}plot
{txt}xij variables:
      {res}kg_tdfert_blue kg_tdfert_unmarked   {txt}->   {res}kg_tdfert
kg_plantfert_blue kg_plantfert_unmarked   {txt}->   {res}kg_plantfert
  packets_hyb_blue packets_hyb_unmarked   {txt}->   {res}packets_hyb
{txt}{hline 77}

{com}. 
. est clear
{txt}
{com}. eststo unmarked:        estpost summarize       kg_tdfert kg_plantfert packets_hyb if plot=="_unmarked"

{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(sum_w)}{space 1}{space 1}{ralign 9:e(mean)}{space 1}{space 1}{ralign 9:e(Var)}{space 1}{space 1}{ralign 9:e(sd)}{space 1}{space 1}{ralign 9:e(min)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      820}}}{space 1}{space 1}{ralign 9:{res:{sf:      820}}}{space 1}{space 1}{ralign 9:{res:{sf:  8.09878}}}{space 1}{space 1}{ralign 9:{res:{sf: 50.45543}}}{space 1}{space 1}{ralign 9:{res:{sf: 7.103199}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      806}}}{space 1}{space 1}{ralign 9:{res:{sf:      806}}}{space 1}{space 1}{ralign 9:{res:{sf: 6.143238}}}{space 1}{space 1}{ralign 9:{res:{sf: 40.22108}}}{space 1}{space 1}{ralign 9:{res:{sf: 6.342009}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      812}}}{space 1}{space 1}{ralign 9:{res:{sf:      812}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.314483}}}{space 1}{space 1}{ralign 9:{res:{sf: .3372371}}}{space 1}{space 1}{ralign 9:{res:{sf: .5807212}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(max)}{space 1}{space 1}{ralign 9:e(sum)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       75}}}{space 1}{space 1}{ralign 9:{res:{sf:     6641}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       25}}}{space 1}{space 1}{ralign 9:{res:{sf:  4951.45}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       10}}}{space 1}{space 1}{ralign 9:{res:{sf:  1067.36}}}{space 1}

{com}. eststo blue:            estpost summarize       kg_tdfert kg_plantfert packets_hyb if plot=="_blue"

{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(sum_w)}{space 1}{space 1}{ralign 9:e(mean)}{space 1}{space 1}{ralign 9:e(Var)}{space 1}{space 1}{ralign 9:e(sd)}{space 1}{space 1}{ralign 9:e(min)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      822}}}{space 1}{space 1}{ralign 9:{res:{sf:      822}}}{space 1}{space 1}{ralign 9:{res:{sf:  12.3455}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.894493}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.376406}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      811}}}{space 1}{space 1}{ralign 9:{res:{sf:      811}}}{space 1}{space 1}{ralign 9:{res:{sf: 11.31751}}}{space 1}{space 1}{ralign 9:{res:{sf: 11.49117}}}{space 1}{space 1}{ralign 9:{res:{sf: 3.389863}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      816}}}{space 1}{space 1}{ralign 9:{res:{sf:      816}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.370196}}}{space 1}{space 1}{ralign 9:{res:{sf: .2174247}}}{space 1}{space 1}{ralign 9:{res:{sf: .4662883}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(max)}{space 1}{space 1}{ralign 9:e(sum)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       25}}}{space 1}{space 1}{ralign 9:{res:{sf:    10148}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       25}}}{space 1}{space 1}{ralign 9:{res:{sf:   9178.5}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       10}}}{space 1}{space 1}{ralign 9:{res:{sf:  1118.08}}}{space 1}

{com}. eststo difference:      estpost ttest           kg_tdfert kg_plantfert packets_hyb, by(plot)

{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(b)}{space 1}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(se)}{space 1}{space 1}{ralign 9:e(t)}{space 1}{space 1}{ralign 9:e(df_t)}{space 1}{space 1}{ralign 9:e(p_l)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 4.246718}}}{space 1}{space 1}{ralign 9:{res:{sf:     1642}}}{space 1}{space 1}{ralign 9:{res:{sf: .2523719}}}{space 1}{space 1}{ralign 9:{res:{sf: 16.82722}}}{space 1}{space 1}{ralign 9:{res:{sf:     1640}}}{space 1}{space 1}{ralign 9:{res:{sf:        1}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 5.174271}}}{space 1}{space 1}{ralign 9:{res:{sf:     1617}}}{space 1}{space 1}{ralign 9:{res:{sf: .2526882}}}{space 1}{space 1}{ralign 9:{res:{sf:  20.4769}}}{space 1}{space 1}{ralign 9:{res:{sf:     1615}}}{space 1}{space 1}{ralign 9:{res:{sf:        1}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .0557133}}}{space 1}{space 1}{ralign 9:{res:{sf:     1628}}}{space 1}{space 1}{ralign 9:{res:{sf: .0260968}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.134869}}}{space 1}{space 1}{ralign 9:{res:{sf:     1626}}}{space 1}{space 1}{ralign 9:{res:{sf: .9835396}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(p)}{space 1}{space 1}{ralign 9:e(p_u)}{space 1}{space 1}{ralign 9:e(N_1)}{space 1}{space 1}{ralign 9:e(mu_1)}{space 1}{space 1}{ralign 9:e(N_2)}{space 1}{space 1}{ralign 9:e(mu_2)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 9.75e-59}}}{space 1}{space 1}{ralign 9:{res:{sf: 4.88e-59}}}{space 1}{space 1}{ralign 9:{res:{sf:      822}}}{space 1}{space 1}{ralign 9:{res:{sf:  12.3455}}}{space 1}{space 1}{ralign 9:{res:{sf:      820}}}{space 1}{space 1}{ralign 9:{res:{sf:  8.09878}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 4.94e-83}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.47e-83}}}{space 1}{space 1}{ralign 9:{res:{sf:      811}}}{space 1}{space 1}{ralign 9:{res:{sf: 11.31751}}}{space 1}{space 1}{ralign 9:{res:{sf:      806}}}{space 1}{space 1}{ralign 9:{res:{sf: 6.143238}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .0329209}}}{space 1}{space 1}{ralign 9:{res:{sf: .0164604}}}{space 1}{space 1}{ralign 9:{res:{sf:      816}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.370196}}}{space 1}{space 1}{ralign 9:{res:{sf:      812}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.314483}}}{space 1}

{com}. 
. esttab unmarked blue difference using "Section3_table1_raw.csv", replace cells("mean(pattern(1 1 0) fmt(2)) b(pattern(0 0 1) fmt(2) star)" "sd(pattern(1 1 0) fmt(2) par)" "p(pattern(0 0 1) fmt(3) par)") 
{res}{txt}(output written to {browse  `"Section3_table1_raw.csv"'})

{com}. 
{txt}end of do-file

{com}. do "/var/folders/wy/26794k5d4ydcf0nqcms58wkr0000gn/T//SD43744.000000"
{txt}
{com}. use "farming.dta", clear
{txt}
{com}. keep respondent_id kg_tdfert_unmarked kg_plantfert_unmarked packets_hyb_unmarked kg_tdfert_blue kg_plantfert_blue packets_hyb_blue 
{txt}
{com}. reshape long kg_tdfert kg_plantfert packets_hyb, i(respondent_id) j(plot,string)
{txt}(note: j = _blue _unmarked)

Data{col 36}wide{col 43}->{col 48}long
{hline 77}
Number of obs.                 {res}    1248   {txt}->{res}    2496
{txt}Number of variables            {res}       7   {txt}->{res}       5
{txt}j variable (2 values)                     ->   {res}plot
{txt}xij variables:
      {res}kg_tdfert_blue kg_tdfert_unmarked   {txt}->   {res}kg_tdfert
kg_plantfert_blue kg_plantfert_unmarked   {txt}->   {res}kg_plantfert
  packets_hyb_blue packets_hyb_unmarked   {txt}->   {res}packets_hyb
{txt}{hline 77}

{com}. 
. est clear
{txt}
{com}. eststo unmarked:        estpost summarize       kg_tdfert kg_plantfert packets_hyb if plot=="_unmarked"

{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(sum_w)}{space 1}{space 1}{ralign 9:e(mean)}{space 1}{space 1}{ralign 9:e(Var)}{space 1}{space 1}{ralign 9:e(sd)}{space 1}{space 1}{ralign 9:e(min)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      820}}}{space 1}{space 1}{ralign 9:{res:{sf:      820}}}{space 1}{space 1}{ralign 9:{res:{sf:  8.09878}}}{space 1}{space 1}{ralign 9:{res:{sf: 50.45543}}}{space 1}{space 1}{ralign 9:{res:{sf: 7.103199}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      806}}}{space 1}{space 1}{ralign 9:{res:{sf:      806}}}{space 1}{space 1}{ralign 9:{res:{sf: 6.143238}}}{space 1}{space 1}{ralign 9:{res:{sf: 40.22108}}}{space 1}{space 1}{ralign 9:{res:{sf: 6.342009}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      812}}}{space 1}{space 1}{ralign 9:{res:{sf:      812}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.314483}}}{space 1}{space 1}{ralign 9:{res:{sf: .3372371}}}{space 1}{space 1}{ralign 9:{res:{sf: .5807212}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(max)}{space 1}{space 1}{ralign 9:e(sum)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       75}}}{space 1}{space 1}{ralign 9:{res:{sf:     6641}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       25}}}{space 1}{space 1}{ralign 9:{res:{sf:  4951.45}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       10}}}{space 1}{space 1}{ralign 9:{res:{sf:  1067.36}}}{space 1}

{com}. eststo blue:            estpost summarize       kg_tdfert kg_plantfert packets_hyb if plot=="_blue"

{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(sum_w)}{space 1}{space 1}{ralign 9:e(mean)}{space 1}{space 1}{ralign 9:e(Var)}{space 1}{space 1}{ralign 9:e(sd)}{space 1}{space 1}{ralign 9:e(min)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      822}}}{space 1}{space 1}{ralign 9:{res:{sf:      822}}}{space 1}{space 1}{ralign 9:{res:{sf:  12.3455}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.894493}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.376406}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      811}}}{space 1}{space 1}{ralign 9:{res:{sf:      811}}}{space 1}{space 1}{ralign 9:{res:{sf: 11.31751}}}{space 1}{space 1}{ralign 9:{res:{sf: 11.49117}}}{space 1}{space 1}{ralign 9:{res:{sf: 3.389863}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      816}}}{space 1}{space 1}{ralign 9:{res:{sf:      816}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.370196}}}{space 1}{space 1}{ralign 9:{res:{sf: .2174247}}}{space 1}{space 1}{ralign 9:{res:{sf: .4662883}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(max)}{space 1}{space 1}{ralign 9:e(sum)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       25}}}{space 1}{space 1}{ralign 9:{res:{sf:    10148}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       25}}}{space 1}{space 1}{ralign 9:{res:{sf:   9178.5}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       10}}}{space 1}{space 1}{ralign 9:{res:{sf:  1118.08}}}{space 1}

{com}. eststo difference:      estpost ttest           kg_tdfert kg_plantfert packets_hyb, by(plot)

{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(b)}{space 1}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(se)}{space 1}{space 1}{ralign 9:e(t)}{space 1}{space 1}{ralign 9:e(df_t)}{space 1}{space 1}{ralign 9:e(p_l)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 4.246718}}}{space 1}{space 1}{ralign 9:{res:{sf:     1642}}}{space 1}{space 1}{ralign 9:{res:{sf: .2523719}}}{space 1}{space 1}{ralign 9:{res:{sf: 16.82722}}}{space 1}{space 1}{ralign 9:{res:{sf:     1640}}}{space 1}{space 1}{ralign 9:{res:{sf:        1}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 5.174271}}}{space 1}{space 1}{ralign 9:{res:{sf:     1617}}}{space 1}{space 1}{ralign 9:{res:{sf: .2526882}}}{space 1}{space 1}{ralign 9:{res:{sf:  20.4769}}}{space 1}{space 1}{ralign 9:{res:{sf:     1615}}}{space 1}{space 1}{ralign 9:{res:{sf:        1}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .0557133}}}{space 1}{space 1}{ralign 9:{res:{sf:     1628}}}{space 1}{space 1}{ralign 9:{res:{sf: .0260968}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.134869}}}{space 1}{space 1}{ralign 9:{res:{sf:     1626}}}{space 1}{space 1}{ralign 9:{res:{sf: .9835396}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(p)}{space 1}{space 1}{ralign 9:e(p_u)}{space 1}{space 1}{ralign 9:e(N_1)}{space 1}{space 1}{ralign 9:e(mu_1)}{space 1}{space 1}{ralign 9:e(N_2)}{space 1}{space 1}{ralign 9:e(mu_2)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 9.75e-59}}}{space 1}{space 1}{ralign 9:{res:{sf: 4.88e-59}}}{space 1}{space 1}{ralign 9:{res:{sf:      822}}}{space 1}{space 1}{ralign 9:{res:{sf:  12.3455}}}{space 1}{space 1}{ralign 9:{res:{sf:      820}}}{space 1}{space 1}{ralign 9:{res:{sf:  8.09878}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 4.94e-83}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.47e-83}}}{space 1}{space 1}{ralign 9:{res:{sf:      811}}}{space 1}{space 1}{ralign 9:{res:{sf: 11.31751}}}{space 1}{space 1}{ralign 9:{res:{sf:      806}}}{space 1}{space 1}{ralign 9:{res:{sf: 6.143238}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .0329209}}}{space 1}{space 1}{ralign 9:{res:{sf: .0164604}}}{space 1}{space 1}{ralign 9:{res:{sf:      816}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.370196}}}{space 1}{space 1}{ralign 9:{res:{sf:      812}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.314483}}}{space 1}

{com}. 
. esttab unmarked blue difference using "Section3_table1_raw.csv", replace cells("mean(pattern(1 1 0) fmt(%9.2f)) b(pattern(0 0 1) fmt(%9.2f) star)" "sd(pattern(1 1 0) fmt(%9.2f) par)" "p(pattern(0 0 1) fmt(%9.2f) par)") starlevels(* 0.10 ** 0.05 *** 0.01)
{res}{txt}(output written to {browse  `"Section3_table1_raw.csv"'})

{com}. 
{txt}end of do-file

{com}. do "/Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3/Econ120_F20_Section3.do"
{txt}
{com}. * ---------------------------- *
. * Econ120 (J. Robinson, F2020) *
. * Section 3 (Oct. 19, 2020)        * NOTE: all the path directories are based on my own computer, 
. * TA: David Sungho Park        *       so you should change them according to yours.
. * ---------------------------- *
. 
. clear all
{txt}
{com}. set more off
{txt}
{com}. 
. cap noisily cd "/Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3/" // Note: I changed this from previous do-files for Sections 1 & 2
{res}/Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3
{txt}
{com}. 
. //log using "Econ120_F20_Section3.smcl", replace // you can uncomment this line if you want to keep a Stata log file
. 
. use "farming.dta", clear
{txt}
{com}. 
. // Getting sumstats 
. su kg_tdfert_unmarked kg_plantfert_unmarked packets_hyb_unmarked

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
kg_tdfert_~d {c |}{res}        820     8.09878    7.103199          0         75
{txt}kg_plantfe~d {c |}{res}        806    6.143238    6.342009          0         25
{txt}packets_hy~d {c |}{res}        812    1.314483    .5807212          0         10
{txt}
{com}. su kg_tdfert_blue kg_plantfert_blue packets_hyb_blue

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
kg_tdfert_~e {c |}{res}        822     12.3455    1.376406          0         25
{txt}kg_plantfe~e {c |}{res}        811    11.31751    3.389863          0         25
{txt}packets_hy~e {c |}{res}        816    1.370196    .4662883          0         10
{txt}
{com}. 
. // Testing for mean differences
. gen kg_tdfert_diff              = kg_tdfert_blue        - kg_tdfert_unmarked
{txt}(435 missing values generated)

{com}. gen kg_plantfert_diff   = kg_plantfert_blue - kg_plantfert_unmarked
{txt}(447 missing values generated)

{com}. gen packets_hyb_diff    = packets_hyb_blue      - packets_hyb_unmarked
{txt}(436 missing values generated)

{com}. 
. ttest kg_tdfert_diff    = 0

{txt}One-sample t test
{hline 9}{c TT}{hline 68}
Variable{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
kg_td~ff {c |}{res}{col 12}    813{col 22} 4.195572{col 34} .2448409{col 46} 6.981185{col 58} 3.714976{col 70} 4.676168
{txt}{hline 9}{c BT}{hline 68}
    mean = mean({res}kg_tdfert_diff{txt})                                   t = {res} 17.1359
{txt}Ho: mean = {res}0                                     {txt}degrees of freedom = {res}     812

    {txt}Ha: mean < {res}0                 {txt}Ha: mean != {res}0                 {txt}Ha: mean > {res}0
 {txt}Pr(T < t) = {res}1.0000         {txt}Pr(|T| > |t|) = {res}0.0000          {txt}Pr(T > t) = {res}0.0000
{txt}
{com}. ttest kg_plantfert_diff = 0

{txt}One-sample t test
{hline 9}{c TT}{hline 68}
Variable{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
kg_pl~ff {c |}{res}{col 12}    801{col 22} 5.152996{col 34} .2192189{col 46} 6.204321{col 58} 4.722684{col 70} 5.583308
{txt}{hline 9}{c BT}{hline 68}
    mean = mean({res}kg_plantfert_diff{txt})                                t = {res} 23.5062
{txt}Ho: mean = {res}0                                     {txt}degrees of freedom = {res}     800

    {txt}Ha: mean < {res}0                 {txt}Ha: mean != {res}0                 {txt}Ha: mean > {res}0
 {txt}Pr(T < t) = {res}1.0000         {txt}Pr(|T| > |t|) = {res}0.0000          {txt}Pr(T > t) = {res}0.0000
{txt}
{com}. ttest packets_hyb_diff  = 0

{txt}One-sample t test
{hline 9}{c TT}{hline 68}
Variable{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
packe~ff {c |}{res}{col 12}    812{col 22} .0559975{col 34} .0137451{col 46} .3916762{col 58} .0290173{col 70} .0829778
{txt}{hline 9}{c BT}{hline 68}
    mean = mean({res}packets_hyb_diff{txt})                                 t = {res}  4.0740
{txt}Ho: mean = {res}0                                     {txt}degrees of freedom = {res}     811

    {txt}Ha: mean < {res}0                 {txt}Ha: mean != {res}0                 {txt}Ha: mean > {res}0
 {txt}Pr(T < t) = {res}1.0000         {txt}Pr(|T| > |t|) = {res}0.0001          {txt}Pr(T > t) = {res}0.0000
{txt}
{com}. 
. // Constructing mean-difference table (similar to what you've done for Econ104)
. use "farming.dta", clear
{txt}
{com}. keep respondent_id kg_tdfert_unmarked kg_plantfert_unmarked packets_hyb_unmarked kg_tdfert_blue kg_plantfert_blue packets_hyb_blue 
{txt}
{com}. reshape long kg_tdfert kg_plantfert packets_hyb, i(respondent_id) j(plot,string)
{txt}(note: j = _blue _unmarked)

Data{col 36}wide{col 43}->{col 48}long
{hline 77}
Number of obs.                 {res}    1248   {txt}->{res}    2496
{txt}Number of variables            {res}       7   {txt}->{res}       5
{txt}j variable (2 values)                     ->   {res}plot
{txt}xij variables:
      {res}kg_tdfert_blue kg_tdfert_unmarked   {txt}->   {res}kg_tdfert
kg_plantfert_blue kg_plantfert_unmarked   {txt}->   {res}kg_plantfert
  packets_hyb_blue packets_hyb_unmarked   {txt}->   {res}packets_hyb
{txt}{hline 77}

{com}. 
. est clear
{txt}
{com}. eststo unmarked:        estpost summarize       kg_tdfert kg_plantfert packets_hyb if plot=="_unmarked"

{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(sum_w)}{space 1}{space 1}{ralign 9:e(mean)}{space 1}{space 1}{ralign 9:e(Var)}{space 1}{space 1}{ralign 9:e(sd)}{space 1}{space 1}{ralign 9:e(min)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      820}}}{space 1}{space 1}{ralign 9:{res:{sf:      820}}}{space 1}{space 1}{ralign 9:{res:{sf:  8.09878}}}{space 1}{space 1}{ralign 9:{res:{sf: 50.45543}}}{space 1}{space 1}{ralign 9:{res:{sf: 7.103199}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      806}}}{space 1}{space 1}{ralign 9:{res:{sf:      806}}}{space 1}{space 1}{ralign 9:{res:{sf: 6.143238}}}{space 1}{space 1}{ralign 9:{res:{sf: 40.22108}}}{space 1}{space 1}{ralign 9:{res:{sf: 6.342009}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      812}}}{space 1}{space 1}{ralign 9:{res:{sf:      812}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.314483}}}{space 1}{space 1}{ralign 9:{res:{sf: .3372371}}}{space 1}{space 1}{ralign 9:{res:{sf: .5807212}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(max)}{space 1}{space 1}{ralign 9:e(sum)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       75}}}{space 1}{space 1}{ralign 9:{res:{sf:     6641}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       25}}}{space 1}{space 1}{ralign 9:{res:{sf:  4951.45}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       10}}}{space 1}{space 1}{ralign 9:{res:{sf:  1067.36}}}{space 1}

{com}. eststo blue:            estpost summarize       kg_tdfert kg_plantfert packets_hyb if plot=="_blue"

{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(sum_w)}{space 1}{space 1}{ralign 9:e(mean)}{space 1}{space 1}{ralign 9:e(Var)}{space 1}{space 1}{ralign 9:e(sd)}{space 1}{space 1}{ralign 9:e(min)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      822}}}{space 1}{space 1}{ralign 9:{res:{sf:      822}}}{space 1}{space 1}{ralign 9:{res:{sf:  12.3455}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.894493}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.376406}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      811}}}{space 1}{space 1}{ralign 9:{res:{sf:      811}}}{space 1}{space 1}{ralign 9:{res:{sf: 11.31751}}}{space 1}{space 1}{ralign 9:{res:{sf: 11.49117}}}{space 1}{space 1}{ralign 9:{res:{sf: 3.389863}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      816}}}{space 1}{space 1}{ralign 9:{res:{sf:      816}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.370196}}}{space 1}{space 1}{ralign 9:{res:{sf: .2174247}}}{space 1}{space 1}{ralign 9:{res:{sf: .4662883}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(max)}{space 1}{space 1}{ralign 9:e(sum)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       25}}}{space 1}{space 1}{ralign 9:{res:{sf:    10148}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       25}}}{space 1}{space 1}{ralign 9:{res:{sf:   9178.5}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       10}}}{space 1}{space 1}{ralign 9:{res:{sf:  1118.08}}}{space 1}

{com}. eststo difference:      estpost ttest           kg_tdfert kg_plantfert packets_hyb, by(plot)

{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(b)}{space 1}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(se)}{space 1}{space 1}{ralign 9:e(t)}{space 1}{space 1}{ralign 9:e(df_t)}{space 1}{space 1}{ralign 9:e(p_l)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 4.246718}}}{space 1}{space 1}{ralign 9:{res:{sf:     1642}}}{space 1}{space 1}{ralign 9:{res:{sf: .2523719}}}{space 1}{space 1}{ralign 9:{res:{sf: 16.82722}}}{space 1}{space 1}{ralign 9:{res:{sf:     1640}}}{space 1}{space 1}{ralign 9:{res:{sf:        1}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 5.174271}}}{space 1}{space 1}{ralign 9:{res:{sf:     1617}}}{space 1}{space 1}{ralign 9:{res:{sf: .2526882}}}{space 1}{space 1}{ralign 9:{res:{sf:  20.4769}}}{space 1}{space 1}{ralign 9:{res:{sf:     1615}}}{space 1}{space 1}{ralign 9:{res:{sf:        1}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .0557133}}}{space 1}{space 1}{ralign 9:{res:{sf:     1628}}}{space 1}{space 1}{ralign 9:{res:{sf: .0260968}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.134869}}}{space 1}{space 1}{ralign 9:{res:{sf:     1626}}}{space 1}{space 1}{ralign 9:{res:{sf: .9835396}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(p)}{space 1}{space 1}{ralign 9:e(p_u)}{space 1}{space 1}{ralign 9:e(N_1)}{space 1}{space 1}{ralign 9:e(mu_1)}{space 1}{space 1}{ralign 9:e(N_2)}{space 1}{space 1}{ralign 9:e(mu_2)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 9.75e-59}}}{space 1}{space 1}{ralign 9:{res:{sf: 4.88e-59}}}{space 1}{space 1}{ralign 9:{res:{sf:      822}}}{space 1}{space 1}{ralign 9:{res:{sf:  12.3455}}}{space 1}{space 1}{ralign 9:{res:{sf:      820}}}{space 1}{space 1}{ralign 9:{res:{sf:  8.09878}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 4.94e-83}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.47e-83}}}{space 1}{space 1}{ralign 9:{res:{sf:      811}}}{space 1}{space 1}{ralign 9:{res:{sf: 11.31751}}}{space 1}{space 1}{ralign 9:{res:{sf:      806}}}{space 1}{space 1}{ralign 9:{res:{sf: 6.143238}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .0329209}}}{space 1}{space 1}{ralign 9:{res:{sf: .0164604}}}{space 1}{space 1}{ralign 9:{res:{sf:      816}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.370196}}}{space 1}{space 1}{ralign 9:{res:{sf:      812}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.314483}}}{space 1}

{com}. 
. esttab unmarked blue difference using "Section3_table1_raw.csv", replace cells("mean(pattern(1 1 0) fmt(%9.2f)) b(pattern(0 0 1) fmt(%9.2f) star)" "sd(pattern(1 1 0) fmt(%9.2f) par)" "p(pattern(0 0 1) fmt(%9.2f) par)") starlevels(* 0.10 ** 0.05 *** 0.01) plain
{res}{txt}(output written to {browse  `"Section3_table1_raw.csv"'})

{com}. 
. sss
{err}command {bf}sss{sf} is unrecognized
{txt}{search r(199):r(199);}

end of do-file

{search r(199):r(199);}

{com}. do "/Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3/Econ120_F20_Section3.do"
{txt}
{com}. * ---------------------------- *
. * Econ120 (J. Robinson, F2020) *
. * Section 3 (Oct. 19, 2020)        * NOTE: all the path directories are based on my own computer, 
. * TA: David Sungho Park        *       so you should change them according to yours.
. * ---------------------------- *
. 
. clear all
{txt}
{com}. set more off
{txt}
{com}. 
. cap noisily cd "/Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3/" // Note: I changed this from previous do-files for Sections 1 & 2
{res}/Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3
{txt}
{com}. 
. //log using "Econ120_F20_Section3.smcl", replace // you can uncomment this line if you want to keep a Stata log file
. 
. use "farming.dta", clear
{txt}
{com}. 
. // Getting sumstats 
. su kg_tdfert_unmarked kg_plantfert_unmarked packets_hyb_unmarked

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
kg_tdfert_~d {c |}{res}        820     8.09878    7.103199          0         75
{txt}kg_plantfe~d {c |}{res}        806    6.143238    6.342009          0         25
{txt}packets_hy~d {c |}{res}        812    1.314483    .5807212          0         10
{txt}
{com}. su kg_tdfert_blue kg_plantfert_blue packets_hyb_blue

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
kg_tdfert_~e {c |}{res}        822     12.3455    1.376406          0         25
{txt}kg_plantfe~e {c |}{res}        811    11.31751    3.389863          0         25
{txt}packets_hy~e {c |}{res}        816    1.370196    .4662883          0         10
{txt}
{com}. 
. // Testing for mean differences
. gen kg_tdfert_diff              = kg_tdfert_blue        - kg_tdfert_unmarked
{txt}(435 missing values generated)

{com}. gen kg_plantfert_diff   = kg_plantfert_blue - kg_plantfert_unmarked
{txt}(447 missing values generated)

{com}. gen packets_hyb_diff    = packets_hyb_blue      - packets_hyb_unmarked
{txt}(436 missing values generated)

{com}. 
. ttest kg_tdfert_diff    = 0

{txt}One-sample t test
{hline 9}{c TT}{hline 68}
Variable{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
kg_td~ff {c |}{res}{col 12}    813{col 22} 4.195572{col 34} .2448409{col 46} 6.981185{col 58} 3.714976{col 70} 4.676168
{txt}{hline 9}{c BT}{hline 68}
    mean = mean({res}kg_tdfert_diff{txt})                                   t = {res} 17.1359
{txt}Ho: mean = {res}0                                     {txt}degrees of freedom = {res}     812

    {txt}Ha: mean < {res}0                 {txt}Ha: mean != {res}0                 {txt}Ha: mean > {res}0
 {txt}Pr(T < t) = {res}1.0000         {txt}Pr(|T| > |t|) = {res}0.0000          {txt}Pr(T > t) = {res}0.0000
{txt}
{com}. ttest kg_plantfert_diff = 0

{txt}One-sample t test
{hline 9}{c TT}{hline 68}
Variable{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
kg_pl~ff {c |}{res}{col 12}    801{col 22} 5.152996{col 34} .2192189{col 46} 6.204321{col 58} 4.722684{col 70} 5.583308
{txt}{hline 9}{c BT}{hline 68}
    mean = mean({res}kg_plantfert_diff{txt})                                t = {res} 23.5062
{txt}Ho: mean = {res}0                                     {txt}degrees of freedom = {res}     800

    {txt}Ha: mean < {res}0                 {txt}Ha: mean != {res}0                 {txt}Ha: mean > {res}0
 {txt}Pr(T < t) = {res}1.0000         {txt}Pr(|T| > |t|) = {res}0.0000          {txt}Pr(T > t) = {res}0.0000
{txt}
{com}. ttest packets_hyb_diff  = 0

{txt}One-sample t test
{hline 9}{c TT}{hline 68}
Variable{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
packe~ff {c |}{res}{col 12}    812{col 22} .0559975{col 34} .0137451{col 46} .3916762{col 58} .0290173{col 70} .0829778
{txt}{hline 9}{c BT}{hline 68}
    mean = mean({res}packets_hyb_diff{txt})                                 t = {res}  4.0740
{txt}Ho: mean = {res}0                                     {txt}degrees of freedom = {res}     811

    {txt}Ha: mean < {res}0                 {txt}Ha: mean != {res}0                 {txt}Ha: mean > {res}0
 {txt}Pr(T < t) = {res}1.0000         {txt}Pr(|T| > |t|) = {res}0.0001          {txt}Pr(T > t) = {res}0.0000
{txt}
{com}. 
. // Constructing mean-difference table (similar to what you've done for Econ104)
. use "farming.dta", clear
{txt}
{com}. keep respondent_id kg_tdfert_unmarked kg_plantfert_unmarked packets_hyb_unmarked kg_tdfert_blue kg_plantfert_blue packets_hyb_blue 
{txt}
{com}. reshape long kg_tdfert kg_plantfert packets_hyb, i(respondent_id) j(plot,string)
{txt}(note: j = _blue _unmarked)

Data{col 36}wide{col 43}->{col 48}long
{hline 77}
Number of obs.                 {res}    1248   {txt}->{res}    2496
{txt}Number of variables            {res}       7   {txt}->{res}       5
{txt}j variable (2 values)                     ->   {res}plot
{txt}xij variables:
      {res}kg_tdfert_blue kg_tdfert_unmarked   {txt}->   {res}kg_tdfert
kg_plantfert_blue kg_plantfert_unmarked   {txt}->   {res}kg_plantfert
  packets_hyb_blue packets_hyb_unmarked   {txt}->   {res}packets_hyb
{txt}{hline 77}

{com}. 
. est clear
{txt}
{com}. eststo unmarked:        estpost summarize       kg_tdfert kg_plantfert packets_hyb if plot=="_unmarked"

{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(sum_w)}{space 1}{space 1}{ralign 9:e(mean)}{space 1}{space 1}{ralign 9:e(Var)}{space 1}{space 1}{ralign 9:e(sd)}{space 1}{space 1}{ralign 9:e(min)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      820}}}{space 1}{space 1}{ralign 9:{res:{sf:      820}}}{space 1}{space 1}{ralign 9:{res:{sf:  8.09878}}}{space 1}{space 1}{ralign 9:{res:{sf: 50.45543}}}{space 1}{space 1}{ralign 9:{res:{sf: 7.103199}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      806}}}{space 1}{space 1}{ralign 9:{res:{sf:      806}}}{space 1}{space 1}{ralign 9:{res:{sf: 6.143238}}}{space 1}{space 1}{ralign 9:{res:{sf: 40.22108}}}{space 1}{space 1}{ralign 9:{res:{sf: 6.342009}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      812}}}{space 1}{space 1}{ralign 9:{res:{sf:      812}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.314483}}}{space 1}{space 1}{ralign 9:{res:{sf: .3372371}}}{space 1}{space 1}{ralign 9:{res:{sf: .5807212}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(max)}{space 1}{space 1}{ralign 9:e(sum)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       75}}}{space 1}{space 1}{ralign 9:{res:{sf:     6641}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       25}}}{space 1}{space 1}{ralign 9:{res:{sf:  4951.45}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       10}}}{space 1}{space 1}{ralign 9:{res:{sf:  1067.36}}}{space 1}

{com}. eststo blue:            estpost summarize       kg_tdfert kg_plantfert packets_hyb if plot=="_blue"

{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(sum_w)}{space 1}{space 1}{ralign 9:e(mean)}{space 1}{space 1}{ralign 9:e(Var)}{space 1}{space 1}{ralign 9:e(sd)}{space 1}{space 1}{ralign 9:e(min)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      822}}}{space 1}{space 1}{ralign 9:{res:{sf:      822}}}{space 1}{space 1}{ralign 9:{res:{sf:  12.3455}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.894493}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.376406}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      811}}}{space 1}{space 1}{ralign 9:{res:{sf:      811}}}{space 1}{space 1}{ralign 9:{res:{sf: 11.31751}}}{space 1}{space 1}{ralign 9:{res:{sf: 11.49117}}}{space 1}{space 1}{ralign 9:{res:{sf: 3.389863}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      816}}}{space 1}{space 1}{ralign 9:{res:{sf:      816}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.370196}}}{space 1}{space 1}{ralign 9:{res:{sf: .2174247}}}{space 1}{space 1}{ralign 9:{res:{sf: .4662883}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(max)}{space 1}{space 1}{ralign 9:e(sum)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       25}}}{space 1}{space 1}{ralign 9:{res:{sf:    10148}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       25}}}{space 1}{space 1}{ralign 9:{res:{sf:   9178.5}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       10}}}{space 1}{space 1}{ralign 9:{res:{sf:  1118.08}}}{space 1}

{com}. eststo difference:      estpost ttest           kg_tdfert kg_plantfert packets_hyb, by(plot)

{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(b)}{space 1}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(se)}{space 1}{space 1}{ralign 9:e(t)}{space 1}{space 1}{ralign 9:e(df_t)}{space 1}{space 1}{ralign 9:e(p_l)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 4.246718}}}{space 1}{space 1}{ralign 9:{res:{sf:     1642}}}{space 1}{space 1}{ralign 9:{res:{sf: .2523719}}}{space 1}{space 1}{ralign 9:{res:{sf: 16.82722}}}{space 1}{space 1}{ralign 9:{res:{sf:     1640}}}{space 1}{space 1}{ralign 9:{res:{sf:        1}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 5.174271}}}{space 1}{space 1}{ralign 9:{res:{sf:     1617}}}{space 1}{space 1}{ralign 9:{res:{sf: .2526882}}}{space 1}{space 1}{ralign 9:{res:{sf:  20.4769}}}{space 1}{space 1}{ralign 9:{res:{sf:     1615}}}{space 1}{space 1}{ralign 9:{res:{sf:        1}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .0557133}}}{space 1}{space 1}{ralign 9:{res:{sf:     1628}}}{space 1}{space 1}{ralign 9:{res:{sf: .0260968}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.134869}}}{space 1}{space 1}{ralign 9:{res:{sf:     1626}}}{space 1}{space 1}{ralign 9:{res:{sf: .9835396}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(p)}{space 1}{space 1}{ralign 9:e(p_u)}{space 1}{space 1}{ralign 9:e(N_1)}{space 1}{space 1}{ralign 9:e(mu_1)}{space 1}{space 1}{ralign 9:e(N_2)}{space 1}{space 1}{ralign 9:e(mu_2)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 9.75e-59}}}{space 1}{space 1}{ralign 9:{res:{sf: 4.88e-59}}}{space 1}{space 1}{ralign 9:{res:{sf:      822}}}{space 1}{space 1}{ralign 9:{res:{sf:  12.3455}}}{space 1}{space 1}{ralign 9:{res:{sf:      820}}}{space 1}{space 1}{ralign 9:{res:{sf:  8.09878}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 4.94e-83}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.47e-83}}}{space 1}{space 1}{ralign 9:{res:{sf:      811}}}{space 1}{space 1}{ralign 9:{res:{sf: 11.31751}}}{space 1}{space 1}{ralign 9:{res:{sf:      806}}}{space 1}{space 1}{ralign 9:{res:{sf: 6.143238}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .0329209}}}{space 1}{space 1}{ralign 9:{res:{sf: .0164604}}}{space 1}{space 1}{ralign 9:{res:{sf:      816}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.370196}}}{space 1}{space 1}{ralign 9:{res:{sf:      812}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.314483}}}{space 1}

{com}. 
. esttab unmarked blue difference using "Section3_table1_raw.csv", replace cells("mean(pattern(1 1 0) fmt(%9.2f)) b(pattern(0 0 1) fmt(%9.2f) star)" "sd(pattern(1 1 0) fmt(%9.2f) par)" "p(pattern(0 0 1) fmt(%9.2f) par)") starlevels(* 0.10 ** 0.05 *** 0.01) plain nomtitle
{res}{txt}(output written to {browse  `"Section3_table1_raw.csv"'})

{com}. 
. sss
{err}command {bf}sss{sf} is unrecognized
{txt}{search r(199):r(199);}

end of do-file

{search r(199):r(199);}

{com}. do "/Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3/Econ120_F20_Section3.do"
{txt}
{com}. * ---------------------------- *
. * Econ120 (J. Robinson, F2020) *
. * Section 3 (Oct. 19, 2020)        * NOTE: all the path directories are based on my own computer, 
. * TA: David Sungho Park        *       so you should change them according to yours.
. * ---------------------------- *
. 
. clear all
{txt}
{com}. set more off
{txt}
{com}. 
. cap noisily cd "/Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3/" // Note: I changed this from previous do-files for Sections 1 & 2
{res}/Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3
{txt}
{com}. 
. //log using "Econ120_F20_Section3.smcl", replace // you can uncomment this line if you want to keep a Stata log file
. 
. use "farming.dta", clear
{txt}
{com}. 
. // Getting sumstats 
. su kg_tdfert_unmarked kg_plantfert_unmarked packets_hyb_unmarked

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
kg_tdfert_~d {c |}{res}        820     8.09878    7.103199          0         75
{txt}kg_plantfe~d {c |}{res}        806    6.143238    6.342009          0         25
{txt}packets_hy~d {c |}{res}        812    1.314483    .5807212          0         10
{txt}
{com}. su kg_tdfert_blue kg_plantfert_blue packets_hyb_blue

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
kg_tdfert_~e {c |}{res}        822     12.3455    1.376406          0         25
{txt}kg_plantfe~e {c |}{res}        811    11.31751    3.389863          0         25
{txt}packets_hy~e {c |}{res}        816    1.370196    .4662883          0         10
{txt}
{com}. 
. // Testing for mean differences
. gen kg_tdfert_diff              = kg_tdfert_blue        - kg_tdfert_unmarked
{txt}(435 missing values generated)

{com}. gen kg_plantfert_diff   = kg_plantfert_blue - kg_plantfert_unmarked
{txt}(447 missing values generated)

{com}. gen packets_hyb_diff    = packets_hyb_blue      - packets_hyb_unmarked
{txt}(436 missing values generated)

{com}. 
. ttest kg_tdfert_diff    = 0

{txt}One-sample t test
{hline 9}{c TT}{hline 68}
Variable{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
kg_td~ff {c |}{res}{col 12}    813{col 22} 4.195572{col 34} .2448409{col 46} 6.981185{col 58} 3.714976{col 70} 4.676168
{txt}{hline 9}{c BT}{hline 68}
    mean = mean({res}kg_tdfert_diff{txt})                                   t = {res} 17.1359
{txt}Ho: mean = {res}0                                     {txt}degrees of freedom = {res}     812

    {txt}Ha: mean < {res}0                 {txt}Ha: mean != {res}0                 {txt}Ha: mean > {res}0
 {txt}Pr(T < t) = {res}1.0000         {txt}Pr(|T| > |t|) = {res}0.0000          {txt}Pr(T > t) = {res}0.0000
{txt}
{com}. ttest kg_plantfert_diff = 0

{txt}One-sample t test
{hline 9}{c TT}{hline 68}
Variable{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
kg_pl~ff {c |}{res}{col 12}    801{col 22} 5.152996{col 34} .2192189{col 46} 6.204321{col 58} 4.722684{col 70} 5.583308
{txt}{hline 9}{c BT}{hline 68}
    mean = mean({res}kg_plantfert_diff{txt})                                t = {res} 23.5062
{txt}Ho: mean = {res}0                                     {txt}degrees of freedom = {res}     800

    {txt}Ha: mean < {res}0                 {txt}Ha: mean != {res}0                 {txt}Ha: mean > {res}0
 {txt}Pr(T < t) = {res}1.0000         {txt}Pr(|T| > |t|) = {res}0.0000          {txt}Pr(T > t) = {res}0.0000
{txt}
{com}. ttest packets_hyb_diff  = 0

{txt}One-sample t test
{hline 9}{c TT}{hline 68}
Variable{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
packe~ff {c |}{res}{col 12}    812{col 22} .0559975{col 34} .0137451{col 46} .3916762{col 58} .0290173{col 70} .0829778
{txt}{hline 9}{c BT}{hline 68}
    mean = mean({res}packets_hyb_diff{txt})                                 t = {res}  4.0740
{txt}Ho: mean = {res}0                                     {txt}degrees of freedom = {res}     811

    {txt}Ha: mean < {res}0                 {txt}Ha: mean != {res}0                 {txt}Ha: mean > {res}0
 {txt}Pr(T < t) = {res}1.0000         {txt}Pr(|T| > |t|) = {res}0.0001          {txt}Pr(T > t) = {res}0.0000
{txt}
{com}. 
. // Constructing mean-difference table (similar to what you've done for Econ104)
. use "farming.dta", clear
{txt}
{com}. keep respondent_id kg_tdfert_unmarked kg_plantfert_unmarked packets_hyb_unmarked kg_tdfert_blue kg_plantfert_blue packets_hyb_blue 
{txt}
{com}. reshape long kg_tdfert kg_plantfert packets_hyb, i(respondent_id) j(plot,string)
{txt}(note: j = _blue _unmarked)

Data{col 36}wide{col 43}->{col 48}long
{hline 77}
Number of obs.                 {res}    1248   {txt}->{res}    2496
{txt}Number of variables            {res}       7   {txt}->{res}       5
{txt}j variable (2 values)                     ->   {res}plot
{txt}xij variables:
      {res}kg_tdfert_blue kg_tdfert_unmarked   {txt}->   {res}kg_tdfert
kg_plantfert_blue kg_plantfert_unmarked   {txt}->   {res}kg_plantfert
  packets_hyb_blue packets_hyb_unmarked   {txt}->   {res}packets_hyb
{txt}{hline 77}

{com}. 
. est clear
{txt}
{com}. eststo unmarked:        estpost summarize       kg_tdfert kg_plantfert packets_hyb if plot=="_unmarked"

{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(sum_w)}{space 1}{space 1}{ralign 9:e(mean)}{space 1}{space 1}{ralign 9:e(Var)}{space 1}{space 1}{ralign 9:e(sd)}{space 1}{space 1}{ralign 9:e(min)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      820}}}{space 1}{space 1}{ralign 9:{res:{sf:      820}}}{space 1}{space 1}{ralign 9:{res:{sf:  8.09878}}}{space 1}{space 1}{ralign 9:{res:{sf: 50.45543}}}{space 1}{space 1}{ralign 9:{res:{sf: 7.103199}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      806}}}{space 1}{space 1}{ralign 9:{res:{sf:      806}}}{space 1}{space 1}{ralign 9:{res:{sf: 6.143238}}}{space 1}{space 1}{ralign 9:{res:{sf: 40.22108}}}{space 1}{space 1}{ralign 9:{res:{sf: 6.342009}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      812}}}{space 1}{space 1}{ralign 9:{res:{sf:      812}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.314483}}}{space 1}{space 1}{ralign 9:{res:{sf: .3372371}}}{space 1}{space 1}{ralign 9:{res:{sf: .5807212}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(max)}{space 1}{space 1}{ralign 9:e(sum)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       75}}}{space 1}{space 1}{ralign 9:{res:{sf:     6641}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       25}}}{space 1}{space 1}{ralign 9:{res:{sf:  4951.45}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       10}}}{space 1}{space 1}{ralign 9:{res:{sf:  1067.36}}}{space 1}

{com}. eststo blue:            estpost summarize       kg_tdfert kg_plantfert packets_hyb if plot=="_blue"

{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(sum_w)}{space 1}{space 1}{ralign 9:e(mean)}{space 1}{space 1}{ralign 9:e(Var)}{space 1}{space 1}{ralign 9:e(sd)}{space 1}{space 1}{ralign 9:e(min)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      822}}}{space 1}{space 1}{ralign 9:{res:{sf:      822}}}{space 1}{space 1}{ralign 9:{res:{sf:  12.3455}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.894493}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.376406}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      811}}}{space 1}{space 1}{ralign 9:{res:{sf:      811}}}{space 1}{space 1}{ralign 9:{res:{sf: 11.31751}}}{space 1}{space 1}{ralign 9:{res:{sf: 11.49117}}}{space 1}{space 1}{ralign 9:{res:{sf: 3.389863}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      816}}}{space 1}{space 1}{ralign 9:{res:{sf:      816}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.370196}}}{space 1}{space 1}{ralign 9:{res:{sf: .2174247}}}{space 1}{space 1}{ralign 9:{res:{sf: .4662883}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(max)}{space 1}{space 1}{ralign 9:e(sum)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       25}}}{space 1}{space 1}{ralign 9:{res:{sf:    10148}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       25}}}{space 1}{space 1}{ralign 9:{res:{sf:   9178.5}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       10}}}{space 1}{space 1}{ralign 9:{res:{sf:  1118.08}}}{space 1}

{com}. eststo difference:      estpost ttest           kg_tdfert kg_plantfert packets_hyb, by(plot)

{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(b)}{space 1}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(se)}{space 1}{space 1}{ralign 9:e(t)}{space 1}{space 1}{ralign 9:e(df_t)}{space 1}{space 1}{ralign 9:e(p_l)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 4.246718}}}{space 1}{space 1}{ralign 9:{res:{sf:     1642}}}{space 1}{space 1}{ralign 9:{res:{sf: .2523719}}}{space 1}{space 1}{ralign 9:{res:{sf: 16.82722}}}{space 1}{space 1}{ralign 9:{res:{sf:     1640}}}{space 1}{space 1}{ralign 9:{res:{sf:        1}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 5.174271}}}{space 1}{space 1}{ralign 9:{res:{sf:     1617}}}{space 1}{space 1}{ralign 9:{res:{sf: .2526882}}}{space 1}{space 1}{ralign 9:{res:{sf:  20.4769}}}{space 1}{space 1}{ralign 9:{res:{sf:     1615}}}{space 1}{space 1}{ralign 9:{res:{sf:        1}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .0557133}}}{space 1}{space 1}{ralign 9:{res:{sf:     1628}}}{space 1}{space 1}{ralign 9:{res:{sf: .0260968}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.134869}}}{space 1}{space 1}{ralign 9:{res:{sf:     1626}}}{space 1}{space 1}{ralign 9:{res:{sf: .9835396}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(p)}{space 1}{space 1}{ralign 9:e(p_u)}{space 1}{space 1}{ralign 9:e(N_1)}{space 1}{space 1}{ralign 9:e(mu_1)}{space 1}{space 1}{ralign 9:e(N_2)}{space 1}{space 1}{ralign 9:e(mu_2)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 9.75e-59}}}{space 1}{space 1}{ralign 9:{res:{sf: 4.88e-59}}}{space 1}{space 1}{ralign 9:{res:{sf:      822}}}{space 1}{space 1}{ralign 9:{res:{sf:  12.3455}}}{space 1}{space 1}{ralign 9:{res:{sf:      820}}}{space 1}{space 1}{ralign 9:{res:{sf:  8.09878}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 4.94e-83}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.47e-83}}}{space 1}{space 1}{ralign 9:{res:{sf:      811}}}{space 1}{space 1}{ralign 9:{res:{sf: 11.31751}}}{space 1}{space 1}{ralign 9:{res:{sf:      806}}}{space 1}{space 1}{ralign 9:{res:{sf: 6.143238}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .0329209}}}{space 1}{space 1}{ralign 9:{res:{sf: .0164604}}}{space 1}{space 1}{ralign 9:{res:{sf:      816}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.370196}}}{space 1}{space 1}{ralign 9:{res:{sf:      812}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.314483}}}{space 1}

{com}. 
. esttab unmarked blue difference using "Section3_table1_raw.csv", replace cells("mean(pattern(1 1 0) fmt(%9.2f)) b(pattern(0 0 1) fmt(%9.2f) star)" "sd(pattern(1 1 0) fmt(%9.2f) par)" "p(pattern(0 0 1) fmt(%9.2f) par)") starlevels(* 0.10 ** 0.05 *** 0.01) nonumber nomtitle noobs plain 
{res}{txt}(output written to {browse  `"Section3_table1_raw.csv"'})

{com}. 
. 
. sss
{err}command {bf}sss{sf} is unrecognized
{txt}{search r(199):r(199);}

end of do-file

{search r(199):r(199);}

{com}. do "/Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3/Econ120_F20_Section3.do"
{txt}
{com}. * ---------------------------- *
. * Econ120 (J. Robinson, F2020) *
. * Section 3 (Oct. 19, 2020)        * NOTE: all the path directories are based on my own computer, 
. * TA: David Sungho Park        *       so you should change them according to yours.
. * ---------------------------- *
. 
. clear all
{txt}
{com}. set more off
{txt}
{com}. 
. cap noisily cd "/Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3/" // Note: I changed this from previous do-files for Sections 1 & 2
{res}/Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3
{txt}
{com}. 
. //log using "Econ120_F20_Section3.smcl", replace // you can uncomment this line if you want to keep a Stata log file
. 
. use "farming.dta", clear
{txt}
{com}. 
. // Getting sumstats 
. su kg_tdfert_unmarked kg_plantfert_unmarked packets_hyb_unmarked

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
kg_tdfert_~d {c |}{res}        820     8.09878    7.103199          0         75
{txt}kg_plantfe~d {c |}{res}        806    6.143238    6.342009          0         25
{txt}packets_hy~d {c |}{res}        812    1.314483    .5807212          0         10
{txt}
{com}. su kg_tdfert_blue kg_plantfert_blue packets_hyb_blue

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
kg_tdfert_~e {c |}{res}        822     12.3455    1.376406          0         25
{txt}kg_plantfe~e {c |}{res}        811    11.31751    3.389863          0         25
{txt}packets_hy~e {c |}{res}        816    1.370196    .4662883          0         10
{txt}
{com}. 
. // Testing for mean differences
. gen kg_tdfert_diff              = kg_tdfert_blue        - kg_tdfert_unmarked
{txt}(435 missing values generated)

{com}. gen kg_plantfert_diff   = kg_plantfert_blue - kg_plantfert_unmarked
{txt}(447 missing values generated)

{com}. gen packets_hyb_diff    = packets_hyb_blue      - packets_hyb_unmarked
{txt}(436 missing values generated)

{com}. 
. ttest kg_tdfert_diff    = 0

{txt}One-sample t test
{hline 9}{c TT}{hline 68}
Variable{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
kg_td~ff {c |}{res}{col 12}    813{col 22} 4.195572{col 34} .2448409{col 46} 6.981185{col 58} 3.714976{col 70} 4.676168
{txt}{hline 9}{c BT}{hline 68}
    mean = mean({res}kg_tdfert_diff{txt})                                   t = {res} 17.1359
{txt}Ho: mean = {res}0                                     {txt}degrees of freedom = {res}     812

    {txt}Ha: mean < {res}0                 {txt}Ha: mean != {res}0                 {txt}Ha: mean > {res}0
 {txt}Pr(T < t) = {res}1.0000         {txt}Pr(|T| > |t|) = {res}0.0000          {txt}Pr(T > t) = {res}0.0000
{txt}
{com}. ttest kg_plantfert_diff = 0

{txt}One-sample t test
{hline 9}{c TT}{hline 68}
Variable{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
kg_pl~ff {c |}{res}{col 12}    801{col 22} 5.152996{col 34} .2192189{col 46} 6.204321{col 58} 4.722684{col 70} 5.583308
{txt}{hline 9}{c BT}{hline 68}
    mean = mean({res}kg_plantfert_diff{txt})                                t = {res} 23.5062
{txt}Ho: mean = {res}0                                     {txt}degrees of freedom = {res}     800

    {txt}Ha: mean < {res}0                 {txt}Ha: mean != {res}0                 {txt}Ha: mean > {res}0
 {txt}Pr(T < t) = {res}1.0000         {txt}Pr(|T| > |t|) = {res}0.0000          {txt}Pr(T > t) = {res}0.0000
{txt}
{com}. ttest packets_hyb_diff  = 0

{txt}One-sample t test
{hline 9}{c TT}{hline 68}
Variable{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
packe~ff {c |}{res}{col 12}    812{col 22} .0559975{col 34} .0137451{col 46} .3916762{col 58} .0290173{col 70} .0829778
{txt}{hline 9}{c BT}{hline 68}
    mean = mean({res}packets_hyb_diff{txt})                                 t = {res}  4.0740
{txt}Ho: mean = {res}0                                     {txt}degrees of freedom = {res}     811

    {txt}Ha: mean < {res}0                 {txt}Ha: mean != {res}0                 {txt}Ha: mean > {res}0
 {txt}Pr(T < t) = {res}1.0000         {txt}Pr(|T| > |t|) = {res}0.0001          {txt}Pr(T > t) = {res}0.0000
{txt}
{com}. 
. // Constructing mean-difference table (similar to what you've done for Econ104)
. use "farming.dta", clear
{txt}
{com}. keep respondent_id kg_tdfert_unmarked kg_plantfert_unmarked packets_hyb_unmarked kg_tdfert_blue kg_plantfert_blue packets_hyb_blue 
{txt}
{com}. reshape long kg_tdfert kg_plantfert packets_hyb, i(respondent_id) j(plot,string)
{txt}(note: j = _blue _unmarked)

Data{col 36}wide{col 43}->{col 48}long
{hline 77}
Number of obs.                 {res}    1248   {txt}->{res}    2496
{txt}Number of variables            {res}       7   {txt}->{res}       5
{txt}j variable (2 values)                     ->   {res}plot
{txt}xij variables:
      {res}kg_tdfert_blue kg_tdfert_unmarked   {txt}->   {res}kg_tdfert
kg_plantfert_blue kg_plantfert_unmarked   {txt}->   {res}kg_plantfert
  packets_hyb_blue packets_hyb_unmarked   {txt}->   {res}packets_hyb
{txt}{hline 77}

{com}. 
. est clear
{txt}
{com}. eststo unmarked:        estpost summarize       kg_tdfert kg_plantfert packets_hyb if plot=="_unmarked"

{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(sum_w)}{space 1}{space 1}{ralign 9:e(mean)}{space 1}{space 1}{ralign 9:e(Var)}{space 1}{space 1}{ralign 9:e(sd)}{space 1}{space 1}{ralign 9:e(min)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      820}}}{space 1}{space 1}{ralign 9:{res:{sf:      820}}}{space 1}{space 1}{ralign 9:{res:{sf:  8.09878}}}{space 1}{space 1}{ralign 9:{res:{sf: 50.45543}}}{space 1}{space 1}{ralign 9:{res:{sf: 7.103199}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      806}}}{space 1}{space 1}{ralign 9:{res:{sf:      806}}}{space 1}{space 1}{ralign 9:{res:{sf: 6.143238}}}{space 1}{space 1}{ralign 9:{res:{sf: 40.22108}}}{space 1}{space 1}{ralign 9:{res:{sf: 6.342009}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      812}}}{space 1}{space 1}{ralign 9:{res:{sf:      812}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.314483}}}{space 1}{space 1}{ralign 9:{res:{sf: .3372371}}}{space 1}{space 1}{ralign 9:{res:{sf: .5807212}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(max)}{space 1}{space 1}{ralign 9:e(sum)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       75}}}{space 1}{space 1}{ralign 9:{res:{sf:     6641}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       25}}}{space 1}{space 1}{ralign 9:{res:{sf:  4951.45}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       10}}}{space 1}{space 1}{ralign 9:{res:{sf:  1067.36}}}{space 1}

{com}. eststo blue:            estpost summarize       kg_tdfert kg_plantfert packets_hyb if plot=="_blue"

{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(sum_w)}{space 1}{space 1}{ralign 9:e(mean)}{space 1}{space 1}{ralign 9:e(Var)}{space 1}{space 1}{ralign 9:e(sd)}{space 1}{space 1}{ralign 9:e(min)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      822}}}{space 1}{space 1}{ralign 9:{res:{sf:      822}}}{space 1}{space 1}{ralign 9:{res:{sf:  12.3455}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.894493}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.376406}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      811}}}{space 1}{space 1}{ralign 9:{res:{sf:      811}}}{space 1}{space 1}{ralign 9:{res:{sf: 11.31751}}}{space 1}{space 1}{ralign 9:{res:{sf: 11.49117}}}{space 1}{space 1}{ralign 9:{res:{sf: 3.389863}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      816}}}{space 1}{space 1}{ralign 9:{res:{sf:      816}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.370196}}}{space 1}{space 1}{ralign 9:{res:{sf: .2174247}}}{space 1}{space 1}{ralign 9:{res:{sf: .4662883}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(max)}{space 1}{space 1}{ralign 9:e(sum)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       25}}}{space 1}{space 1}{ralign 9:{res:{sf:    10148}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       25}}}{space 1}{space 1}{ralign 9:{res:{sf:   9178.5}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       10}}}{space 1}{space 1}{ralign 9:{res:{sf:  1118.08}}}{space 1}

{com}. eststo difference:      estpost ttest           kg_tdfert kg_plantfert packets_hyb, by(plot) unequal

{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(b)}{space 1}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(se)}{space 1}{space 1}{ralign 9:e(t)}{space 1}{space 1}{ralign 9:e(df_t)}{space 1}{space 1}{ralign 9:e(p_l)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 4.246718}}}{space 1}{space 1}{ralign 9:{res:{sf:     1642}}}{space 1}{space 1}{ralign 9:{res:{sf: .2526574}}}{space 1}{space 1}{ralign 9:{res:{sf: 16.80821}}}{space 1}{space 1}{ralign 9:{res:{sf: 880.2708}}}{space 1}{space 1}{ralign 9:{res:{sf:        1}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 5.174271}}}{space 1}{space 1}{ralign 9:{res:{sf:     1617}}}{space 1}{space 1}{ralign 9:{res:{sf: .2531229}}}{space 1}{space 1}{ralign 9:{res:{sf: 20.44173}}}{space 1}{space 1}{ralign 9:{res:{sf: 1228.602}}}{space 1}{space 1}{ralign 9:{res:{sf:        1}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .0557133}}}{space 1}{space 1}{ralign 9:{res:{sf:     1628}}}{space 1}{space 1}{ralign 9:{res:{sf: .0261107}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.133735}}}{space 1}{space 1}{ralign 9:{res:{sf: 1550.406}}}{space 1}{space 1}{ralign 9:{res:{sf: .9834895}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(p)}{space 1}{space 1}{ralign 9:e(p_u)}{space 1}{space 1}{ralign 9:e(N_1)}{space 1}{space 1}{ralign 9:e(mu_1)}{space 1}{space 1}{ralign 9:e(N_2)}{space 1}{space 1}{ralign 9:e(mu_2)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 3.39e-55}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.69e-55}}}{space 1}{space 1}{ralign 9:{res:{sf:      822}}}{space 1}{space 1}{ralign 9:{res:{sf:  12.3455}}}{space 1}{space 1}{ralign 9:{res:{sf:      820}}}{space 1}{space 1}{ralign 9:{res:{sf:  8.09878}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 3.55e-80}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.78e-80}}}{space 1}{space 1}{ralign 9:{res:{sf:      811}}}{space 1}{space 1}{ralign 9:{res:{sf: 11.31751}}}{space 1}{space 1}{ralign 9:{res:{sf:      806}}}{space 1}{space 1}{ralign 9:{res:{sf: 6.143238}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf:  .033021}}}{space 1}{space 1}{ralign 9:{res:{sf: .0165105}}}{space 1}{space 1}{ralign 9:{res:{sf:      816}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.370196}}}{space 1}{space 1}{ralign 9:{res:{sf:      812}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.314483}}}{space 1}

{com}. 
. esttab unmarked blue difference using "Section3_table1_raw.csv", replace cells("mean(pattern(1 1 0) fmt(%9.2f)) b(pattern(0 0 1) fmt(%9.2f) star)" "sd(pattern(1 1 0) fmt(%9.2f) par)" "p(pattern(0 0 1) fmt(%9.2f) par)") starlevels(* 0.10 ** 0.05 *** 0.01) nonumber nomtitle noobs plain 
{res}{txt}(output written to {browse  `"Section3_table1_raw.csv"'})

{com}. 
. 
. sss
{err}command {bf}sss{sf} is unrecognized
{txt}{search r(199):r(199);}

end of do-file

{search r(199):r(199);}

{com}. do "/Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3/Econ120_F20_Section3.do"
{txt}
{com}. * ---------------------------- *
. * Econ120 (J. Robinson, F2020) *
. * Section 3 (Oct. 19, 2020)        * NOTE: all the path directories are based on my own computer, 
. * TA: David Sungho Park        *       so you should change them according to yours.
. * ---------------------------- *
. 
. clear all
{txt}
{com}. set more off
{txt}
{com}. 
. cap noisily cd "/Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3/" // Note: I changed this from previous do-files for Sections 1 & 2
{res}/Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3
{txt}
{com}. 
. //log using "Econ120_F20_Section3.smcl", replace // you can uncomment this line if you want to keep a Stata log file
. 
. use "farming.dta", clear
{txt}
{com}. 
. // Getting sumstats 
. su kg_tdfert_unmarked kg_plantfert_unmarked packets_hyb_unmarked

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
kg_tdfert_~d {c |}{res}        820     8.09878    7.103199          0         75
{txt}kg_plantfe~d {c |}{res}        806    6.143238    6.342009          0         25
{txt}packets_hy~d {c |}{res}        812    1.314483    .5807212          0         10
{txt}
{com}. su kg_tdfert_blue kg_plantfert_blue packets_hyb_blue

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
kg_tdfert_~e {c |}{res}        822     12.3455    1.376406          0         25
{txt}kg_plantfe~e {c |}{res}        811    11.31751    3.389863          0         25
{txt}packets_hy~e {c |}{res}        816    1.370196    .4662883          0         10
{txt}
{com}. 
. // Testing for mean differences
. gen kg_tdfert_diff              = kg_tdfert_blue        - kg_tdfert_unmarked
{txt}(435 missing values generated)

{com}. gen kg_plantfert_diff   = kg_plantfert_blue - kg_plantfert_unmarked
{txt}(447 missing values generated)

{com}. gen packets_hyb_diff    = packets_hyb_blue      - packets_hyb_unmarked
{txt}(436 missing values generated)

{com}. 
. ttest kg_tdfert_diff    = 0

{txt}One-sample t test
{hline 9}{c TT}{hline 68}
Variable{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
kg_td~ff {c |}{res}{col 12}    813{col 22} 4.195572{col 34} .2448409{col 46} 6.981185{col 58} 3.714976{col 70} 4.676168
{txt}{hline 9}{c BT}{hline 68}
    mean = mean({res}kg_tdfert_diff{txt})                                   t = {res} 17.1359
{txt}Ho: mean = {res}0                                     {txt}degrees of freedom = {res}     812

    {txt}Ha: mean < {res}0                 {txt}Ha: mean != {res}0                 {txt}Ha: mean > {res}0
 {txt}Pr(T < t) = {res}1.0000         {txt}Pr(|T| > |t|) = {res}0.0000          {txt}Pr(T > t) = {res}0.0000
{txt}
{com}. ttest kg_plantfert_diff = 0

{txt}One-sample t test
{hline 9}{c TT}{hline 68}
Variable{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
kg_pl~ff {c |}{res}{col 12}    801{col 22} 5.152996{col 34} .2192189{col 46} 6.204321{col 58} 4.722684{col 70} 5.583308
{txt}{hline 9}{c BT}{hline 68}
    mean = mean({res}kg_plantfert_diff{txt})                                t = {res} 23.5062
{txt}Ho: mean = {res}0                                     {txt}degrees of freedom = {res}     800

    {txt}Ha: mean < {res}0                 {txt}Ha: mean != {res}0                 {txt}Ha: mean > {res}0
 {txt}Pr(T < t) = {res}1.0000         {txt}Pr(|T| > |t|) = {res}0.0000          {txt}Pr(T > t) = {res}0.0000
{txt}
{com}. ttest packets_hyb_diff  = 0

{txt}One-sample t test
{hline 9}{c TT}{hline 68}
Variable{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
packe~ff {c |}{res}{col 12}    812{col 22} .0559975{col 34} .0137451{col 46} .3916762{col 58} .0290173{col 70} .0829778
{txt}{hline 9}{c BT}{hline 68}
    mean = mean({res}packets_hyb_diff{txt})                                 t = {res}  4.0740
{txt}Ho: mean = {res}0                                     {txt}degrees of freedom = {res}     811

    {txt}Ha: mean < {res}0                 {txt}Ha: mean != {res}0                 {txt}Ha: mean > {res}0
 {txt}Pr(T < t) = {res}1.0000         {txt}Pr(|T| > |t|) = {res}0.0001          {txt}Pr(T > t) = {res}0.0000
{txt}
{com}. 
. // Constructing mean-difference table (similar to what you've done for Econ104)
. use "farming.dta", clear
{txt}
{com}. keep respondent_id kg_tdfert_unmarked kg_plantfert_unmarked packets_hyb_unmarked kg_tdfert_blue kg_plantfert_blue packets_hyb_blue 
{txt}
{com}. reshape long kg_tdfert kg_plantfert packets_hyb, i(respondent_id) j(plot,string)
{txt}(note: j = _blue _unmarked)

Data{col 36}wide{col 43}->{col 48}long
{hline 77}
Number of obs.                 {res}    1248   {txt}->{res}    2496
{txt}Number of variables            {res}       7   {txt}->{res}       5
{txt}j variable (2 values)                     ->   {res}plot
{txt}xij variables:
      {res}kg_tdfert_blue kg_tdfert_unmarked   {txt}->   {res}kg_tdfert
kg_plantfert_blue kg_plantfert_unmarked   {txt}->   {res}kg_plantfert
  packets_hyb_blue packets_hyb_unmarked   {txt}->   {res}packets_hyb
{txt}{hline 77}

{com}. 
. est clear
{txt}
{com}. eststo unmarked:        estpost summarize       kg_tdfert kg_plantfert packets_hyb if plot=="_unmarked"

{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(sum_w)}{space 1}{space 1}{ralign 9:e(mean)}{space 1}{space 1}{ralign 9:e(Var)}{space 1}{space 1}{ralign 9:e(sd)}{space 1}{space 1}{ralign 9:e(min)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      820}}}{space 1}{space 1}{ralign 9:{res:{sf:      820}}}{space 1}{space 1}{ralign 9:{res:{sf:  8.09878}}}{space 1}{space 1}{ralign 9:{res:{sf: 50.45543}}}{space 1}{space 1}{ralign 9:{res:{sf: 7.103199}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      806}}}{space 1}{space 1}{ralign 9:{res:{sf:      806}}}{space 1}{space 1}{ralign 9:{res:{sf: 6.143238}}}{space 1}{space 1}{ralign 9:{res:{sf: 40.22108}}}{space 1}{space 1}{ralign 9:{res:{sf: 6.342009}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      812}}}{space 1}{space 1}{ralign 9:{res:{sf:      812}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.314483}}}{space 1}{space 1}{ralign 9:{res:{sf: .3372371}}}{space 1}{space 1}{ralign 9:{res:{sf: .5807212}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(max)}{space 1}{space 1}{ralign 9:e(sum)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       75}}}{space 1}{space 1}{ralign 9:{res:{sf:     6641}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       25}}}{space 1}{space 1}{ralign 9:{res:{sf:  4951.45}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       10}}}{space 1}{space 1}{ralign 9:{res:{sf:  1067.36}}}{space 1}

{com}. eststo blue:            estpost summarize       kg_tdfert kg_plantfert packets_hyb if plot=="_blue"

{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(sum_w)}{space 1}{space 1}{ralign 9:e(mean)}{space 1}{space 1}{ralign 9:e(Var)}{space 1}{space 1}{ralign 9:e(sd)}{space 1}{space 1}{ralign 9:e(min)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      822}}}{space 1}{space 1}{ralign 9:{res:{sf:      822}}}{space 1}{space 1}{ralign 9:{res:{sf:  12.3455}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.894493}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.376406}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      811}}}{space 1}{space 1}{ralign 9:{res:{sf:      811}}}{space 1}{space 1}{ralign 9:{res:{sf: 11.31751}}}{space 1}{space 1}{ralign 9:{res:{sf: 11.49117}}}{space 1}{space 1}{ralign 9:{res:{sf: 3.389863}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      816}}}{space 1}{space 1}{ralign 9:{res:{sf:      816}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.370196}}}{space 1}{space 1}{ralign 9:{res:{sf: .2174247}}}{space 1}{space 1}{ralign 9:{res:{sf: .4662883}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(max)}{space 1}{space 1}{ralign 9:e(sum)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       25}}}{space 1}{space 1}{ralign 9:{res:{sf:    10148}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       25}}}{space 1}{space 1}{ralign 9:{res:{sf:   9178.5}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       10}}}{space 1}{space 1}{ralign 9:{res:{sf:  1118.08}}}{space 1}

{com}. eststo difference:      estpost ttest           kg_tdfert kg_plantfert packets_hyb, by(plot) unequal

{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(b)}{space 1}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(se)}{space 1}{space 1}{ralign 9:e(t)}{space 1}{space 1}{ralign 9:e(df_t)}{space 1}{space 1}{ralign 9:e(p_l)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 4.246718}}}{space 1}{space 1}{ralign 9:{res:{sf:     1642}}}{space 1}{space 1}{ralign 9:{res:{sf: .2526574}}}{space 1}{space 1}{ralign 9:{res:{sf: 16.80821}}}{space 1}{space 1}{ralign 9:{res:{sf: 880.2708}}}{space 1}{space 1}{ralign 9:{res:{sf:        1}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 5.174271}}}{space 1}{space 1}{ralign 9:{res:{sf:     1617}}}{space 1}{space 1}{ralign 9:{res:{sf: .2531229}}}{space 1}{space 1}{ralign 9:{res:{sf: 20.44173}}}{space 1}{space 1}{ralign 9:{res:{sf: 1228.602}}}{space 1}{space 1}{ralign 9:{res:{sf:        1}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .0557133}}}{space 1}{space 1}{ralign 9:{res:{sf:     1628}}}{space 1}{space 1}{ralign 9:{res:{sf: .0261107}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.133735}}}{space 1}{space 1}{ralign 9:{res:{sf: 1550.406}}}{space 1}{space 1}{ralign 9:{res:{sf: .9834895}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(p)}{space 1}{space 1}{ralign 9:e(p_u)}{space 1}{space 1}{ralign 9:e(N_1)}{space 1}{space 1}{ralign 9:e(mu_1)}{space 1}{space 1}{ralign 9:e(N_2)}{space 1}{space 1}{ralign 9:e(mu_2)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 3.39e-55}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.69e-55}}}{space 1}{space 1}{ralign 9:{res:{sf:      822}}}{space 1}{space 1}{ralign 9:{res:{sf:  12.3455}}}{space 1}{space 1}{ralign 9:{res:{sf:      820}}}{space 1}{space 1}{ralign 9:{res:{sf:  8.09878}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 3.55e-80}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.78e-80}}}{space 1}{space 1}{ralign 9:{res:{sf:      811}}}{space 1}{space 1}{ralign 9:{res:{sf: 11.31751}}}{space 1}{space 1}{ralign 9:{res:{sf:      806}}}{space 1}{space 1}{ralign 9:{res:{sf: 6.143238}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf:  .033021}}}{space 1}{space 1}{ralign 9:{res:{sf: .0165105}}}{space 1}{space 1}{ralign 9:{res:{sf:      816}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.370196}}}{space 1}{space 1}{ralign 9:{res:{sf:      812}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.314483}}}{space 1}

{com}. 
. esttab unmarked blue difference using "Section3_table1_raw.csv", replace  cells((mean(pattern(1 1 0) fmt(2)) b(pattern(0 0 1) fmt(2) star)) (sd(pattern(1 1 0) fmt(2) par) p(pattern(0 0 1) fmt(3) par))) starlevels(* 0.10 ** 0.05 *** 0.01) nonumber nomtitle noobs plain 
{res}{txt}(output written to {browse  `"Section3_table1_raw.csv"'})

{com}. 
. sss
{err}command {bf}sss{sf} is unrecognized
{txt}{search r(199):r(199);}

end of do-file

{search r(199):r(199);}

{com}. do "/Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3/Econ120_F20_Section3.do"
{txt}
{com}. * ---------------------------- *
. * Econ120 (J. Robinson, F2020) *
. * Section 3 (Oct. 19, 2020)        * NOTE: all the path directories are based on my own computer, 
. * TA: David Sungho Park        *       so you should change them according to yours.
. * ---------------------------- *
. 
. clear all
{txt}
{com}. set more off
{txt}
{com}. 
. cap noisily cd "/Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3/" // Note: I changed this from previous do-files for Sections 1 & 2
{res}/Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3
{txt}
{com}. 
. //log using "Econ120_F20_Section3.smcl", replace // you can uncomment this line if you want to keep a Stata log file
. 
. use "farming.dta", clear
{txt}
{com}. 
. // Getting sumstats 
. su kg_tdfert_unmarked kg_plantfert_unmarked packets_hyb_unmarked

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
kg_tdfert_~d {c |}{res}        820     8.09878    7.103199          0         75
{txt}kg_plantfe~d {c |}{res}        806    6.143238    6.342009          0         25
{txt}packets_hy~d {c |}{res}        812    1.314483    .5807212          0         10
{txt}
{com}. su kg_tdfert_blue kg_plantfert_blue packets_hyb_blue

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
kg_tdfert_~e {c |}{res}        822     12.3455    1.376406          0         25
{txt}kg_plantfe~e {c |}{res}        811    11.31751    3.389863          0         25
{txt}packets_hy~e {c |}{res}        816    1.370196    .4662883          0         10
{txt}
{com}. 
. // Testing for mean differences
. gen kg_tdfert_diff              = kg_tdfert_blue        - kg_tdfert_unmarked
{txt}(435 missing values generated)

{com}. gen kg_plantfert_diff   = kg_plantfert_blue - kg_plantfert_unmarked
{txt}(447 missing values generated)

{com}. gen packets_hyb_diff    = packets_hyb_blue      - packets_hyb_unmarked
{txt}(436 missing values generated)

{com}. 
. ttest kg_tdfert_diff    = 0

{txt}One-sample t test
{hline 9}{c TT}{hline 68}
Variable{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
kg_td~ff {c |}{res}{col 12}    813{col 22} 4.195572{col 34} .2448409{col 46} 6.981185{col 58} 3.714976{col 70} 4.676168
{txt}{hline 9}{c BT}{hline 68}
    mean = mean({res}kg_tdfert_diff{txt})                                   t = {res} 17.1359
{txt}Ho: mean = {res}0                                     {txt}degrees of freedom = {res}     812

    {txt}Ha: mean < {res}0                 {txt}Ha: mean != {res}0                 {txt}Ha: mean > {res}0
 {txt}Pr(T < t) = {res}1.0000         {txt}Pr(|T| > |t|) = {res}0.0000          {txt}Pr(T > t) = {res}0.0000
{txt}
{com}. ttest kg_plantfert_diff = 0

{txt}One-sample t test
{hline 9}{c TT}{hline 68}
Variable{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
kg_pl~ff {c |}{res}{col 12}    801{col 22} 5.152996{col 34} .2192189{col 46} 6.204321{col 58} 4.722684{col 70} 5.583308
{txt}{hline 9}{c BT}{hline 68}
    mean = mean({res}kg_plantfert_diff{txt})                                t = {res} 23.5062
{txt}Ho: mean = {res}0                                     {txt}degrees of freedom = {res}     800

    {txt}Ha: mean < {res}0                 {txt}Ha: mean != {res}0                 {txt}Ha: mean > {res}0
 {txt}Pr(T < t) = {res}1.0000         {txt}Pr(|T| > |t|) = {res}0.0000          {txt}Pr(T > t) = {res}0.0000
{txt}
{com}. ttest packets_hyb_diff  = 0

{txt}One-sample t test
{hline 9}{c TT}{hline 68}
Variable{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
packe~ff {c |}{res}{col 12}    812{col 22} .0559975{col 34} .0137451{col 46} .3916762{col 58} .0290173{col 70} .0829778
{txt}{hline 9}{c BT}{hline 68}
    mean = mean({res}packets_hyb_diff{txt})                                 t = {res}  4.0740
{txt}Ho: mean = {res}0                                     {txt}degrees of freedom = {res}     811

    {txt}Ha: mean < {res}0                 {txt}Ha: mean != {res}0                 {txt}Ha: mean > {res}0
 {txt}Pr(T < t) = {res}1.0000         {txt}Pr(|T| > |t|) = {res}0.0001          {txt}Pr(T > t) = {res}0.0000
{txt}
{com}. 
. // Constructing mean-difference table (similar to what you've done for Econ104)
. use "farming.dta", clear
{txt}
{com}. keep respondent_id kg_tdfert_unmarked kg_plantfert_unmarked packets_hyb_unmarked kg_tdfert_blue kg_plantfert_blue packets_hyb_blue 
{txt}
{com}. reshape long kg_tdfert kg_plantfert packets_hyb, i(respondent_id) j(plot,string)
{txt}(note: j = _blue _unmarked)

Data{col 36}wide{col 43}->{col 48}long
{hline 77}
Number of obs.                 {res}    1248   {txt}->{res}    2496
{txt}Number of variables            {res}       7   {txt}->{res}       5
{txt}j variable (2 values)                     ->   {res}plot
{txt}xij variables:
      {res}kg_tdfert_blue kg_tdfert_unmarked   {txt}->   {res}kg_tdfert
kg_plantfert_blue kg_plantfert_unmarked   {txt}->   {res}kg_plantfert
  packets_hyb_blue packets_hyb_unmarked   {txt}->   {res}packets_hyb
{txt}{hline 77}

{com}. 
. est clear
{txt}
{com}. eststo unmarked:        estpost summarize       kg_tdfert kg_plantfert packets_hyb if plot=="_unmarked"

{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(sum_w)}{space 1}{space 1}{ralign 9:e(mean)}{space 1}{space 1}{ralign 9:e(Var)}{space 1}{space 1}{ralign 9:e(sd)}{space 1}{space 1}{ralign 9:e(min)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      820}}}{space 1}{space 1}{ralign 9:{res:{sf:      820}}}{space 1}{space 1}{ralign 9:{res:{sf:  8.09878}}}{space 1}{space 1}{ralign 9:{res:{sf: 50.45543}}}{space 1}{space 1}{ralign 9:{res:{sf: 7.103199}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      806}}}{space 1}{space 1}{ralign 9:{res:{sf:      806}}}{space 1}{space 1}{ralign 9:{res:{sf: 6.143238}}}{space 1}{space 1}{ralign 9:{res:{sf: 40.22108}}}{space 1}{space 1}{ralign 9:{res:{sf: 6.342009}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      812}}}{space 1}{space 1}{ralign 9:{res:{sf:      812}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.314483}}}{space 1}{space 1}{ralign 9:{res:{sf: .3372371}}}{space 1}{space 1}{ralign 9:{res:{sf: .5807212}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(max)}{space 1}{space 1}{ralign 9:e(sum)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       75}}}{space 1}{space 1}{ralign 9:{res:{sf:     6641}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       25}}}{space 1}{space 1}{ralign 9:{res:{sf:  4951.45}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       10}}}{space 1}{space 1}{ralign 9:{res:{sf:  1067.36}}}{space 1}

{com}. eststo blue:            estpost summarize       kg_tdfert kg_plantfert packets_hyb if plot=="_blue"

{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(sum_w)}{space 1}{space 1}{ralign 9:e(mean)}{space 1}{space 1}{ralign 9:e(Var)}{space 1}{space 1}{ralign 9:e(sd)}{space 1}{space 1}{ralign 9:e(min)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      822}}}{space 1}{space 1}{ralign 9:{res:{sf:      822}}}{space 1}{space 1}{ralign 9:{res:{sf:  12.3455}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.894493}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.376406}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      811}}}{space 1}{space 1}{ralign 9:{res:{sf:      811}}}{space 1}{space 1}{ralign 9:{res:{sf: 11.31751}}}{space 1}{space 1}{ralign 9:{res:{sf: 11.49117}}}{space 1}{space 1}{ralign 9:{res:{sf: 3.389863}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      816}}}{space 1}{space 1}{ralign 9:{res:{sf:      816}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.370196}}}{space 1}{space 1}{ralign 9:{res:{sf: .2174247}}}{space 1}{space 1}{ralign 9:{res:{sf: .4662883}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(max)}{space 1}{space 1}{ralign 9:e(sum)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       25}}}{space 1}{space 1}{ralign 9:{res:{sf:    10148}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       25}}}{space 1}{space 1}{ralign 9:{res:{sf:   9178.5}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       10}}}{space 1}{space 1}{ralign 9:{res:{sf:  1118.08}}}{space 1}

{com}. eststo difference:      estpost ttest           kg_tdfert kg_plantfert packets_hyb, by(plot) unequal

{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(b)}{space 1}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(se)}{space 1}{space 1}{ralign 9:e(t)}{space 1}{space 1}{ralign 9:e(df_t)}{space 1}{space 1}{ralign 9:e(p_l)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 4.246718}}}{space 1}{space 1}{ralign 9:{res:{sf:     1642}}}{space 1}{space 1}{ralign 9:{res:{sf: .2526574}}}{space 1}{space 1}{ralign 9:{res:{sf: 16.80821}}}{space 1}{space 1}{ralign 9:{res:{sf: 880.2708}}}{space 1}{space 1}{ralign 9:{res:{sf:        1}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 5.174271}}}{space 1}{space 1}{ralign 9:{res:{sf:     1617}}}{space 1}{space 1}{ralign 9:{res:{sf: .2531229}}}{space 1}{space 1}{ralign 9:{res:{sf: 20.44173}}}{space 1}{space 1}{ralign 9:{res:{sf: 1228.602}}}{space 1}{space 1}{ralign 9:{res:{sf:        1}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .0557133}}}{space 1}{space 1}{ralign 9:{res:{sf:     1628}}}{space 1}{space 1}{ralign 9:{res:{sf: .0261107}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.133735}}}{space 1}{space 1}{ralign 9:{res:{sf: 1550.406}}}{space 1}{space 1}{ralign 9:{res:{sf: .9834895}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(p)}{space 1}{space 1}{ralign 9:e(p_u)}{space 1}{space 1}{ralign 9:e(N_1)}{space 1}{space 1}{ralign 9:e(mu_1)}{space 1}{space 1}{ralign 9:e(N_2)}{space 1}{space 1}{ralign 9:e(mu_2)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 3.39e-55}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.69e-55}}}{space 1}{space 1}{ralign 9:{res:{sf:      822}}}{space 1}{space 1}{ralign 9:{res:{sf:  12.3455}}}{space 1}{space 1}{ralign 9:{res:{sf:      820}}}{space 1}{space 1}{ralign 9:{res:{sf:  8.09878}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 3.55e-80}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.78e-80}}}{space 1}{space 1}{ralign 9:{res:{sf:      811}}}{space 1}{space 1}{ralign 9:{res:{sf: 11.31751}}}{space 1}{space 1}{ralign 9:{res:{sf:      806}}}{space 1}{space 1}{ralign 9:{res:{sf: 6.143238}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf:  .033021}}}{space 1}{space 1}{ralign 9:{res:{sf: .0165105}}}{space 1}{space 1}{ralign 9:{res:{sf:      816}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.370196}}}{space 1}{space 1}{ralign 9:{res:{sf:      812}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.314483}}}{space 1}

{com}. 
. esttab unmarked blue difference using "Section3_table1_raw.csv", replace  cells("mean(pattern(1 1 0) fmt(2)) b(pattern(0 0 1) fmt(2) star)" "sd(pattern(1 1 0) fmt(2) par) p(pattern(0 0 1) fmt(3) par)") starlevels(* 0.10 ** 0.05 *** 0.01) nonumber nomtitle noobs plain 
{res}{txt}(output written to {browse  `"Section3_table1_raw.csv"'})

{com}. 
. sss
{err}command {bf}sss{sf} is unrecognized
{txt}{search r(199):r(199);}

end of do-file

{search r(199):r(199);}

{com}. do "/Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3/Econ120_F20_Section3.do"
{txt}
{com}. * ---------------------------- *
. * Econ120 (J. Robinson, F2020) *
. * Section 3 (Oct. 19, 2020)        * NOTE: all the path directories are based on my own computer, 
. * TA: David Sungho Park        *       so you should change them according to yours.
. * ---------------------------- *
. 
. clear all
{txt}
{com}. set more off
{txt}
{com}. 
. cap noisily cd "/Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3/" // Note: I changed this from previous do-files for Sections 1 & 2
{res}/Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3
{txt}
{com}. 
. //log using "Econ120_F20_Section3.smcl", replace // you can uncomment this line if you want to keep a Stata log file
. 
. use "farming.dta", clear
{txt}
{com}. 
. // Getting sumstats 
. su kg_tdfert_unmarked kg_plantfert_unmarked packets_hyb_unmarked

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
kg_tdfert_~d {c |}{res}        820     8.09878    7.103199          0         75
{txt}kg_plantfe~d {c |}{res}        806    6.143238    6.342009          0         25
{txt}packets_hy~d {c |}{res}        812    1.314483    .5807212          0         10
{txt}
{com}. su kg_tdfert_blue kg_plantfert_blue packets_hyb_blue

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
kg_tdfert_~e {c |}{res}        822     12.3455    1.376406          0         25
{txt}kg_plantfe~e {c |}{res}        811    11.31751    3.389863          0         25
{txt}packets_hy~e {c |}{res}        816    1.370196    .4662883          0         10
{txt}
{com}. 
. // Testing for mean differences
. gen kg_tdfert_diff              = kg_tdfert_blue        - kg_tdfert_unmarked
{txt}(435 missing values generated)

{com}. gen kg_plantfert_diff   = kg_plantfert_blue - kg_plantfert_unmarked
{txt}(447 missing values generated)

{com}. gen packets_hyb_diff    = packets_hyb_blue      - packets_hyb_unmarked
{txt}(436 missing values generated)

{com}. 
. ttest kg_tdfert_diff    = 0

{txt}One-sample t test
{hline 9}{c TT}{hline 68}
Variable{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
kg_td~ff {c |}{res}{col 12}    813{col 22} 4.195572{col 34} .2448409{col 46} 6.981185{col 58} 3.714976{col 70} 4.676168
{txt}{hline 9}{c BT}{hline 68}
    mean = mean({res}kg_tdfert_diff{txt})                                   t = {res} 17.1359
{txt}Ho: mean = {res}0                                     {txt}degrees of freedom = {res}     812

    {txt}Ha: mean < {res}0                 {txt}Ha: mean != {res}0                 {txt}Ha: mean > {res}0
 {txt}Pr(T < t) = {res}1.0000         {txt}Pr(|T| > |t|) = {res}0.0000          {txt}Pr(T > t) = {res}0.0000
{txt}
{com}. ttest kg_plantfert_diff = 0

{txt}One-sample t test
{hline 9}{c TT}{hline 68}
Variable{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
kg_pl~ff {c |}{res}{col 12}    801{col 22} 5.152996{col 34} .2192189{col 46} 6.204321{col 58} 4.722684{col 70} 5.583308
{txt}{hline 9}{c BT}{hline 68}
    mean = mean({res}kg_plantfert_diff{txt})                                t = {res} 23.5062
{txt}Ho: mean = {res}0                                     {txt}degrees of freedom = {res}     800

    {txt}Ha: mean < {res}0                 {txt}Ha: mean != {res}0                 {txt}Ha: mean > {res}0
 {txt}Pr(T < t) = {res}1.0000         {txt}Pr(|T| > |t|) = {res}0.0000          {txt}Pr(T > t) = {res}0.0000
{txt}
{com}. ttest packets_hyb_diff  = 0

{txt}One-sample t test
{hline 9}{c TT}{hline 68}
Variable{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
packe~ff {c |}{res}{col 12}    812{col 22} .0559975{col 34} .0137451{col 46} .3916762{col 58} .0290173{col 70} .0829778
{txt}{hline 9}{c BT}{hline 68}
    mean = mean({res}packets_hyb_diff{txt})                                 t = {res}  4.0740
{txt}Ho: mean = {res}0                                     {txt}degrees of freedom = {res}     811

    {txt}Ha: mean < {res}0                 {txt}Ha: mean != {res}0                 {txt}Ha: mean > {res}0
 {txt}Pr(T < t) = {res}1.0000         {txt}Pr(|T| > |t|) = {res}0.0001          {txt}Pr(T > t) = {res}0.0000
{txt}
{com}. 
. // Constructing mean-difference table (similar to what you've done for Econ104)
. use "farming.dta", clear
{txt}
{com}. keep respondent_id kg_tdfert_unmarked kg_plantfert_unmarked packets_hyb_unmarked kg_tdfert_blue kg_plantfert_blue packets_hyb_blue 
{txt}
{com}. reshape long kg_tdfert kg_plantfert packets_hyb, i(respondent_id) j(plot,string)
{txt}(note: j = _blue _unmarked)

Data{col 36}wide{col 43}->{col 48}long
{hline 77}
Number of obs.                 {res}    1248   {txt}->{res}    2496
{txt}Number of variables            {res}       7   {txt}->{res}       5
{txt}j variable (2 values)                     ->   {res}plot
{txt}xij variables:
      {res}kg_tdfert_blue kg_tdfert_unmarked   {txt}->   {res}kg_tdfert
kg_plantfert_blue kg_plantfert_unmarked   {txt}->   {res}kg_plantfert
  packets_hyb_blue packets_hyb_unmarked   {txt}->   {res}packets_hyb
{txt}{hline 77}

{com}. 
. est clear
{txt}
{com}. eststo unmarked:        estpost summarize       kg_tdfert kg_plantfert packets_hyb if plot=="_unmarked"

{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(sum_w)}{space 1}{space 1}{ralign 9:e(mean)}{space 1}{space 1}{ralign 9:e(Var)}{space 1}{space 1}{ralign 9:e(sd)}{space 1}{space 1}{ralign 9:e(min)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      820}}}{space 1}{space 1}{ralign 9:{res:{sf:      820}}}{space 1}{space 1}{ralign 9:{res:{sf:  8.09878}}}{space 1}{space 1}{ralign 9:{res:{sf: 50.45543}}}{space 1}{space 1}{ralign 9:{res:{sf: 7.103199}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      806}}}{space 1}{space 1}{ralign 9:{res:{sf:      806}}}{space 1}{space 1}{ralign 9:{res:{sf: 6.143238}}}{space 1}{space 1}{ralign 9:{res:{sf: 40.22108}}}{space 1}{space 1}{ralign 9:{res:{sf: 6.342009}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      812}}}{space 1}{space 1}{ralign 9:{res:{sf:      812}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.314483}}}{space 1}{space 1}{ralign 9:{res:{sf: .3372371}}}{space 1}{space 1}{ralign 9:{res:{sf: .5807212}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(max)}{space 1}{space 1}{ralign 9:e(sum)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       75}}}{space 1}{space 1}{ralign 9:{res:{sf:     6641}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       25}}}{space 1}{space 1}{ralign 9:{res:{sf:  4951.45}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       10}}}{space 1}{space 1}{ralign 9:{res:{sf:  1067.36}}}{space 1}

{com}. eststo blue:            estpost summarize       kg_tdfert kg_plantfert packets_hyb if plot=="_blue"

{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(sum_w)}{space 1}{space 1}{ralign 9:e(mean)}{space 1}{space 1}{ralign 9:e(Var)}{space 1}{space 1}{ralign 9:e(sd)}{space 1}{space 1}{ralign 9:e(min)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      822}}}{space 1}{space 1}{ralign 9:{res:{sf:      822}}}{space 1}{space 1}{ralign 9:{res:{sf:  12.3455}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.894493}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.376406}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      811}}}{space 1}{space 1}{ralign 9:{res:{sf:      811}}}{space 1}{space 1}{ralign 9:{res:{sf: 11.31751}}}{space 1}{space 1}{ralign 9:{res:{sf: 11.49117}}}{space 1}{space 1}{ralign 9:{res:{sf: 3.389863}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      816}}}{space 1}{space 1}{ralign 9:{res:{sf:      816}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.370196}}}{space 1}{space 1}{ralign 9:{res:{sf: .2174247}}}{space 1}{space 1}{ralign 9:{res:{sf: .4662883}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(max)}{space 1}{space 1}{ralign 9:e(sum)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       25}}}{space 1}{space 1}{ralign 9:{res:{sf:    10148}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       25}}}{space 1}{space 1}{ralign 9:{res:{sf:   9178.5}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       10}}}{space 1}{space 1}{ralign 9:{res:{sf:  1118.08}}}{space 1}

{com}. eststo difference:      estpost ttest           kg_tdfert kg_plantfert packets_hyb, by(plot) unequal

{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(b)}{space 1}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(se)}{space 1}{space 1}{ralign 9:e(t)}{space 1}{space 1}{ralign 9:e(df_t)}{space 1}{space 1}{ralign 9:e(p_l)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 4.246718}}}{space 1}{space 1}{ralign 9:{res:{sf:     1642}}}{space 1}{space 1}{ralign 9:{res:{sf: .2526574}}}{space 1}{space 1}{ralign 9:{res:{sf: 16.80821}}}{space 1}{space 1}{ralign 9:{res:{sf: 880.2708}}}{space 1}{space 1}{ralign 9:{res:{sf:        1}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 5.174271}}}{space 1}{space 1}{ralign 9:{res:{sf:     1617}}}{space 1}{space 1}{ralign 9:{res:{sf: .2531229}}}{space 1}{space 1}{ralign 9:{res:{sf: 20.44173}}}{space 1}{space 1}{ralign 9:{res:{sf: 1228.602}}}{space 1}{space 1}{ralign 9:{res:{sf:        1}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .0557133}}}{space 1}{space 1}{ralign 9:{res:{sf:     1628}}}{space 1}{space 1}{ralign 9:{res:{sf: .0261107}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.133735}}}{space 1}{space 1}{ralign 9:{res:{sf: 1550.406}}}{space 1}{space 1}{ralign 9:{res:{sf: .9834895}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(p)}{space 1}{space 1}{ralign 9:e(p_u)}{space 1}{space 1}{ralign 9:e(N_1)}{space 1}{space 1}{ralign 9:e(mu_1)}{space 1}{space 1}{ralign 9:e(N_2)}{space 1}{space 1}{ralign 9:e(mu_2)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 3.39e-55}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.69e-55}}}{space 1}{space 1}{ralign 9:{res:{sf:      822}}}{space 1}{space 1}{ralign 9:{res:{sf:  12.3455}}}{space 1}{space 1}{ralign 9:{res:{sf:      820}}}{space 1}{space 1}{ralign 9:{res:{sf:  8.09878}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 3.55e-80}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.78e-80}}}{space 1}{space 1}{ralign 9:{res:{sf:      811}}}{space 1}{space 1}{ralign 9:{res:{sf: 11.31751}}}{space 1}{space 1}{ralign 9:{res:{sf:      806}}}{space 1}{space 1}{ralign 9:{res:{sf: 6.143238}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf:  .033021}}}{space 1}{space 1}{ralign 9:{res:{sf: .0165105}}}{space 1}{space 1}{ralign 9:{res:{sf:      816}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.370196}}}{space 1}{space 1}{ralign 9:{res:{sf:      812}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.314483}}}{space 1}

{com}. 
. esttab unmarked blue difference using "Section3_table1_raw.csv", replace  cells("mean(pattern(1 1 0) fmt(%9.2f)) b(pattern(0 0 1) fmt(%9.2f) star)" "sd(pattern(1 1 0) fmt(%9.2f) par) p(pattern(0 0 1) fmt(%9.2f) par)") starlevels(* 0.10 ** 0.05 *** 0.01) nonumber nomtitle noobs plain 
{res}{txt}(output written to {browse  `"Section3_table1_raw.csv"'})

{com}. 
. sss
{err}command {bf}sss{sf} is unrecognized
{txt}{search r(199):r(199);}

end of do-file

{search r(199):r(199);}

{com}. do "/Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3/Econ120_F20_Section3.do"
{txt}
{com}. * ---------------------------- *
. * Econ120 (J. Robinson, F2020) *
. * Section 3 (Oct. 19, 2020)        * NOTE: all the path directories are based on my own computer, 
. * TA: David Sungho Park        *       so you should change them according to yours.
. * ---------------------------- *
. 
. clear all
{txt}
{com}. set more off
{txt}
{com}. 
. cap noisily cd "/Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3/" // Note: I changed this from previous do-files for Sections 1 & 2
{res}/Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3
{txt}
{com}. 
. //log using "Econ120_F20_Section3.smcl", replace // you can uncomment this line if you want to keep a Stata log file
. 
. use "farming.dta", clear
{txt}
{com}. 
. // Getting sumstats 
. su kg_tdfert_unmarked kg_plantfert_unmarked packets_hyb_unmarked

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
kg_tdfert_~d {c |}{res}        820     8.09878    7.103199          0         75
{txt}kg_plantfe~d {c |}{res}        806    6.143238    6.342009          0         25
{txt}packets_hy~d {c |}{res}        812    1.314483    .5807212          0         10
{txt}
{com}. su kg_tdfert_blue kg_plantfert_blue packets_hyb_blue

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
kg_tdfert_~e {c |}{res}        822     12.3455    1.376406          0         25
{txt}kg_plantfe~e {c |}{res}        811    11.31751    3.389863          0         25
{txt}packets_hy~e {c |}{res}        816    1.370196    .4662883          0         10
{txt}
{com}. 
. // Testing for mean differences
. gen kg_tdfert_diff              = kg_tdfert_blue        - kg_tdfert_unmarked
{txt}(435 missing values generated)

{com}. gen kg_plantfert_diff   = kg_plantfert_blue - kg_plantfert_unmarked
{txt}(447 missing values generated)

{com}. gen packets_hyb_diff    = packets_hyb_blue      - packets_hyb_unmarked
{txt}(436 missing values generated)

{com}. 
. ttest kg_tdfert_diff    = 0

{txt}One-sample t test
{hline 9}{c TT}{hline 68}
Variable{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
kg_td~ff {c |}{res}{col 12}    813{col 22} 4.195572{col 34} .2448409{col 46} 6.981185{col 58} 3.714976{col 70} 4.676168
{txt}{hline 9}{c BT}{hline 68}
    mean = mean({res}kg_tdfert_diff{txt})                                   t = {res} 17.1359
{txt}Ho: mean = {res}0                                     {txt}degrees of freedom = {res}     812

    {txt}Ha: mean < {res}0                 {txt}Ha: mean != {res}0                 {txt}Ha: mean > {res}0
 {txt}Pr(T < t) = {res}1.0000         {txt}Pr(|T| > |t|) = {res}0.0000          {txt}Pr(T > t) = {res}0.0000
{txt}
{com}. ttest kg_plantfert_diff = 0

{txt}One-sample t test
{hline 9}{c TT}{hline 68}
Variable{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
kg_pl~ff {c |}{res}{col 12}    801{col 22} 5.152996{col 34} .2192189{col 46} 6.204321{col 58} 4.722684{col 70} 5.583308
{txt}{hline 9}{c BT}{hline 68}
    mean = mean({res}kg_plantfert_diff{txt})                                t = {res} 23.5062
{txt}Ho: mean = {res}0                                     {txt}degrees of freedom = {res}     800

    {txt}Ha: mean < {res}0                 {txt}Ha: mean != {res}0                 {txt}Ha: mean > {res}0
 {txt}Pr(T < t) = {res}1.0000         {txt}Pr(|T| > |t|) = {res}0.0000          {txt}Pr(T > t) = {res}0.0000
{txt}
{com}. ttest packets_hyb_diff  = 0

{txt}One-sample t test
{hline 9}{c TT}{hline 68}
Variable{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
packe~ff {c |}{res}{col 12}    812{col 22} .0559975{col 34} .0137451{col 46} .3916762{col 58} .0290173{col 70} .0829778
{txt}{hline 9}{c BT}{hline 68}
    mean = mean({res}packets_hyb_diff{txt})                                 t = {res}  4.0740
{txt}Ho: mean = {res}0                                     {txt}degrees of freedom = {res}     811

    {txt}Ha: mean < {res}0                 {txt}Ha: mean != {res}0                 {txt}Ha: mean > {res}0
 {txt}Pr(T < t) = {res}1.0000         {txt}Pr(|T| > |t|) = {res}0.0001          {txt}Pr(T > t) = {res}0.0000
{txt}
{com}. 
. // Constructing mean-difference table (similar to what you've done for Econ104)
. use "farming.dta", clear
{txt}
{com}. keep respondent_id kg_tdfert_unmarked kg_plantfert_unmarked packets_hyb_unmarked kg_tdfert_blue kg_plantfert_blue packets_hyb_blue 
{txt}
{com}. reshape long kg_tdfert kg_plantfert packets_hyb, i(respondent_id) j(plot,string)
{txt}(note: j = _blue _unmarked)

Data{col 36}wide{col 43}->{col 48}long
{hline 77}
Number of obs.                 {res}    1248   {txt}->{res}    2496
{txt}Number of variables            {res}       7   {txt}->{res}       5
{txt}j variable (2 values)                     ->   {res}plot
{txt}xij variables:
      {res}kg_tdfert_blue kg_tdfert_unmarked   {txt}->   {res}kg_tdfert
kg_plantfert_blue kg_plantfert_unmarked   {txt}->   {res}kg_plantfert
  packets_hyb_blue packets_hyb_unmarked   {txt}->   {res}packets_hyb
{txt}{hline 77}

{com}. 
. est clear
{txt}
{com}. eststo unmarked:        estpost summarize       kg_tdfert kg_plantfert packets_hyb if plot=="_unmarked"

{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(sum_w)}{space 1}{space 1}{ralign 9:e(mean)}{space 1}{space 1}{ralign 9:e(Var)}{space 1}{space 1}{ralign 9:e(sd)}{space 1}{space 1}{ralign 9:e(min)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      820}}}{space 1}{space 1}{ralign 9:{res:{sf:      820}}}{space 1}{space 1}{ralign 9:{res:{sf:  8.09878}}}{space 1}{space 1}{ralign 9:{res:{sf: 50.45543}}}{space 1}{space 1}{ralign 9:{res:{sf: 7.103199}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      806}}}{space 1}{space 1}{ralign 9:{res:{sf:      806}}}{space 1}{space 1}{ralign 9:{res:{sf: 6.143238}}}{space 1}{space 1}{ralign 9:{res:{sf: 40.22108}}}{space 1}{space 1}{ralign 9:{res:{sf: 6.342009}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      812}}}{space 1}{space 1}{ralign 9:{res:{sf:      812}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.314483}}}{space 1}{space 1}{ralign 9:{res:{sf: .3372371}}}{space 1}{space 1}{ralign 9:{res:{sf: .5807212}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(max)}{space 1}{space 1}{ralign 9:e(sum)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       75}}}{space 1}{space 1}{ralign 9:{res:{sf:     6641}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       25}}}{space 1}{space 1}{ralign 9:{res:{sf:  4951.45}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       10}}}{space 1}{space 1}{ralign 9:{res:{sf:  1067.36}}}{space 1}

{com}. eststo blue:            estpost summarize       kg_tdfert kg_plantfert packets_hyb if plot=="_blue"

{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(sum_w)}{space 1}{space 1}{ralign 9:e(mean)}{space 1}{space 1}{ralign 9:e(Var)}{space 1}{space 1}{ralign 9:e(sd)}{space 1}{space 1}{ralign 9:e(min)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      822}}}{space 1}{space 1}{ralign 9:{res:{sf:      822}}}{space 1}{space 1}{ralign 9:{res:{sf:  12.3455}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.894493}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.376406}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      811}}}{space 1}{space 1}{ralign 9:{res:{sf:      811}}}{space 1}{space 1}{ralign 9:{res:{sf: 11.31751}}}{space 1}{space 1}{ralign 9:{res:{sf: 11.49117}}}{space 1}{space 1}{ralign 9:{res:{sf: 3.389863}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      816}}}{space 1}{space 1}{ralign 9:{res:{sf:      816}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.370196}}}{space 1}{space 1}{ralign 9:{res:{sf: .2174247}}}{space 1}{space 1}{ralign 9:{res:{sf: .4662883}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(max)}{space 1}{space 1}{ralign 9:e(sum)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       25}}}{space 1}{space 1}{ralign 9:{res:{sf:    10148}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       25}}}{space 1}{space 1}{ralign 9:{res:{sf:   9178.5}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       10}}}{space 1}{space 1}{ralign 9:{res:{sf:  1118.08}}}{space 1}

{com}. eststo difference:      estpost ttest           kg_tdfert kg_plantfert packets_hyb, by(plot) unequal

{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(b)}{space 1}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(se)}{space 1}{space 1}{ralign 9:e(t)}{space 1}{space 1}{ralign 9:e(df_t)}{space 1}{space 1}{ralign 9:e(p_l)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 4.246718}}}{space 1}{space 1}{ralign 9:{res:{sf:     1642}}}{space 1}{space 1}{ralign 9:{res:{sf: .2526574}}}{space 1}{space 1}{ralign 9:{res:{sf: 16.80821}}}{space 1}{space 1}{ralign 9:{res:{sf: 880.2708}}}{space 1}{space 1}{ralign 9:{res:{sf:        1}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 5.174271}}}{space 1}{space 1}{ralign 9:{res:{sf:     1617}}}{space 1}{space 1}{ralign 9:{res:{sf: .2531229}}}{space 1}{space 1}{ralign 9:{res:{sf: 20.44173}}}{space 1}{space 1}{ralign 9:{res:{sf: 1228.602}}}{space 1}{space 1}{ralign 9:{res:{sf:        1}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .0557133}}}{space 1}{space 1}{ralign 9:{res:{sf:     1628}}}{space 1}{space 1}{ralign 9:{res:{sf: .0261107}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.133735}}}{space 1}{space 1}{ralign 9:{res:{sf: 1550.406}}}{space 1}{space 1}{ralign 9:{res:{sf: .9834895}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(p)}{space 1}{space 1}{ralign 9:e(p_u)}{space 1}{space 1}{ralign 9:e(N_1)}{space 1}{space 1}{ralign 9:e(mu_1)}{space 1}{space 1}{ralign 9:e(N_2)}{space 1}{space 1}{ralign 9:e(mu_2)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 3.39e-55}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.69e-55}}}{space 1}{space 1}{ralign 9:{res:{sf:      822}}}{space 1}{space 1}{ralign 9:{res:{sf:  12.3455}}}{space 1}{space 1}{ralign 9:{res:{sf:      820}}}{space 1}{space 1}{ralign 9:{res:{sf:  8.09878}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 3.55e-80}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.78e-80}}}{space 1}{space 1}{ralign 9:{res:{sf:      811}}}{space 1}{space 1}{ralign 9:{res:{sf: 11.31751}}}{space 1}{space 1}{ralign 9:{res:{sf:      806}}}{space 1}{space 1}{ralign 9:{res:{sf: 6.143238}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf:  .033021}}}{space 1}{space 1}{ralign 9:{res:{sf: .0165105}}}{space 1}{space 1}{ralign 9:{res:{sf:      816}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.370196}}}{space 1}{space 1}{ralign 9:{res:{sf:      812}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.314483}}}{space 1}

{com}. 
. esttab unmarked blue difference using "Section3_table1_raw.csv", replace  cells("mean(pattern(1 1 0) fmt(%9.2f)) b(pattern(0 0 1) fmt(%9.2f) star)" "sd(pattern(1 1 0) fmt(%9.2f) par) p(pattern(0 0 1) fmt(%9.2f) par)") starlevels(* 0.10 ** 0.05 *** 0.01)  plain 
{res}{txt}(output written to {browse  `"Section3_table1_raw.csv"'})

{com}. 
. sss
{err}command {bf}sss{sf} is unrecognized
{txt}{search r(199):r(199);}

end of do-file

{search r(199):r(199);}

{com}. do "/Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3/Econ120_F20_Section3.do"
{txt}
{com}. * ---------------------------- *
. * Econ120 (J. Robinson, F2020) *
. * Section 3 (Oct. 19, 2020)        * NOTE: all the path directories are based on my own computer, 
. * TA: David Sungho Park        *       so you should change them according to yours.
. * ---------------------------- *
. 
. clear all
{txt}
{com}. set more off
{txt}
{com}. 
. cap noisily cd "/Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3/" // Note: I changed this from previous do-files for Sections 1 & 2
{res}/Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3
{txt}
{com}. 
. //log using "Econ120_F20_Section3.smcl", replace // you can uncomment this line if you want to keep a Stata log file
. 
. use "farming.dta", clear
{txt}
{com}. 
. // Getting sumstats 
. su kg_tdfert_unmarked kg_plantfert_unmarked packets_hyb_unmarked

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
kg_tdfert_~d {c |}{res}        820     8.09878    7.103199          0         75
{txt}kg_plantfe~d {c |}{res}        806    6.143238    6.342009          0         25
{txt}packets_hy~d {c |}{res}        812    1.314483    .5807212          0         10
{txt}
{com}. su kg_tdfert_blue kg_plantfert_blue packets_hyb_blue

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
kg_tdfert_~e {c |}{res}        822     12.3455    1.376406          0         25
{txt}kg_plantfe~e {c |}{res}        811    11.31751    3.389863          0         25
{txt}packets_hy~e {c |}{res}        816    1.370196    .4662883          0         10
{txt}
{com}. 
. // Testing for mean differences
. gen kg_tdfert_diff              = kg_tdfert_blue        - kg_tdfert_unmarked
{txt}(435 missing values generated)

{com}. gen kg_plantfert_diff   = kg_plantfert_blue - kg_plantfert_unmarked
{txt}(447 missing values generated)

{com}. gen packets_hyb_diff    = packets_hyb_blue      - packets_hyb_unmarked
{txt}(436 missing values generated)

{com}. 
. ttest kg_tdfert_diff    = 0

{txt}One-sample t test
{hline 9}{c TT}{hline 68}
Variable{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
kg_td~ff {c |}{res}{col 12}    813{col 22} 4.195572{col 34} .2448409{col 46} 6.981185{col 58} 3.714976{col 70} 4.676168
{txt}{hline 9}{c BT}{hline 68}
    mean = mean({res}kg_tdfert_diff{txt})                                   t = {res} 17.1359
{txt}Ho: mean = {res}0                                     {txt}degrees of freedom = {res}     812

    {txt}Ha: mean < {res}0                 {txt}Ha: mean != {res}0                 {txt}Ha: mean > {res}0
 {txt}Pr(T < t) = {res}1.0000         {txt}Pr(|T| > |t|) = {res}0.0000          {txt}Pr(T > t) = {res}0.0000
{txt}
{com}. ttest kg_plantfert_diff = 0

{txt}One-sample t test
{hline 9}{c TT}{hline 68}
Variable{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
kg_pl~ff {c |}{res}{col 12}    801{col 22} 5.152996{col 34} .2192189{col 46} 6.204321{col 58} 4.722684{col 70} 5.583308
{txt}{hline 9}{c BT}{hline 68}
    mean = mean({res}kg_plantfert_diff{txt})                                t = {res} 23.5062
{txt}Ho: mean = {res}0                                     {txt}degrees of freedom = {res}     800

    {txt}Ha: mean < {res}0                 {txt}Ha: mean != {res}0                 {txt}Ha: mean > {res}0
 {txt}Pr(T < t) = {res}1.0000         {txt}Pr(|T| > |t|) = {res}0.0000          {txt}Pr(T > t) = {res}0.0000
{txt}
{com}. ttest packets_hyb_diff  = 0

{txt}One-sample t test
{hline 9}{c TT}{hline 68}
Variable{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
packe~ff {c |}{res}{col 12}    812{col 22} .0559975{col 34} .0137451{col 46} .3916762{col 58} .0290173{col 70} .0829778
{txt}{hline 9}{c BT}{hline 68}
    mean = mean({res}packets_hyb_diff{txt})                                 t = {res}  4.0740
{txt}Ho: mean = {res}0                                     {txt}degrees of freedom = {res}     811

    {txt}Ha: mean < {res}0                 {txt}Ha: mean != {res}0                 {txt}Ha: mean > {res}0
 {txt}Pr(T < t) = {res}1.0000         {txt}Pr(|T| > |t|) = {res}0.0001          {txt}Pr(T > t) = {res}0.0000
{txt}
{com}. 
. // Constructing mean-difference table (similar to what you've done for Econ104)
. use "farming.dta", clear
{txt}
{com}. keep respondent_id kg_tdfert_unmarked kg_plantfert_unmarked packets_hyb_unmarked kg_tdfert_blue kg_plantfert_blue packets_hyb_blue 
{txt}
{com}. reshape long kg_tdfert kg_plantfert packets_hyb, i(respondent_id) j(plot,string)
{txt}(note: j = _blue _unmarked)

Data{col 36}wide{col 43}->{col 48}long
{hline 77}
Number of obs.                 {res}    1248   {txt}->{res}    2496
{txt}Number of variables            {res}       7   {txt}->{res}       5
{txt}j variable (2 values)                     ->   {res}plot
{txt}xij variables:
      {res}kg_tdfert_blue kg_tdfert_unmarked   {txt}->   {res}kg_tdfert
kg_plantfert_blue kg_plantfert_unmarked   {txt}->   {res}kg_plantfert
  packets_hyb_blue packets_hyb_unmarked   {txt}->   {res}packets_hyb
{txt}{hline 77}

{com}. 
. est clear
{txt}
{com}. eststo unmarked:        estpost summarize       kg_tdfert kg_plantfert packets_hyb if plot=="_unmarked"

{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(sum_w)}{space 1}{space 1}{ralign 9:e(mean)}{space 1}{space 1}{ralign 9:e(Var)}{space 1}{space 1}{ralign 9:e(sd)}{space 1}{space 1}{ralign 9:e(min)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      820}}}{space 1}{space 1}{ralign 9:{res:{sf:      820}}}{space 1}{space 1}{ralign 9:{res:{sf:  8.09878}}}{space 1}{space 1}{ralign 9:{res:{sf: 50.45543}}}{space 1}{space 1}{ralign 9:{res:{sf: 7.103199}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      806}}}{space 1}{space 1}{ralign 9:{res:{sf:      806}}}{space 1}{space 1}{ralign 9:{res:{sf: 6.143238}}}{space 1}{space 1}{ralign 9:{res:{sf: 40.22108}}}{space 1}{space 1}{ralign 9:{res:{sf: 6.342009}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      812}}}{space 1}{space 1}{ralign 9:{res:{sf:      812}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.314483}}}{space 1}{space 1}{ralign 9:{res:{sf: .3372371}}}{space 1}{space 1}{ralign 9:{res:{sf: .5807212}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(max)}{space 1}{space 1}{ralign 9:e(sum)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       75}}}{space 1}{space 1}{ralign 9:{res:{sf:     6641}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       25}}}{space 1}{space 1}{ralign 9:{res:{sf:  4951.45}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       10}}}{space 1}{space 1}{ralign 9:{res:{sf:  1067.36}}}{space 1}

{com}. eststo blue:            estpost summarize       kg_tdfert kg_plantfert packets_hyb if plot=="_blue"

{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(sum_w)}{space 1}{space 1}{ralign 9:e(mean)}{space 1}{space 1}{ralign 9:e(Var)}{space 1}{space 1}{ralign 9:e(sd)}{space 1}{space 1}{ralign 9:e(min)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      822}}}{space 1}{space 1}{ralign 9:{res:{sf:      822}}}{space 1}{space 1}{ralign 9:{res:{sf:  12.3455}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.894493}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.376406}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      811}}}{space 1}{space 1}{ralign 9:{res:{sf:      811}}}{space 1}{space 1}{ralign 9:{res:{sf: 11.31751}}}{space 1}{space 1}{ralign 9:{res:{sf: 11.49117}}}{space 1}{space 1}{ralign 9:{res:{sf: 3.389863}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      816}}}{space 1}{space 1}{ralign 9:{res:{sf:      816}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.370196}}}{space 1}{space 1}{ralign 9:{res:{sf: .2174247}}}{space 1}{space 1}{ralign 9:{res:{sf: .4662883}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(max)}{space 1}{space 1}{ralign 9:e(sum)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       25}}}{space 1}{space 1}{ralign 9:{res:{sf:    10148}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       25}}}{space 1}{space 1}{ralign 9:{res:{sf:   9178.5}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       10}}}{space 1}{space 1}{ralign 9:{res:{sf:  1118.08}}}{space 1}

{com}. eststo difference:      estpost ttest           kg_tdfert kg_plantfert packets_hyb, by(plot) unequal

{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(b)}{space 1}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(se)}{space 1}{space 1}{ralign 9:e(t)}{space 1}{space 1}{ralign 9:e(df_t)}{space 1}{space 1}{ralign 9:e(p_l)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 4.246718}}}{space 1}{space 1}{ralign 9:{res:{sf:     1642}}}{space 1}{space 1}{ralign 9:{res:{sf: .2526574}}}{space 1}{space 1}{ralign 9:{res:{sf: 16.80821}}}{space 1}{space 1}{ralign 9:{res:{sf: 880.2708}}}{space 1}{space 1}{ralign 9:{res:{sf:        1}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 5.174271}}}{space 1}{space 1}{ralign 9:{res:{sf:     1617}}}{space 1}{space 1}{ralign 9:{res:{sf: .2531229}}}{space 1}{space 1}{ralign 9:{res:{sf: 20.44173}}}{space 1}{space 1}{ralign 9:{res:{sf: 1228.602}}}{space 1}{space 1}{ralign 9:{res:{sf:        1}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .0557133}}}{space 1}{space 1}{ralign 9:{res:{sf:     1628}}}{space 1}{space 1}{ralign 9:{res:{sf: .0261107}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.133735}}}{space 1}{space 1}{ralign 9:{res:{sf: 1550.406}}}{space 1}{space 1}{ralign 9:{res:{sf: .9834895}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(p)}{space 1}{space 1}{ralign 9:e(p_u)}{space 1}{space 1}{ralign 9:e(N_1)}{space 1}{space 1}{ralign 9:e(mu_1)}{space 1}{space 1}{ralign 9:e(N_2)}{space 1}{space 1}{ralign 9:e(mu_2)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 3.39e-55}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.69e-55}}}{space 1}{space 1}{ralign 9:{res:{sf:      822}}}{space 1}{space 1}{ralign 9:{res:{sf:  12.3455}}}{space 1}{space 1}{ralign 9:{res:{sf:      820}}}{space 1}{space 1}{ralign 9:{res:{sf:  8.09878}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 3.55e-80}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.78e-80}}}{space 1}{space 1}{ralign 9:{res:{sf:      811}}}{space 1}{space 1}{ralign 9:{res:{sf: 11.31751}}}{space 1}{space 1}{ralign 9:{res:{sf:      806}}}{space 1}{space 1}{ralign 9:{res:{sf: 6.143238}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf:  .033021}}}{space 1}{space 1}{ralign 9:{res:{sf: .0165105}}}{space 1}{space 1}{ralign 9:{res:{sf:      816}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.370196}}}{space 1}{space 1}{ralign 9:{res:{sf:      812}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.314483}}}{space 1}

{com}. 
. esttab unmarked blue difference using "Section3_table1_raw.csv", replace  cells("mean(pattern(1 1 0) fmt(%9.2f)) b(pattern(0 0 1) fmt(%9.2f) star)" "sd(pattern(1 1 0) fmt(%9.2f) par) se(pattern(0 0 1) fmt(%9.2f) par)") starlevels(* 0.10 ** 0.05 *** 0.01)  plain 
{res}{txt}(output written to {browse  `"Section3_table1_raw.csv"'})

{com}. 
. sss
{err}command {bf}sss{sf} is unrecognized
{txt}{search r(199):r(199);}

end of do-file

{search r(199):r(199);}

{com}. do "/Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3/Econ120_F20_Section3.do"
{txt}
{com}. * ---------------------------- *
. * Econ120 (J. Robinson, F2020) *
. * Section 3 (Oct. 19, 2020)        * NOTE: all the path directories are based on my own computer, 
. * TA: David Sungho Park        *       so you should change them according to yours.
. * ---------------------------- *
. 
. clear all
{txt}
{com}. set more off
{txt}
{com}. 
. cap noisily cd "/Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3/" // Note: I changed this from previous do-files for Sections 1 & 2
{res}/Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3
{txt}
{com}. 
. //log using "Econ120_F20_Section3.smcl", replace // you can uncomment this line if you want to keep a Stata log file
. 
. use "farming.dta", clear
{txt}
{com}. 
. // Getting sumstats 
. su kg_tdfert_blue kg_plantfert_blue packets_hyb_blue

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
kg_tdfert_~e {c |}{res}        822     12.3455    1.376406          0         25
{txt}kg_plantfe~e {c |}{res}        811    11.31751    3.389863          0         25
{txt}packets_hy~e {c |}{res}        816    1.370196    .4662883          0         10
{txt}
{com}. su kg_tdfert_unmarked kg_plantfert_unmarked packets_hyb_unmarked

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
kg_tdfert_~d {c |}{res}        820     8.09878    7.103199          0         75
{txt}kg_plantfe~d {c |}{res}        806    6.143238    6.342009          0         25
{txt}packets_hy~d {c |}{res}        812    1.314483    .5807212          0         10
{txt}
{com}. 
. // Testing for mean differences
. gen kg_tdfert_diff              = kg_tdfert_blue        - kg_tdfert_unmarked
{txt}(435 missing values generated)

{com}. gen kg_plantfert_diff   = kg_plantfert_blue - kg_plantfert_unmarked
{txt}(447 missing values generated)

{com}. gen packets_hyb_diff    = packets_hyb_blue      - packets_hyb_unmarked
{txt}(436 missing values generated)

{com}. 
. ttest kg_tdfert_diff    = 0

{txt}One-sample t test
{hline 9}{c TT}{hline 68}
Variable{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
kg_td~ff {c |}{res}{col 12}    813{col 22} 4.195572{col 34} .2448409{col 46} 6.981185{col 58} 3.714976{col 70} 4.676168
{txt}{hline 9}{c BT}{hline 68}
    mean = mean({res}kg_tdfert_diff{txt})                                   t = {res} 17.1359
{txt}Ho: mean = {res}0                                     {txt}degrees of freedom = {res}     812

    {txt}Ha: mean < {res}0                 {txt}Ha: mean != {res}0                 {txt}Ha: mean > {res}0
 {txt}Pr(T < t) = {res}1.0000         {txt}Pr(|T| > |t|) = {res}0.0000          {txt}Pr(T > t) = {res}0.0000
{txt}
{com}. ttest kg_plantfert_diff = 0

{txt}One-sample t test
{hline 9}{c TT}{hline 68}
Variable{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
kg_pl~ff {c |}{res}{col 12}    801{col 22} 5.152996{col 34} .2192189{col 46} 6.204321{col 58} 4.722684{col 70} 5.583308
{txt}{hline 9}{c BT}{hline 68}
    mean = mean({res}kg_plantfert_diff{txt})                                t = {res} 23.5062
{txt}Ho: mean = {res}0                                     {txt}degrees of freedom = {res}     800

    {txt}Ha: mean < {res}0                 {txt}Ha: mean != {res}0                 {txt}Ha: mean > {res}0
 {txt}Pr(T < t) = {res}1.0000         {txt}Pr(|T| > |t|) = {res}0.0000          {txt}Pr(T > t) = {res}0.0000
{txt}
{com}. ttest packets_hyb_diff  = 0

{txt}One-sample t test
{hline 9}{c TT}{hline 68}
Variable{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
packe~ff {c |}{res}{col 12}    812{col 22} .0559975{col 34} .0137451{col 46} .3916762{col 58} .0290173{col 70} .0829778
{txt}{hline 9}{c BT}{hline 68}
    mean = mean({res}packets_hyb_diff{txt})                                 t = {res}  4.0740
{txt}Ho: mean = {res}0                                     {txt}degrees of freedom = {res}     811

    {txt}Ha: mean < {res}0                 {txt}Ha: mean != {res}0                 {txt}Ha: mean > {res}0
 {txt}Pr(T < t) = {res}1.0000         {txt}Pr(|T| > |t|) = {res}0.0001          {txt}Pr(T > t) = {res}0.0000
{txt}
{com}. 
. // Constructing mean-difference table (similar to what you've done for Econ104)
. preserve
{txt}
{com}.         // First step: we need to reshape the dataset from "wide" format to "long" format
.         keep respondent_id kg_tdfert_unmarked kg_plantfert_unmarked packets_hyb_unmarked kg_tdfert_blue kg_plantfert_blue packets_hyb_blue 
{txt}
{com}.         reshape long kg_tdfert kg_plantfert packets_hyb, i(respondent_id) j(plot,string)
{txt}(note: j = _blue _unmarked)

Data{col 36}wide{col 43}->{col 48}long
{hline 77}
Number of obs.                 {res}    1248   {txt}->{res}    2496
{txt}Number of variables            {res}       7   {txt}->{res}       5
{txt}j variable (2 values)                     ->   {res}plot
{txt}xij variables:
      {res}kg_tdfert_blue kg_tdfert_unmarked   {txt}->   {res}kg_tdfert
kg_plantfert_blue kg_plantfert_unmarked   {txt}->   {res}kg_plantfert
  packets_hyb_blue packets_hyb_unmarked   {txt}->   {res}packets_hyb
{txt}{hline 77}

{com}. 
.         // Step 2: exporting into single table (similar to what you've done for Econ104)
.         est clear 
{txt}
{com}.         eststo unmarked:        estpost summarize       kg_tdfert kg_plantfert packets_hyb if plot=="_unmarked"

{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(sum_w)}{space 1}{space 1}{ralign 9:e(mean)}{space 1}{space 1}{ralign 9:e(Var)}{space 1}{space 1}{ralign 9:e(sd)}{space 1}{space 1}{ralign 9:e(min)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      820}}}{space 1}{space 1}{ralign 9:{res:{sf:      820}}}{space 1}{space 1}{ralign 9:{res:{sf:  8.09878}}}{space 1}{space 1}{ralign 9:{res:{sf: 50.45543}}}{space 1}{space 1}{ralign 9:{res:{sf: 7.103199}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      806}}}{space 1}{space 1}{ralign 9:{res:{sf:      806}}}{space 1}{space 1}{ralign 9:{res:{sf: 6.143238}}}{space 1}{space 1}{ralign 9:{res:{sf: 40.22108}}}{space 1}{space 1}{ralign 9:{res:{sf: 6.342009}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      812}}}{space 1}{space 1}{ralign 9:{res:{sf:      812}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.314483}}}{space 1}{space 1}{ralign 9:{res:{sf: .3372371}}}{space 1}{space 1}{ralign 9:{res:{sf: .5807212}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(max)}{space 1}{space 1}{ralign 9:e(sum)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       75}}}{space 1}{space 1}{ralign 9:{res:{sf:     6641}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       25}}}{space 1}{space 1}{ralign 9:{res:{sf:  4951.45}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       10}}}{space 1}{space 1}{ralign 9:{res:{sf:  1067.36}}}{space 1}

{com}.         eststo blue:            estpost summarize       kg_tdfert kg_plantfert packets_hyb if plot=="_blue"

{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(sum_w)}{space 1}{space 1}{ralign 9:e(mean)}{space 1}{space 1}{ralign 9:e(Var)}{space 1}{space 1}{ralign 9:e(sd)}{space 1}{space 1}{ralign 9:e(min)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      822}}}{space 1}{space 1}{ralign 9:{res:{sf:      822}}}{space 1}{space 1}{ralign 9:{res:{sf:  12.3455}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.894493}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.376406}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      811}}}{space 1}{space 1}{ralign 9:{res:{sf:      811}}}{space 1}{space 1}{ralign 9:{res:{sf: 11.31751}}}{space 1}{space 1}{ralign 9:{res:{sf: 11.49117}}}{space 1}{space 1}{ralign 9:{res:{sf: 3.389863}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      816}}}{space 1}{space 1}{ralign 9:{res:{sf:      816}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.370196}}}{space 1}{space 1}{ralign 9:{res:{sf: .2174247}}}{space 1}{space 1}{ralign 9:{res:{sf: .4662883}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(max)}{space 1}{space 1}{ralign 9:e(sum)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       25}}}{space 1}{space 1}{ralign 9:{res:{sf:    10148}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       25}}}{space 1}{space 1}{ralign 9:{res:{sf:   9178.5}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       10}}}{space 1}{space 1}{ralign 9:{res:{sf:  1118.08}}}{space 1}

{com}.         eststo difference:      estpost ttest           kg_tdfert kg_plantfert packets_hyb, by(plot) unequal

{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(b)}{space 1}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(se)}{space 1}{space 1}{ralign 9:e(t)}{space 1}{space 1}{ralign 9:e(df_t)}{space 1}{space 1}{ralign 9:e(p_l)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 4.246718}}}{space 1}{space 1}{ralign 9:{res:{sf:     1642}}}{space 1}{space 1}{ralign 9:{res:{sf: .2526574}}}{space 1}{space 1}{ralign 9:{res:{sf: 16.80821}}}{space 1}{space 1}{ralign 9:{res:{sf: 880.2708}}}{space 1}{space 1}{ralign 9:{res:{sf:        1}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 5.174271}}}{space 1}{space 1}{ralign 9:{res:{sf:     1617}}}{space 1}{space 1}{ralign 9:{res:{sf: .2531229}}}{space 1}{space 1}{ralign 9:{res:{sf: 20.44173}}}{space 1}{space 1}{ralign 9:{res:{sf: 1228.602}}}{space 1}{space 1}{ralign 9:{res:{sf:        1}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .0557133}}}{space 1}{space 1}{ralign 9:{res:{sf:     1628}}}{space 1}{space 1}{ralign 9:{res:{sf: .0261107}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.133735}}}{space 1}{space 1}{ralign 9:{res:{sf: 1550.406}}}{space 1}{space 1}{ralign 9:{res:{sf: .9834895}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(p)}{space 1}{space 1}{ralign 9:e(p_u)}{space 1}{space 1}{ralign 9:e(N_1)}{space 1}{space 1}{ralign 9:e(mu_1)}{space 1}{space 1}{ralign 9:e(N_2)}{space 1}{space 1}{ralign 9:e(mu_2)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 3.39e-55}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.69e-55}}}{space 1}{space 1}{ralign 9:{res:{sf:      822}}}{space 1}{space 1}{ralign 9:{res:{sf:  12.3455}}}{space 1}{space 1}{ralign 9:{res:{sf:      820}}}{space 1}{space 1}{ralign 9:{res:{sf:  8.09878}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 3.55e-80}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.78e-80}}}{space 1}{space 1}{ralign 9:{res:{sf:      811}}}{space 1}{space 1}{ralign 9:{res:{sf: 11.31751}}}{space 1}{space 1}{ralign 9:{res:{sf:      806}}}{space 1}{space 1}{ralign 9:{res:{sf: 6.143238}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf:  .033021}}}{space 1}{space 1}{ralign 9:{res:{sf: .0165105}}}{space 1}{space 1}{ralign 9:{res:{sf:      816}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.370196}}}{space 1}{space 1}{ralign 9:{res:{sf:      812}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.314483}}}{space 1}

{com}. 
.         esttab unmarked blue difference using "Section3_table1_raw.csv", replace  cells("mean(pattern(1 1 0) fmt(%9.2f)) b(pattern(0 0 1) fmt(%9.2f) star)" "sd(pattern(1 1 0) fmt(%9.2f) par) se(pattern(0 0 1) fmt(%9.2f) par)") starlevels(* 0.10 ** 0.05 *** 0.01)  plain 
{res}{txt}(output written to {browse  `"Section3_table1_raw.csv"'})

{com}. restore
{txt}
{com}. 
. // 
. gen input_ksh_blue = kg_tdfert_blue*65 + kg_plantfert_blue*70 + packets_hyb_blue*230
{txt}(488 missing values generated)

{com}. gen input_ksh_unmarked = kg_tdfert_unmarked*65 + kg_plantfert_unmarked*70 + packets_hyb_unmarked*230
{txt}(495 missing values generated)

{com}. 
. ttest input_ksh_blue = input_ksh_unmarked

{txt}Paired t test
{hline 9}{c TT}{hline 68}
Variable{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
input_~e {c |}{res}{col 12}    741{col 22} 1909.007{col 34} 10.58548{col 46} 288.1508{col 58} 1888.226{col 70} 1929.788
{txt}input_~d {c |}{res}{col 12}    741{col 22} 1265.847{col 34} 28.75187{col 46} 782.6636{col 58} 1209.402{col 70} 1322.292
{txt}{hline 9}{c +}{hline 68}
    diff {c |}{res}{col 12}    741{col 22} 643.1601{col 34} 27.52955{col 46} 749.3906{col 58} 589.1147{col 70} 697.2054
{txt}{hline 9}{c BT}{hline 68}
     mean(diff) = mean({res}input_ksh_blue{txt} - {res}input_ksh_unma~d{txt})         t = {res} 23.3625
{txt} Ho: mean(diff) = 0                              degrees of freedom = {res}     740

 {txt}Ha: mean(diff) < 0           Ha: mean(diff) != 0           Ha: mean(diff) > 0
 Pr(T < t) = {res}1.0000         {txt}Pr(|T| > |t|) = {res}0.0000          {txt}Pr(T > t) = {res}0.0000
{txt}
{com}. 
. sss
{err}command {bf}sss{sf} is unrecognized
{txt}{search r(199):r(199);}

end of do-file

{search r(199):r(199);}

{com}. do "/var/folders/wy/26794k5d4ydcf0nqcms58wkr0000gn/T//SD43744.000000"
{txt}
{com}. * ---------------------------- *
. * Econ120 (J. Robinson, F2020) *
. * Section 3 (Oct. 19, 2020)        * NOTE: all the path directories are based on my own computer, 
. * TA: David Sungho Park        *       so you should change them according to yours.
. * ---------------------------- *
. 
. clear all
{txt}
{com}. set more off
{txt}
{com}. 
. cap noisily cd "/Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3/" // Note: I changed this from previous do-files for Sections 1 & 2
{res}/Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3
{txt}
{com}. 
. //log using "Econ120_F20_Section3.smcl", replace // you can uncomment this line if you want to keep a Stata log file
. 
. use "farming.dta", clear
{txt}
{com}. 
. // Getting sumstats 
. su kg_tdfert_blue kg_plantfert_blue packets_hyb_blue

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
kg_tdfert_~e {c |}{res}        822     12.3455    1.376406          0         25
{txt}kg_plantfe~e {c |}{res}        811    11.31751    3.389863          0         25
{txt}packets_hy~e {c |}{res}        816    1.370196    .4662883          0         10
{txt}
{com}. su kg_tdfert_unmarked kg_plantfert_unmarked packets_hyb_unmarked

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
kg_tdfert_~d {c |}{res}        820     8.09878    7.103199          0         75
{txt}kg_plantfe~d {c |}{res}        806    6.143238    6.342009          0         25
{txt}packets_hy~d {c |}{res}        812    1.314483    .5807212          0         10
{txt}
{com}. 
. // Testing for mean differences
. gen kg_tdfert_diff              = kg_tdfert_blue        - kg_tdfert_unmarked
{txt}(435 missing values generated)

{com}. gen kg_plantfert_diff   = kg_plantfert_blue - kg_plantfert_unmarked
{txt}(447 missing values generated)

{com}. gen packets_hyb_diff    = packets_hyb_blue      - packets_hyb_unmarked
{txt}(436 missing values generated)

{com}. 
. ttest kg_tdfert_diff    = 0

{txt}One-sample t test
{hline 9}{c TT}{hline 68}
Variable{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
kg_td~ff {c |}{res}{col 12}    813{col 22} 4.195572{col 34} .2448409{col 46} 6.981185{col 58} 3.714976{col 70} 4.676168
{txt}{hline 9}{c BT}{hline 68}
    mean = mean({res}kg_tdfert_diff{txt})                                   t = {res} 17.1359
{txt}Ho: mean = {res}0                                     {txt}degrees of freedom = {res}     812

    {txt}Ha: mean < {res}0                 {txt}Ha: mean != {res}0                 {txt}Ha: mean > {res}0
 {txt}Pr(T < t) = {res}1.0000         {txt}Pr(|T| > |t|) = {res}0.0000          {txt}Pr(T > t) = {res}0.0000
{txt}
{com}. ttest kg_plantfert_diff = 0

{txt}One-sample t test
{hline 9}{c TT}{hline 68}
Variable{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
kg_pl~ff {c |}{res}{col 12}    801{col 22} 5.152996{col 34} .2192189{col 46} 6.204321{col 58} 4.722684{col 70} 5.583308
{txt}{hline 9}{c BT}{hline 68}
    mean = mean({res}kg_plantfert_diff{txt})                                t = {res} 23.5062
{txt}Ho: mean = {res}0                                     {txt}degrees of freedom = {res}     800

    {txt}Ha: mean < {res}0                 {txt}Ha: mean != {res}0                 {txt}Ha: mean > {res}0
 {txt}Pr(T < t) = {res}1.0000         {txt}Pr(|T| > |t|) = {res}0.0000          {txt}Pr(T > t) = {res}0.0000
{txt}
{com}. ttest packets_hyb_diff  = 0

{txt}One-sample t test
{hline 9}{c TT}{hline 68}
Variable{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
packe~ff {c |}{res}{col 12}    812{col 22} .0559975{col 34} .0137451{col 46} .3916762{col 58} .0290173{col 70} .0829778
{txt}{hline 9}{c BT}{hline 68}
    mean = mean({res}packets_hyb_diff{txt})                                 t = {res}  4.0740
{txt}Ho: mean = {res}0                                     {txt}degrees of freedom = {res}     811

    {txt}Ha: mean < {res}0                 {txt}Ha: mean != {res}0                 {txt}Ha: mean > {res}0
 {txt}Pr(T < t) = {res}1.0000         {txt}Pr(|T| > |t|) = {res}0.0001          {txt}Pr(T > t) = {res}0.0000
{txt}
{com}. 
. // 
. gen input_ksh_blue = kg_tdfert_blue*65 + kg_plantfert_blue*70 + packets_hyb_blue*230
{txt}(488 missing values generated)

{com}. gen input_ksh_unmarked = kg_tdfert_unmarked*65 + kg_plantfert_unmarked*70 + packets_hyb_unmarked*230
{txt}(495 missing values generated)

{com}. 
. ttest input_ksh_blue = input_ksh_unmarked

{txt}Paired t test
{hline 9}{c TT}{hline 68}
Variable{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
input_~e {c |}{res}{col 12}    741{col 22} 1909.007{col 34} 10.58548{col 46} 288.1508{col 58} 1888.226{col 70} 1929.788
{txt}input_~d {c |}{res}{col 12}    741{col 22} 1265.847{col 34} 28.75187{col 46} 782.6636{col 58} 1209.402{col 70} 1322.292
{txt}{hline 9}{c +}{hline 68}
    diff {c |}{res}{col 12}    741{col 22} 643.1601{col 34} 27.52955{col 46} 749.3906{col 58} 589.1147{col 70} 697.2054
{txt}{hline 9}{c BT}{hline 68}
     mean(diff) = mean({res}input_ksh_blue{txt} - {res}input_ksh_unma~d{txt})         t = {res} 23.3625
{txt} Ho: mean(diff) = 0                              degrees of freedom = {res}     740

 {txt}Ha: mean(diff) < 0           Ha: mean(diff) != 0           Ha: mean(diff) > 0
 Pr(T < t) = {res}1.0000         {txt}Pr(|T| > |t|) = {res}0.0000          {txt}Pr(T > t) = {res}0.0000
{txt}
{com}. 
. // Constructing mean-difference table (similar to what you've done for Econ104)
. preserve
{txt}
{com}.         // First step: we need to reshape the dataset from "wide" format to "long" format
.         keep respondent_id kg_tdfert_unmarked kg_plantfert_unmarked packets_hyb_unmarked kg_tdfert_blue kg_plantfert_blue packets_hyb_blue input_ksh_blue input_ksh_unmarked
{txt}
{com}.         reshape long kg_tdfert kg_plantfert packets_hyb, i(respondent_id) j(plot,string)
{txt}(note: j = _blue _unmarked)

Data{col 36}wide{col 43}->{col 48}long
{hline 77}
Number of obs.                 {res}    1248   {txt}->{res}    2496
{txt}Number of variables            {res}       9   {txt}->{res}       7
{txt}j variable (2 values)                     ->   {res}plot
{txt}xij variables:
      {res}kg_tdfert_blue kg_tdfert_unmarked   {txt}->   {res}kg_tdfert
kg_plantfert_blue kg_plantfert_unmarked   {txt}->   {res}kg_plantfert
  packets_hyb_blue packets_hyb_unmarked   {txt}->   {res}packets_hyb
{txt}{hline 77}

{com}. 
.         // Step 2: exporting into single table (similar to what you've done for Econ104)
.         est clear 
{txt}
{com}.         eststo unmarked:        estpost summarize       kg_tdfert kg_plantfert packets_hyb input_ksh if plot=="_unmarked"
{bf}{err}input_ksh{sf} ambiguous abbreviation
{txt}{search r(111):r(111);}

end of do-file

{search r(111):r(111);}

{com}. do "/var/folders/wy/26794k5d4ydcf0nqcms58wkr0000gn/T//SD43744.000000"
{txt}
{com}. * ---------------------------- *
. * Econ120 (J. Robinson, F2020) *
. * Section 3 (Oct. 19, 2020)        * NOTE: all the path directories are based on my own computer, 
. * TA: David Sungho Park        *       so you should change them according to yours.
. * ---------------------------- *
. 
. clear all
{txt}
{com}. set more off
{txt}
{com}. 
. cap noisily cd "/Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3/" // Note: I changed this from previous do-files for Sections 1 & 2
{res}/Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3
{txt}
{com}. 
. //log using "Econ120_F20_Section3.smcl", replace // you can uncomment this line if you want to keep a Stata log file
. 
. use "farming.dta", clear
{txt}
{com}. 
. // Getting sumstats 
. su kg_tdfert_blue kg_plantfert_blue packets_hyb_blue

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
kg_tdfert_~e {c |}{res}        822     12.3455    1.376406          0         25
{txt}kg_plantfe~e {c |}{res}        811    11.31751    3.389863          0         25
{txt}packets_hy~e {c |}{res}        816    1.370196    .4662883          0         10
{txt}
{com}. su kg_tdfert_unmarked kg_plantfert_unmarked packets_hyb_unmarked

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
kg_tdfert_~d {c |}{res}        820     8.09878    7.103199          0         75
{txt}kg_plantfe~d {c |}{res}        806    6.143238    6.342009          0         25
{txt}packets_hy~d {c |}{res}        812    1.314483    .5807212          0         10
{txt}
{com}. 
. // Testing for mean differences
. gen kg_tdfert_diff              = kg_tdfert_blue        - kg_tdfert_unmarked
{txt}(435 missing values generated)

{com}. gen kg_plantfert_diff   = kg_plantfert_blue - kg_plantfert_unmarked
{txt}(447 missing values generated)

{com}. gen packets_hyb_diff    = packets_hyb_blue      - packets_hyb_unmarked
{txt}(436 missing values generated)

{com}. 
. ttest kg_tdfert_diff    = 0

{txt}One-sample t test
{hline 9}{c TT}{hline 68}
Variable{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
kg_td~ff {c |}{res}{col 12}    813{col 22} 4.195572{col 34} .2448409{col 46} 6.981185{col 58} 3.714976{col 70} 4.676168
{txt}{hline 9}{c BT}{hline 68}
    mean = mean({res}kg_tdfert_diff{txt})                                   t = {res} 17.1359
{txt}Ho: mean = {res}0                                     {txt}degrees of freedom = {res}     812

    {txt}Ha: mean < {res}0                 {txt}Ha: mean != {res}0                 {txt}Ha: mean > {res}0
 {txt}Pr(T < t) = {res}1.0000         {txt}Pr(|T| > |t|) = {res}0.0000          {txt}Pr(T > t) = {res}0.0000
{txt}
{com}. ttest kg_plantfert_diff = 0

{txt}One-sample t test
{hline 9}{c TT}{hline 68}
Variable{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
kg_pl~ff {c |}{res}{col 12}    801{col 22} 5.152996{col 34} .2192189{col 46} 6.204321{col 58} 4.722684{col 70} 5.583308
{txt}{hline 9}{c BT}{hline 68}
    mean = mean({res}kg_plantfert_diff{txt})                                t = {res} 23.5062
{txt}Ho: mean = {res}0                                     {txt}degrees of freedom = {res}     800

    {txt}Ha: mean < {res}0                 {txt}Ha: mean != {res}0                 {txt}Ha: mean > {res}0
 {txt}Pr(T < t) = {res}1.0000         {txt}Pr(|T| > |t|) = {res}0.0000          {txt}Pr(T > t) = {res}0.0000
{txt}
{com}. ttest packets_hyb_diff  = 0

{txt}One-sample t test
{hline 9}{c TT}{hline 68}
Variable{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
packe~ff {c |}{res}{col 12}    812{col 22} .0559975{col 34} .0137451{col 46} .3916762{col 58} .0290173{col 70} .0829778
{txt}{hline 9}{c BT}{hline 68}
    mean = mean({res}packets_hyb_diff{txt})                                 t = {res}  4.0740
{txt}Ho: mean = {res}0                                     {txt}degrees of freedom = {res}     811

    {txt}Ha: mean < {res}0                 {txt}Ha: mean != {res}0                 {txt}Ha: mean > {res}0
 {txt}Pr(T < t) = {res}1.0000         {txt}Pr(|T| > |t|) = {res}0.0001          {txt}Pr(T > t) = {res}0.0000
{txt}
{com}. 
. // 
. gen input_ksh_blue = kg_tdfert_blue*65 + kg_plantfert_blue*70 + packets_hyb_blue*230
{txt}(488 missing values generated)

{com}. gen input_ksh_unmarked = kg_tdfert_unmarked*65 + kg_plantfert_unmarked*70 + packets_hyb_unmarked*230
{txt}(495 missing values generated)

{com}. 
. ttest input_ksh_blue = input_ksh_unmarked

{txt}Paired t test
{hline 9}{c TT}{hline 68}
Variable{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
input_~e {c |}{res}{col 12}    741{col 22} 1909.007{col 34} 10.58548{col 46} 288.1508{col 58} 1888.226{col 70} 1929.788
{txt}input_~d {c |}{res}{col 12}    741{col 22} 1265.847{col 34} 28.75187{col 46} 782.6636{col 58} 1209.402{col 70} 1322.292
{txt}{hline 9}{c +}{hline 68}
    diff {c |}{res}{col 12}    741{col 22} 643.1601{col 34} 27.52955{col 46} 749.3906{col 58} 589.1147{col 70} 697.2054
{txt}{hline 9}{c BT}{hline 68}
     mean(diff) = mean({res}input_ksh_blue{txt} - {res}input_ksh_unma~d{txt})         t = {res} 23.3625
{txt} Ho: mean(diff) = 0                              degrees of freedom = {res}     740

 {txt}Ha: mean(diff) < 0           Ha: mean(diff) != 0           Ha: mean(diff) > 0
 Pr(T < t) = {res}1.0000         {txt}Pr(|T| > |t|) = {res}0.0000          {txt}Pr(T > t) = {res}0.0000
{txt}
{com}. 
. // Constructing mean-difference table (similar to what you've done for Econ104)
. preserve
{txt}
{com}.         // First step: we need to reshape the dataset from "wide" format to "long" format
.         keep respondent_id kg_tdfert_unmarked kg_plantfert_unmarked packets_hyb_unmarked kg_tdfert_blue kg_plantfert_blue packets_hyb_blue input_ksh_blue input_ksh_unmarked
{txt}
{com}.         reshape long kg_tdfert kg_plantfert packets_hyb input_ksh, i(respondent_id) j(plot,string)
{txt}(note: j = _blue _unmarked)

Data{col 36}wide{col 43}->{col 48}long
{hline 77}
Number of obs.                 {res}    1248   {txt}->{res}    2496
{txt}Number of variables            {res}       9   {txt}->{res}       6
{txt}j variable (2 values)                     ->   {res}plot
{txt}xij variables:
      {res}kg_tdfert_blue kg_tdfert_unmarked   {txt}->   {res}kg_tdfert
kg_plantfert_blue kg_plantfert_unmarked   {txt}->   {res}kg_plantfert
  packets_hyb_blue packets_hyb_unmarked   {txt}->   {res}packets_hyb
      input_ksh_blue input_ksh_unmarked   {txt}->   {res}input_ksh
{txt}{hline 77}

{com}. 
.         // Step 2: exporting into single table (similar to what you've done for Econ104)
.         est clear 
{txt}
{com}.         eststo unmarked:        estpost summarize       kg_tdfert kg_plantfert packets_hyb input_ksh if plot=="_unmarked"

{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(sum_w)}{space 1}{space 1}{ralign 9:e(mean)}{space 1}{space 1}{ralign 9:e(Var)}{space 1}{space 1}{ralign 9:e(sd)}{space 1}{space 1}{ralign 9:e(min)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      820}}}{space 1}{space 1}{ralign 9:{res:{sf:      820}}}{space 1}{space 1}{ralign 9:{res:{sf:  8.09878}}}{space 1}{space 1}{ralign 9:{res:{sf: 50.45543}}}{space 1}{space 1}{ralign 9:{res:{sf: 7.103199}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      806}}}{space 1}{space 1}{ralign 9:{res:{sf:      806}}}{space 1}{space 1}{ralign 9:{res:{sf: 6.143238}}}{space 1}{space 1}{ralign 9:{res:{sf: 40.22108}}}{space 1}{space 1}{ralign 9:{res:{sf: 6.342009}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      812}}}{space 1}{space 1}{ralign 9:{res:{sf:      812}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.314483}}}{space 1}{space 1}{ralign 9:{res:{sf: .3372371}}}{space 1}{space 1}{ralign 9:{res:{sf: .5807212}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}
{space 0}{space 0}{ralign 12:input_ksh}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      753}}}{space 1}{space 1}{ralign 9:{res:{sf:      753}}}{space 1}{space 1}{ralign 9:{res:{sf: 1258.903}}}{space 1}{space 1}{ralign 9:{res:{sf: 609995.3}}}{space 1}{space 1}{ralign 9:{res:{sf:  781.022}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(max)}{space 1}{space 1}{ralign 9:e(sum)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       75}}}{space 1}{space 1}{ralign 9:{res:{sf:     6641}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       25}}}{space 1}{space 1}{ralign 9:{res:{sf:  4951.45}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       10}}}{space 1}{space 1}{ralign 9:{res:{sf:  1067.36}}}{space 1}
{space 0}{space 0}{ralign 12:input_ksh}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     6095}}}{space 1}{space 1}{ralign 9:{res:{sf: 947954.3}}}{space 1}

{com}.         eststo blue:            estpost summarize       kg_tdfert kg_plantfert packets_hyb input_ksh if plot=="_blue"

{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(sum_w)}{space 1}{space 1}{ralign 9:e(mean)}{space 1}{space 1}{ralign 9:e(Var)}{space 1}{space 1}{ralign 9:e(sd)}{space 1}{space 1}{ralign 9:e(min)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      822}}}{space 1}{space 1}{ralign 9:{res:{sf:      822}}}{space 1}{space 1}{ralign 9:{res:{sf:  12.3455}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.894493}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.376406}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      811}}}{space 1}{space 1}{ralign 9:{res:{sf:      811}}}{space 1}{space 1}{ralign 9:{res:{sf: 11.31751}}}{space 1}{space 1}{ralign 9:{res:{sf: 11.49117}}}{space 1}{space 1}{ralign 9:{res:{sf: 3.389863}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      816}}}{space 1}{space 1}{ralign 9:{res:{sf:      816}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.370196}}}{space 1}{space 1}{ralign 9:{res:{sf: .2174247}}}{space 1}{space 1}{ralign 9:{res:{sf: .4662883}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}
{space 0}{space 0}{ralign 12:input_ksh}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      760}}}{space 1}{space 1}{ralign 9:{res:{sf:      760}}}{space 1}{space 1}{ralign 9:{res:{sf: 1909.561}}}{space 1}{space 1}{ralign 9:{res:{sf:  81324.3}}}{space 1}{space 1}{ralign 9:{res:{sf: 285.1742}}}{space 1}{space 1}{ralign 9:{res:{sf:    812.5}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(max)}{space 1}{space 1}{ralign 9:e(sum)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       25}}}{space 1}{space 1}{ralign 9:{res:{sf:    10148}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       25}}}{space 1}{space 1}{ralign 9:{res:{sf:   9178.5}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       10}}}{space 1}{space 1}{ralign 9:{res:{sf:  1118.08}}}{space 1}
{space 0}{space 0}{ralign 12:input_ksh}{space 1}{c |}{space 1}{ralign 9:{res:{sf:   3952.5}}}{space 1}{space 1}{ralign 9:{res:{sf:  1451267}}}{space 1}

{com}.         eststo difference:      estpost ttest           kg_tdfert kg_plantfert packets_hyb input_ksh, by(plot) unequal

{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(b)}{space 1}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(se)}{space 1}{space 1}{ralign 9:e(t)}{space 1}{space 1}{ralign 9:e(df_t)}{space 1}{space 1}{ralign 9:e(p_l)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 4.246718}}}{space 1}{space 1}{ralign 9:{res:{sf:     1642}}}{space 1}{space 1}{ralign 9:{res:{sf: .2526574}}}{space 1}{space 1}{ralign 9:{res:{sf: 16.80821}}}{space 1}{space 1}{ralign 9:{res:{sf: 880.2708}}}{space 1}{space 1}{ralign 9:{res:{sf:        1}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 5.174271}}}{space 1}{space 1}{ralign 9:{res:{sf:     1617}}}{space 1}{space 1}{ralign 9:{res:{sf: .2531229}}}{space 1}{space 1}{ralign 9:{res:{sf: 20.44173}}}{space 1}{space 1}{ralign 9:{res:{sf: 1228.602}}}{space 1}{space 1}{ralign 9:{res:{sf:        1}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .0557133}}}{space 1}{space 1}{ralign 9:{res:{sf:     1628}}}{space 1}{space 1}{ralign 9:{res:{sf: .0261107}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.133735}}}{space 1}{space 1}{ralign 9:{res:{sf: 1550.406}}}{space 1}{space 1}{ralign 9:{res:{sf: .9834895}}}{space 1}
{space 0}{space 0}{ralign 12:input_ksh}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 650.6579}}}{space 1}{space 1}{ralign 9:{res:{sf:     1513}}}{space 1}{space 1}{ralign 9:{res:{sf: 30.28353}}}{space 1}{space 1}{ralign 9:{res:{sf: 21.48553}}}{space 1}{space 1}{ralign 9:{res:{sf: 947.4087}}}{space 1}{space 1}{ralign 9:{res:{sf:        1}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(p)}{space 1}{space 1}{ralign 9:e(p_u)}{space 1}{space 1}{ralign 9:e(N_1)}{space 1}{space 1}{ralign 9:e(mu_1)}{space 1}{space 1}{ralign 9:e(N_2)}{space 1}{space 1}{ralign 9:e(mu_2)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 3.39e-55}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.69e-55}}}{space 1}{space 1}{ralign 9:{res:{sf:      822}}}{space 1}{space 1}{ralign 9:{res:{sf:  12.3455}}}{space 1}{space 1}{ralign 9:{res:{sf:      820}}}{space 1}{space 1}{ralign 9:{res:{sf:  8.09878}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 3.55e-80}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.78e-80}}}{space 1}{space 1}{ralign 9:{res:{sf:      811}}}{space 1}{space 1}{ralign 9:{res:{sf: 11.31751}}}{space 1}{space 1}{ralign 9:{res:{sf:      806}}}{space 1}{space 1}{ralign 9:{res:{sf: 6.143238}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf:  .033021}}}{space 1}{space 1}{ralign 9:{res:{sf: .0165105}}}{space 1}{space 1}{ralign 9:{res:{sf:      816}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.370196}}}{space 1}{space 1}{ralign 9:{res:{sf:      812}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.314483}}}{space 1}
{space 0}{space 0}{ralign 12:input_ksh}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 9.90e-84}}}{space 1}{space 1}{ralign 9:{res:{sf: 4.95e-84}}}{space 1}{space 1}{ralign 9:{res:{sf:      760}}}{space 1}{space 1}{ralign 9:{res:{sf: 1909.561}}}{space 1}{space 1}{ralign 9:{res:{sf:      753}}}{space 1}{space 1}{ralign 9:{res:{sf: 1258.903}}}{space 1}

{com}. 
.         esttab unmarked blue difference using "Section3_table1_raw.csv", replace  cells("mean(pattern(1 1 0) fmt(%9.2f)) b(pattern(0 0 1) fmt(%9.2f) star)" "sd(pattern(1 1 0) fmt(%9.2f) par) se(pattern(0 0 1) fmt(%9.2f) par)") starlevels(* 0.10 ** 0.05 *** 0.01)  plain 
{res}{txt}(output written to {browse  `"Section3_table1_raw.csv"'})

{com}. restore
{txt}
{com}. 
. 
. sss
{err}command {bf}sss{sf} is unrecognized
{txt}{search r(199):r(199);}

end of do-file

{search r(199):r(199);}

{com}. do "/var/folders/wy/26794k5d4ydcf0nqcms58wkr0000gn/T//SD43744.000000"
{txt}
{com}. * ---------------------------- *
. * Econ120 (J. Robinson, F2020) *
. * Section 3 (Oct. 19, 2020)        * NOTE: all the path directories are based on my own computer, 
. * TA: David Sungho Park        *       so you should change them according to yours.
. * ---------------------------- *
. 
. clear all
{txt}
{com}. set more off
{txt}
{com}. 
. cap noisily cd "/Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3/" // Note: I changed this from previous do-files for Sections 1 & 2
{res}/Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3
{txt}
{com}. 
. //log using "Econ120_F20_Section3.smcl", replace // you can uncomment this line if you want to keep a Stata log file
. 
. use "farming.dta", clear
{txt}
{com}. 
. // Getting sumstats 
. su kg_tdfert_blue kg_plantfert_blue packets_hyb_blue

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
kg_tdfert_~e {c |}{res}        822     12.3455    1.376406          0         25
{txt}kg_plantfe~e {c |}{res}        811    11.31751    3.389863          0         25
{txt}packets_hy~e {c |}{res}        816    1.370196    .4662883          0         10
{txt}
{com}. su kg_tdfert_unmarked kg_plantfert_unmarked packets_hyb_unmarked

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
kg_tdfert_~d {c |}{res}        820     8.09878    7.103199          0         75
{txt}kg_plantfe~d {c |}{res}        806    6.143238    6.342009          0         25
{txt}packets_hy~d {c |}{res}        812    1.314483    .5807212          0         10
{txt}
{com}. 
. // Testing for mean differences
. gen kg_tdfert_diff              = kg_tdfert_blue        - kg_tdfert_unmarked
{txt}(435 missing values generated)

{com}. gen kg_plantfert_diff   = kg_plantfert_blue - kg_plantfert_unmarked
{txt}(447 missing values generated)

{com}. gen packets_hyb_diff    = packets_hyb_blue      - packets_hyb_unmarked
{txt}(436 missing values generated)

{com}. 
. ttest kg_tdfert_diff    = 0

{txt}One-sample t test
{hline 9}{c TT}{hline 68}
Variable{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
kg_td~ff {c |}{res}{col 12}    813{col 22} 4.195572{col 34} .2448409{col 46} 6.981185{col 58} 3.714976{col 70} 4.676168
{txt}{hline 9}{c BT}{hline 68}
    mean = mean({res}kg_tdfert_diff{txt})                                   t = {res} 17.1359
{txt}Ho: mean = {res}0                                     {txt}degrees of freedom = {res}     812

    {txt}Ha: mean < {res}0                 {txt}Ha: mean != {res}0                 {txt}Ha: mean > {res}0
 {txt}Pr(T < t) = {res}1.0000         {txt}Pr(|T| > |t|) = {res}0.0000          {txt}Pr(T > t) = {res}0.0000
{txt}
{com}. ttest kg_plantfert_diff = 0

{txt}One-sample t test
{hline 9}{c TT}{hline 68}
Variable{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
kg_pl~ff {c |}{res}{col 12}    801{col 22} 5.152996{col 34} .2192189{col 46} 6.204321{col 58} 4.722684{col 70} 5.583308
{txt}{hline 9}{c BT}{hline 68}
    mean = mean({res}kg_plantfert_diff{txt})                                t = {res} 23.5062
{txt}Ho: mean = {res}0                                     {txt}degrees of freedom = {res}     800

    {txt}Ha: mean < {res}0                 {txt}Ha: mean != {res}0                 {txt}Ha: mean > {res}0
 {txt}Pr(T < t) = {res}1.0000         {txt}Pr(|T| > |t|) = {res}0.0000          {txt}Pr(T > t) = {res}0.0000
{txt}
{com}. ttest packets_hyb_diff  = 0

{txt}One-sample t test
{hline 9}{c TT}{hline 68}
Variable{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
packe~ff {c |}{res}{col 12}    812{col 22} .0559975{col 34} .0137451{col 46} .3916762{col 58} .0290173{col 70} .0829778
{txt}{hline 9}{c BT}{hline 68}
    mean = mean({res}packets_hyb_diff{txt})                                 t = {res}  4.0740
{txt}Ho: mean = {res}0                                     {txt}degrees of freedom = {res}     811

    {txt}Ha: mean < {res}0                 {txt}Ha: mean != {res}0                 {txt}Ha: mean > {res}0
 {txt}Pr(T < t) = {res}1.0000         {txt}Pr(|T| > |t|) = {res}0.0001          {txt}Pr(T > t) = {res}0.0000
{txt}
{com}. 
. // Constructing mean-difference table (similar to what you've done for Econ104)
. preserve
{txt}
{com}.         // First step: we need to reshape the dataset from "wide" format to "long" format
.         keep respondent_id kg_tdfert_unmarked kg_plantfert_unmarked packets_hyb_unmarked kg_tdfert_blue kg_plantfert_blue packets_hyb_blue 
{txt}
{com}.         reshape long kg_tdfert kg_plantfert packets_hyb, i(respondent_id) j(plot,string)
{txt}(note: j = _blue _unmarked)

Data{col 36}wide{col 43}->{col 48}long
{hline 77}
Number of obs.                 {res}    1248   {txt}->{res}    2496
{txt}Number of variables            {res}       7   {txt}->{res}       5
{txt}j variable (2 values)                     ->   {res}plot
{txt}xij variables:
      {res}kg_tdfert_blue kg_tdfert_unmarked   {txt}->   {res}kg_tdfert
kg_plantfert_blue kg_plantfert_unmarked   {txt}->   {res}kg_plantfert
  packets_hyb_blue packets_hyb_unmarked   {txt}->   {res}packets_hyb
{txt}{hline 77}

{com}. 
.         // Step 2: exporting into single table (similar to what you've done for Econ104)
.         est clear 
{txt}
{com}.         eststo unmarked:        estpost summarize       kg_tdfert kg_plantfert packets_hyb if plot=="_unmarked"

{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(sum_w)}{space 1}{space 1}{ralign 9:e(mean)}{space 1}{space 1}{ralign 9:e(Var)}{space 1}{space 1}{ralign 9:e(sd)}{space 1}{space 1}{ralign 9:e(min)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      820}}}{space 1}{space 1}{ralign 9:{res:{sf:      820}}}{space 1}{space 1}{ralign 9:{res:{sf:  8.09878}}}{space 1}{space 1}{ralign 9:{res:{sf: 50.45543}}}{space 1}{space 1}{ralign 9:{res:{sf: 7.103199}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      806}}}{space 1}{space 1}{ralign 9:{res:{sf:      806}}}{space 1}{space 1}{ralign 9:{res:{sf: 6.143238}}}{space 1}{space 1}{ralign 9:{res:{sf: 40.22108}}}{space 1}{space 1}{ralign 9:{res:{sf: 6.342009}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      812}}}{space 1}{space 1}{ralign 9:{res:{sf:      812}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.314483}}}{space 1}{space 1}{ralign 9:{res:{sf: .3372371}}}{space 1}{space 1}{ralign 9:{res:{sf: .5807212}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(max)}{space 1}{space 1}{ralign 9:e(sum)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       75}}}{space 1}{space 1}{ralign 9:{res:{sf:     6641}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       25}}}{space 1}{space 1}{ralign 9:{res:{sf:  4951.45}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       10}}}{space 1}{space 1}{ralign 9:{res:{sf:  1067.36}}}{space 1}

{com}.         eststo blue:            estpost summarize       kg_tdfert kg_plantfert packets_hyb if plot=="_blue"

{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(sum_w)}{space 1}{space 1}{ralign 9:e(mean)}{space 1}{space 1}{ralign 9:e(Var)}{space 1}{space 1}{ralign 9:e(sd)}{space 1}{space 1}{ralign 9:e(min)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      822}}}{space 1}{space 1}{ralign 9:{res:{sf:      822}}}{space 1}{space 1}{ralign 9:{res:{sf:  12.3455}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.894493}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.376406}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      811}}}{space 1}{space 1}{ralign 9:{res:{sf:      811}}}{space 1}{space 1}{ralign 9:{res:{sf: 11.31751}}}{space 1}{space 1}{ralign 9:{res:{sf: 11.49117}}}{space 1}{space 1}{ralign 9:{res:{sf: 3.389863}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      816}}}{space 1}{space 1}{ralign 9:{res:{sf:      816}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.370196}}}{space 1}{space 1}{ralign 9:{res:{sf: .2174247}}}{space 1}{space 1}{ralign 9:{res:{sf: .4662883}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(max)}{space 1}{space 1}{ralign 9:e(sum)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       25}}}{space 1}{space 1}{ralign 9:{res:{sf:    10148}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       25}}}{space 1}{space 1}{ralign 9:{res:{sf:   9178.5}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       10}}}{space 1}{space 1}{ralign 9:{res:{sf:  1118.08}}}{space 1}

{com}.         eststo difference:      estpost ttest           kg_tdfert kg_plantfert packets_hyb, by(plot) unequal

{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(b)}{space 1}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(se)}{space 1}{space 1}{ralign 9:e(t)}{space 1}{space 1}{ralign 9:e(df_t)}{space 1}{space 1}{ralign 9:e(p_l)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 4.246718}}}{space 1}{space 1}{ralign 9:{res:{sf:     1642}}}{space 1}{space 1}{ralign 9:{res:{sf: .2526574}}}{space 1}{space 1}{ralign 9:{res:{sf: 16.80821}}}{space 1}{space 1}{ralign 9:{res:{sf: 880.2708}}}{space 1}{space 1}{ralign 9:{res:{sf:        1}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 5.174271}}}{space 1}{space 1}{ralign 9:{res:{sf:     1617}}}{space 1}{space 1}{ralign 9:{res:{sf: .2531229}}}{space 1}{space 1}{ralign 9:{res:{sf: 20.44173}}}{space 1}{space 1}{ralign 9:{res:{sf: 1228.602}}}{space 1}{space 1}{ralign 9:{res:{sf:        1}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .0557133}}}{space 1}{space 1}{ralign 9:{res:{sf:     1628}}}{space 1}{space 1}{ralign 9:{res:{sf: .0261107}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.133735}}}{space 1}{space 1}{ralign 9:{res:{sf: 1550.406}}}{space 1}{space 1}{ralign 9:{res:{sf: .9834895}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(p)}{space 1}{space 1}{ralign 9:e(p_u)}{space 1}{space 1}{ralign 9:e(N_1)}{space 1}{space 1}{ralign 9:e(mu_1)}{space 1}{space 1}{ralign 9:e(N_2)}{space 1}{space 1}{ralign 9:e(mu_2)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 3.39e-55}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.69e-55}}}{space 1}{space 1}{ralign 9:{res:{sf:      822}}}{space 1}{space 1}{ralign 9:{res:{sf:  12.3455}}}{space 1}{space 1}{ralign 9:{res:{sf:      820}}}{space 1}{space 1}{ralign 9:{res:{sf:  8.09878}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 3.55e-80}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.78e-80}}}{space 1}{space 1}{ralign 9:{res:{sf:      811}}}{space 1}{space 1}{ralign 9:{res:{sf: 11.31751}}}{space 1}{space 1}{ralign 9:{res:{sf:      806}}}{space 1}{space 1}{ralign 9:{res:{sf: 6.143238}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf:  .033021}}}{space 1}{space 1}{ralign 9:{res:{sf: .0165105}}}{space 1}{space 1}{ralign 9:{res:{sf:      816}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.370196}}}{space 1}{space 1}{ralign 9:{res:{sf:      812}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.314483}}}{space 1}

{com}. 
.         esttab unmarked blue difference using "Section3_table1_raw.csv", replace  cells("mean(pattern(1 1 0) fmt(%9.2f)) b(pattern(0 0 1) fmt(%9.2f) star)" "sd(pattern(1 1 0) fmt(%9.2f) par) se(pattern(0 0 1) fmt(%9.2f) par)") starlevels(* 0.10 ** 0.05 *** 0.01)  plain 
{res}{txt}(output written to {browse  `"Section3_table1_raw.csv"'})

{com}. restore
{txt}
{com}. 
. // Calculating monetary cost of inputs
. gen input_ksh_blue = kg_tdfert_blue*65 + kg_plantfert_blue*70 + packets_hyb_blue*230
{txt}(488 missing values generated)

{com}. gen input_ksh_unmarked = kg_tdfert_unmarked*65 + kg_plantfert_unmarked*70 + packets_hyb_unmarked*230
{txt}(495 missing values generated)

{com}. 
. ttest input_ksh_blue = input_ksh_unmarked

{txt}Paired t test
{hline 9}{c TT}{hline 68}
Variable{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
input_~e {c |}{res}{col 12}    741{col 22} 1909.007{col 34} 10.58548{col 46} 288.1508{col 58} 1888.226{col 70} 1929.788
{txt}input_~d {c |}{res}{col 12}    741{col 22} 1265.847{col 34} 28.75187{col 46} 782.6636{col 58} 1209.402{col 70} 1322.292
{txt}{hline 9}{c +}{hline 68}
    diff {c |}{res}{col 12}    741{col 22} 643.1601{col 34} 27.52955{col 46} 749.3906{col 58} 589.1147{col 70} 697.2054
{txt}{hline 9}{c BT}{hline 68}
     mean(diff) = mean({res}input_ksh_blue{txt} - {res}input_ksh_unma~d{txt})         t = {res} 23.3625
{txt} Ho: mean(diff) = 0                              degrees of freedom = {res}     740

 {txt}Ha: mean(diff) < 0           Ha: mean(diff) != 0           Ha: mean(diff) > 0
 Pr(T < t) = {res}1.0000         {txt}Pr(|T| > |t|) = {res}0.0000          {txt}Pr(T > t) = {res}0.0000
{txt}
{com}. 
.         // To export in nice-looking table formst, you can do something similar to above
.         preserve
{txt}
{com}.                 // Step 1: eshaping the dataset from "wide" to "long" 
.                 keep respondent_id input_ksh_blue input_ksh_unmarked
{txt}
{com}.                 reshape long input_ksh, i(respondent_id) j(plot,string)
{txt}(note: j = _blue _unmarked)

Data{col 36}wide{col 43}->{col 48}long
{hline 77}
Number of obs.                 {res}    1248   {txt}->{res}    2496
{txt}Number of variables            {res}       3   {txt}->{res}       3
{txt}j variable (2 values)                     ->   {res}plot
{txt}xij variables:
      {res}input_ksh_blue input_ksh_unmarked   {txt}->   {res}input_ksh
{txt}{hline 77}

{com}. 
.                 // Step 2: exporting into single table (similar to what you've done for Econ104)
.                 est clear 
{txt}
{com}.                 eststo unmarked:        estpost summarize       input_kshb if plot=="_unmarked"
{err}variable {bf}input_kshb{sf} not found
{txt}{search r(111):r(111);}

end of do-file

{search r(111):r(111);}

{com}. do "/Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3/Econ120_F20_Section3.do"
{txt}
{com}. * ---------------------------- *
. * Econ120 (J. Robinson, F2020) *
. * Section 3 (Oct. 19, 2020)        * NOTE: all the path directories are based on my own computer, 
. * TA: David Sungho Park        *       so you should change them according to yours.
. * ---------------------------- *
. 
. clear all
{txt}
{com}. set more off
{txt}
{com}. 
. cap noisily cd "/Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3/" // Note: I changed this from previous do-files for Sections 1 & 2
{res}/Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3
{txt}
{com}. 
. //log using "Econ120_F20_Section3.smcl", replace // you can uncomment this line if you want to keep a Stata log file
. 
. use "farming.dta", clear
{txt}
{com}. 
. // Getting sumstats 
. su kg_tdfert_blue kg_plantfert_blue packets_hyb_blue

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
kg_tdfert_~e {c |}{res}        822     12.3455    1.376406          0         25
{txt}kg_plantfe~e {c |}{res}        811    11.31751    3.389863          0         25
{txt}packets_hy~e {c |}{res}        816    1.370196    .4662883          0         10
{txt}
{com}. su kg_tdfert_unmarked kg_plantfert_unmarked packets_hyb_unmarked

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
kg_tdfert_~d {c |}{res}        820     8.09878    7.103199          0         75
{txt}kg_plantfe~d {c |}{res}        806    6.143238    6.342009          0         25
{txt}packets_hy~d {c |}{res}        812    1.314483    .5807212          0         10
{txt}
{com}. 
. // Testing for mean differences
. gen kg_tdfert_diff              = kg_tdfert_blue        - kg_tdfert_unmarked
{txt}(435 missing values generated)

{com}. gen kg_plantfert_diff   = kg_plantfert_blue - kg_plantfert_unmarked
{txt}(447 missing values generated)

{com}. gen packets_hyb_diff    = packets_hyb_blue      - packets_hyb_unmarked
{txt}(436 missing values generated)

{com}. 
. ttest kg_tdfert_diff    = 0

{txt}One-sample t test
{hline 9}{c TT}{hline 68}
Variable{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
kg_td~ff {c |}{res}{col 12}    813{col 22} 4.195572{col 34} .2448409{col 46} 6.981185{col 58} 3.714976{col 70} 4.676168
{txt}{hline 9}{c BT}{hline 68}
    mean = mean({res}kg_tdfert_diff{txt})                                   t = {res} 17.1359
{txt}Ho: mean = {res}0                                     {txt}degrees of freedom = {res}     812

    {txt}Ha: mean < {res}0                 {txt}Ha: mean != {res}0                 {txt}Ha: mean > {res}0
 {txt}Pr(T < t) = {res}1.0000         {txt}Pr(|T| > |t|) = {res}0.0000          {txt}Pr(T > t) = {res}0.0000
{txt}
{com}. ttest kg_plantfert_diff = 0

{txt}One-sample t test
{hline 9}{c TT}{hline 68}
Variable{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
kg_pl~ff {c |}{res}{col 12}    801{col 22} 5.152996{col 34} .2192189{col 46} 6.204321{col 58} 4.722684{col 70} 5.583308
{txt}{hline 9}{c BT}{hline 68}
    mean = mean({res}kg_plantfert_diff{txt})                                t = {res} 23.5062
{txt}Ho: mean = {res}0                                     {txt}degrees of freedom = {res}     800

    {txt}Ha: mean < {res}0                 {txt}Ha: mean != {res}0                 {txt}Ha: mean > {res}0
 {txt}Pr(T < t) = {res}1.0000         {txt}Pr(|T| > |t|) = {res}0.0000          {txt}Pr(T > t) = {res}0.0000
{txt}
{com}. ttest packets_hyb_diff  = 0

{txt}One-sample t test
{hline 9}{c TT}{hline 68}
Variable{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
packe~ff {c |}{res}{col 12}    812{col 22} .0559975{col 34} .0137451{col 46} .3916762{col 58} .0290173{col 70} .0829778
{txt}{hline 9}{c BT}{hline 68}
    mean = mean({res}packets_hyb_diff{txt})                                 t = {res}  4.0740
{txt}Ho: mean = {res}0                                     {txt}degrees of freedom = {res}     811

    {txt}Ha: mean < {res}0                 {txt}Ha: mean != {res}0                 {txt}Ha: mean > {res}0
 {txt}Pr(T < t) = {res}1.0000         {txt}Pr(|T| > |t|) = {res}0.0001          {txt}Pr(T > t) = {res}0.0000
{txt}
{com}. 
. // Constructing mean-difference table (similar to what you've done for Econ104)
. preserve
{txt}
{com}.         // First step: we need to reshape the dataset from "wide" format to "long" format
.         keep respondent_id kg_tdfert_unmarked kg_plantfert_unmarked packets_hyb_unmarked kg_tdfert_blue kg_plantfert_blue packets_hyb_blue 
{txt}
{com}.         reshape long kg_tdfert kg_plantfert packets_hyb, i(respondent_id) j(plot,string)
{txt}(note: j = _blue _unmarked)

Data{col 36}wide{col 43}->{col 48}long
{hline 77}
Number of obs.                 {res}    1248   {txt}->{res}    2496
{txt}Number of variables            {res}       7   {txt}->{res}       5
{txt}j variable (2 values)                     ->   {res}plot
{txt}xij variables:
      {res}kg_tdfert_blue kg_tdfert_unmarked   {txt}->   {res}kg_tdfert
kg_plantfert_blue kg_plantfert_unmarked   {txt}->   {res}kg_plantfert
  packets_hyb_blue packets_hyb_unmarked   {txt}->   {res}packets_hyb
{txt}{hline 77}

{com}. 
.         // Step 2: exporting into single table (similar to what you've done for Econ104)
.         est clear 
{txt}
{com}.         eststo unmarked:        estpost summarize       kg_tdfert kg_plantfert packets_hyb if plot=="_unmarked"

{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(sum_w)}{space 1}{space 1}{ralign 9:e(mean)}{space 1}{space 1}{ralign 9:e(Var)}{space 1}{space 1}{ralign 9:e(sd)}{space 1}{space 1}{ralign 9:e(min)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      820}}}{space 1}{space 1}{ralign 9:{res:{sf:      820}}}{space 1}{space 1}{ralign 9:{res:{sf:  8.09878}}}{space 1}{space 1}{ralign 9:{res:{sf: 50.45543}}}{space 1}{space 1}{ralign 9:{res:{sf: 7.103199}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      806}}}{space 1}{space 1}{ralign 9:{res:{sf:      806}}}{space 1}{space 1}{ralign 9:{res:{sf: 6.143238}}}{space 1}{space 1}{ralign 9:{res:{sf: 40.22108}}}{space 1}{space 1}{ralign 9:{res:{sf: 6.342009}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      812}}}{space 1}{space 1}{ralign 9:{res:{sf:      812}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.314483}}}{space 1}{space 1}{ralign 9:{res:{sf: .3372371}}}{space 1}{space 1}{ralign 9:{res:{sf: .5807212}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(max)}{space 1}{space 1}{ralign 9:e(sum)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       75}}}{space 1}{space 1}{ralign 9:{res:{sf:     6641}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       25}}}{space 1}{space 1}{ralign 9:{res:{sf:  4951.45}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       10}}}{space 1}{space 1}{ralign 9:{res:{sf:  1067.36}}}{space 1}

{com}.         eststo blue:            estpost summarize       kg_tdfert kg_plantfert packets_hyb if plot=="_blue"

{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(sum_w)}{space 1}{space 1}{ralign 9:e(mean)}{space 1}{space 1}{ralign 9:e(Var)}{space 1}{space 1}{ralign 9:e(sd)}{space 1}{space 1}{ralign 9:e(min)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      822}}}{space 1}{space 1}{ralign 9:{res:{sf:      822}}}{space 1}{space 1}{ralign 9:{res:{sf:  12.3455}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.894493}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.376406}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      811}}}{space 1}{space 1}{ralign 9:{res:{sf:      811}}}{space 1}{space 1}{ralign 9:{res:{sf: 11.31751}}}{space 1}{space 1}{ralign 9:{res:{sf: 11.49117}}}{space 1}{space 1}{ralign 9:{res:{sf: 3.389863}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      816}}}{space 1}{space 1}{ralign 9:{res:{sf:      816}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.370196}}}{space 1}{space 1}{ralign 9:{res:{sf: .2174247}}}{space 1}{space 1}{ralign 9:{res:{sf: .4662883}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(max)}{space 1}{space 1}{ralign 9:e(sum)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       25}}}{space 1}{space 1}{ralign 9:{res:{sf:    10148}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       25}}}{space 1}{space 1}{ralign 9:{res:{sf:   9178.5}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       10}}}{space 1}{space 1}{ralign 9:{res:{sf:  1118.08}}}{space 1}

{com}.         eststo difference:      estpost ttest           kg_tdfert kg_plantfert packets_hyb, by(plot) unequal

{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(b)}{space 1}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(se)}{space 1}{space 1}{ralign 9:e(t)}{space 1}{space 1}{ralign 9:e(df_t)}{space 1}{space 1}{ralign 9:e(p_l)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 4.246718}}}{space 1}{space 1}{ralign 9:{res:{sf:     1642}}}{space 1}{space 1}{ralign 9:{res:{sf: .2526574}}}{space 1}{space 1}{ralign 9:{res:{sf: 16.80821}}}{space 1}{space 1}{ralign 9:{res:{sf: 880.2708}}}{space 1}{space 1}{ralign 9:{res:{sf:        1}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 5.174271}}}{space 1}{space 1}{ralign 9:{res:{sf:     1617}}}{space 1}{space 1}{ralign 9:{res:{sf: .2531229}}}{space 1}{space 1}{ralign 9:{res:{sf: 20.44173}}}{space 1}{space 1}{ralign 9:{res:{sf: 1228.602}}}{space 1}{space 1}{ralign 9:{res:{sf:        1}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .0557133}}}{space 1}{space 1}{ralign 9:{res:{sf:     1628}}}{space 1}{space 1}{ralign 9:{res:{sf: .0261107}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.133735}}}{space 1}{space 1}{ralign 9:{res:{sf: 1550.406}}}{space 1}{space 1}{ralign 9:{res:{sf: .9834895}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(p)}{space 1}{space 1}{ralign 9:e(p_u)}{space 1}{space 1}{ralign 9:e(N_1)}{space 1}{space 1}{ralign 9:e(mu_1)}{space 1}{space 1}{ralign 9:e(N_2)}{space 1}{space 1}{ralign 9:e(mu_2)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 3.39e-55}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.69e-55}}}{space 1}{space 1}{ralign 9:{res:{sf:      822}}}{space 1}{space 1}{ralign 9:{res:{sf:  12.3455}}}{space 1}{space 1}{ralign 9:{res:{sf:      820}}}{space 1}{space 1}{ralign 9:{res:{sf:  8.09878}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 3.55e-80}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.78e-80}}}{space 1}{space 1}{ralign 9:{res:{sf:      811}}}{space 1}{space 1}{ralign 9:{res:{sf: 11.31751}}}{space 1}{space 1}{ralign 9:{res:{sf:      806}}}{space 1}{space 1}{ralign 9:{res:{sf: 6.143238}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf:  .033021}}}{space 1}{space 1}{ralign 9:{res:{sf: .0165105}}}{space 1}{space 1}{ralign 9:{res:{sf:      816}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.370196}}}{space 1}{space 1}{ralign 9:{res:{sf:      812}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.314483}}}{space 1}

{com}. 
.         esttab unmarked blue difference using "Section3_table1_raw.csv", replace  cells("mean(pattern(1 1 0) fmt(%9.2f)) b(pattern(0 0 1) fmt(%9.2f) star)" "sd(pattern(1 1 0) fmt(%9.2f) par) se(pattern(0 0 1) fmt(%9.2f) par)") starlevels(* 0.10 ** 0.05 *** 0.01)  plain 
{res}{txt}(output written to {browse  `"Section3_table1_raw.csv"'})

{com}. restore
{txt}
{com}. 
. // Calculating monetary cost of inputs
. gen input_ksh_blue = kg_tdfert_blue*65 + kg_plantfert_blue*70 + packets_hyb_blue*230
{txt}(488 missing values generated)

{com}. gen input_ksh_unmarked = kg_tdfert_unmarked*65 + kg_plantfert_unmarked*70 + packets_hyb_unmarked*230
{txt}(495 missing values generated)

{com}. 
. ttest input_ksh_blue = input_ksh_unmarked

{txt}Paired t test
{hline 9}{c TT}{hline 68}
Variable{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
input_~e {c |}{res}{col 12}    741{col 22} 1909.007{col 34} 10.58548{col 46} 288.1508{col 58} 1888.226{col 70} 1929.788
{txt}input_~d {c |}{res}{col 12}    741{col 22} 1265.847{col 34} 28.75187{col 46} 782.6636{col 58} 1209.402{col 70} 1322.292
{txt}{hline 9}{c +}{hline 68}
    diff {c |}{res}{col 12}    741{col 22} 643.1601{col 34} 27.52955{col 46} 749.3906{col 58} 589.1147{col 70} 697.2054
{txt}{hline 9}{c BT}{hline 68}
     mean(diff) = mean({res}input_ksh_blue{txt} - {res}input_ksh_unma~d{txt})         t = {res} 23.3625
{txt} Ho: mean(diff) = 0                              degrees of freedom = {res}     740

 {txt}Ha: mean(diff) < 0           Ha: mean(diff) != 0           Ha: mean(diff) > 0
 Pr(T < t) = {res}1.0000         {txt}Pr(|T| > |t|) = {res}0.0000          {txt}Pr(T > t) = {res}0.0000
{txt}
{com}. 
.         // To export in nice-looking table formst, you can do something similar to above
.         preserve
{txt}
{com}.                 // Step 1: eshaping the dataset from "wide" to "long" 
.                 keep respondent_id input_ksh_blue input_ksh_unmarked
{txt}
{com}.                 reshape long input_ksh, i(respondent_id) j(plot,string)
{txt}(note: j = _blue _unmarked)

Data{col 36}wide{col 43}->{col 48}long
{hline 77}
Number of obs.                 {res}    1248   {txt}->{res}    2496
{txt}Number of variables            {res}       3   {txt}->{res}       3
{txt}j variable (2 values)                     ->   {res}plot
{txt}xij variables:
      {res}input_ksh_blue input_ksh_unmarked   {txt}->   {res}input_ksh
{txt}{hline 77}

{com}. 
.                 // Step 2: exporting into single table (similar to what you've done for Econ104)
.                 est clear 
{txt}
{com}.                 eststo unmarked:        estpost summarize       input_ksh if plot=="_unmarked"

{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(sum_w)}{space 1}{space 1}{ralign 9:e(mean)}{space 1}{space 1}{ralign 9:e(Var)}{space 1}{space 1}{ralign 9:e(sd)}{space 1}{space 1}{ralign 9:e(min)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:input_ksh}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      753}}}{space 1}{space 1}{ralign 9:{res:{sf:      753}}}{space 1}{space 1}{ralign 9:{res:{sf: 1258.903}}}{space 1}{space 1}{ralign 9:{res:{sf: 609995.3}}}{space 1}{space 1}{ralign 9:{res:{sf:  781.022}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(max)}{space 1}{space 1}{ralign 9:e(sum)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:input_ksh}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     6095}}}{space 1}{space 1}{ralign 9:{res:{sf: 947954.3}}}{space 1}

{com}.                 eststo blue:            estpost summarize       input_ksh if plot=="_blue"

{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(sum_w)}{space 1}{space 1}{ralign 9:e(mean)}{space 1}{space 1}{ralign 9:e(Var)}{space 1}{space 1}{ralign 9:e(sd)}{space 1}{space 1}{ralign 9:e(min)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:input_ksh}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      760}}}{space 1}{space 1}{ralign 9:{res:{sf:      760}}}{space 1}{space 1}{ralign 9:{res:{sf: 1909.561}}}{space 1}{space 1}{ralign 9:{res:{sf:  81324.3}}}{space 1}{space 1}{ralign 9:{res:{sf: 285.1742}}}{space 1}{space 1}{ralign 9:{res:{sf:    812.5}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(max)}{space 1}{space 1}{ralign 9:e(sum)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:input_ksh}{space 1}{c |}{space 1}{ralign 9:{res:{sf:   3952.5}}}{space 1}{space 1}{ralign 9:{res:{sf:  1451267}}}{space 1}

{com}.                 eststo difference:      estpost ttest           input_ksh, by(plot) 

{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(b)}{space 1}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(se)}{space 1}{space 1}{ralign 9:e(t)}{space 1}{space 1}{ralign 9:e(df_t)}{space 1}{space 1}{ralign 9:e(p_l)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:input_ksh}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 650.6579}}}{space 1}{space 1}{ralign 9:{res:{sf:     1513}}}{space 1}{space 1}{ralign 9:{res:{sf: 30.17651}}}{space 1}{space 1}{ralign 9:{res:{sf: 21.56174}}}{space 1}{space 1}{ralign 9:{res:{sf:     1511}}}{space 1}{space 1}{ralign 9:{res:{sf:        1}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(p)}{space 1}{space 1}{ralign 9:e(p_u)}{space 1}{space 1}{ralign 9:e(N_1)}{space 1}{space 1}{ralign 9:e(mu_1)}{space 1}{space 1}{ralign 9:e(N_2)}{space 1}{space 1}{ralign 9:e(mu_2)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:input_ksh}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 4.05e-90}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.03e-90}}}{space 1}{space 1}{ralign 9:{res:{sf:      760}}}{space 1}{space 1}{ralign 9:{res:{sf: 1909.561}}}{space 1}{space 1}{ralign 9:{res:{sf:      753}}}{space 1}{space 1}{ralign 9:{res:{sf: 1258.903}}}{space 1}

{com}. 
.                 esttab unmarked blue difference using "Section3_table2_raw.csv", replace  cells("mean(pattern(1 1 0) fmt(%9.2f)) b(pattern(0 0 1) fmt(%9.2f) star)" "sd(pattern(1 1 0) fmt(%9.2f) par) se(pattern(0 0 1) fmt(%9.2f) par)") starlevels(* 0.10 ** 0.05 *** 0.01)  plain 
{res}{txt}(note: file Section3_table2_raw.csv not found)
(output written to {browse  `"Section3_table2_raw.csv"'})

{com}.         restore
{txt}
{com}. sss
{err}command {bf}sss{sf} is unrecognized
{txt}{search r(199):r(199);}

end of do-file

{search r(199):r(199);}

{com}. do "/Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3/Econ120_F20_Section3.do"
{txt}
{com}. * ---------------------------- *
. * Econ120 (J. Robinson, F2020) *
. * Section 3 (Oct. 19, 2020)        * NOTE: all the path directories are based on my own computer, 
. * TA: David Sungho Park        *       so you should change them according to yours.
. * ---------------------------- *
. 
. clear all
{txt}
{com}. set more off
{txt}
{com}. 
. cap noisily cd "/Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3/" // Note: I changed this from previous do-files for Sections 1 & 2
{res}/Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3
{txt}
{com}. 
. //log using "Econ120_F20_Section3.smcl", replace // you can uncomment this line if you want to keep a Stata log file
. 
. use "farming.dta", clear
{txt}
{com}. 
. // Getting sumstats 
. su kg_tdfert_blue kg_plantfert_blue packets_hyb_blue

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
kg_tdfert_~e {c |}{res}        822     12.3455    1.376406          0         25
{txt}kg_plantfe~e {c |}{res}        811    11.31751    3.389863          0         25
{txt}packets_hy~e {c |}{res}        816    1.370196    .4662883          0         10
{txt}
{com}. su kg_tdfert_unmarked kg_plantfert_unmarked packets_hyb_unmarked

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
kg_tdfert_~d {c |}{res}        820     8.09878    7.103199          0         75
{txt}kg_plantfe~d {c |}{res}        806    6.143238    6.342009          0         25
{txt}packets_hy~d {c |}{res}        812    1.314483    .5807212          0         10
{txt}
{com}. 
. // Testing for mean differences
. gen kg_tdfert_diff              = kg_tdfert_blue        - kg_tdfert_unmarked
{txt}(435 missing values generated)

{com}. gen kg_plantfert_diff   = kg_plantfert_blue - kg_plantfert_unmarked
{txt}(447 missing values generated)

{com}. gen packets_hyb_diff    = packets_hyb_blue      - packets_hyb_unmarked
{txt}(436 missing values generated)

{com}. 
. ttest kg_tdfert_diff    = 0

{txt}One-sample t test
{hline 9}{c TT}{hline 68}
Variable{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
kg_td~ff {c |}{res}{col 12}    813{col 22} 4.195572{col 34} .2448409{col 46} 6.981185{col 58} 3.714976{col 70} 4.676168
{txt}{hline 9}{c BT}{hline 68}
    mean = mean({res}kg_tdfert_diff{txt})                                   t = {res} 17.1359
{txt}Ho: mean = {res}0                                     {txt}degrees of freedom = {res}     812

    {txt}Ha: mean < {res}0                 {txt}Ha: mean != {res}0                 {txt}Ha: mean > {res}0
 {txt}Pr(T < t) = {res}1.0000         {txt}Pr(|T| > |t|) = {res}0.0000          {txt}Pr(T > t) = {res}0.0000
{txt}
{com}. ttest kg_plantfert_diff = 0

{txt}One-sample t test
{hline 9}{c TT}{hline 68}
Variable{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
kg_pl~ff {c |}{res}{col 12}    801{col 22} 5.152996{col 34} .2192189{col 46} 6.204321{col 58} 4.722684{col 70} 5.583308
{txt}{hline 9}{c BT}{hline 68}
    mean = mean({res}kg_plantfert_diff{txt})                                t = {res} 23.5062
{txt}Ho: mean = {res}0                                     {txt}degrees of freedom = {res}     800

    {txt}Ha: mean < {res}0                 {txt}Ha: mean != {res}0                 {txt}Ha: mean > {res}0
 {txt}Pr(T < t) = {res}1.0000         {txt}Pr(|T| > |t|) = {res}0.0000          {txt}Pr(T > t) = {res}0.0000
{txt}
{com}. ttest packets_hyb_diff  = 0

{txt}One-sample t test
{hline 9}{c TT}{hline 68}
Variable{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
packe~ff {c |}{res}{col 12}    812{col 22} .0559975{col 34} .0137451{col 46} .3916762{col 58} .0290173{col 70} .0829778
{txt}{hline 9}{c BT}{hline 68}
    mean = mean({res}packets_hyb_diff{txt})                                 t = {res}  4.0740
{txt}Ho: mean = {res}0                                     {txt}degrees of freedom = {res}     811

    {txt}Ha: mean < {res}0                 {txt}Ha: mean != {res}0                 {txt}Ha: mean > {res}0
 {txt}Pr(T < t) = {res}1.0000         {txt}Pr(|T| > |t|) = {res}0.0001          {txt}Pr(T > t) = {res}0.0000
{txt}
{com}. 
. // Constructing mean-difference table (similar to what you've done for Econ104)
. preserve
{txt}
{com}.         // First step: we need to reshape the dataset from "wide" format to "long" format
.         keep respondent_id kg_tdfert_unmarked kg_plantfert_unmarked packets_hyb_unmarked kg_tdfert_blue kg_plantfert_blue packets_hyb_blue 
{txt}
{com}.         reshape long kg_tdfert kg_plantfert packets_hyb, i(respondent_id) j(plot,string)
{txt}(note: j = _blue _unmarked)

Data{col 36}wide{col 43}->{col 48}long
{hline 77}
Number of obs.                 {res}    1248   {txt}->{res}    2496
{txt}Number of variables            {res}       7   {txt}->{res}       5
{txt}j variable (2 values)                     ->   {res}plot
{txt}xij variables:
      {res}kg_tdfert_blue kg_tdfert_unmarked   {txt}->   {res}kg_tdfert
kg_plantfert_blue kg_plantfert_unmarked   {txt}->   {res}kg_plantfert
  packets_hyb_blue packets_hyb_unmarked   {txt}->   {res}packets_hyb
{txt}{hline 77}

{com}. 
.         // Step 2: exporting into single table (similar to what you've done for Econ104)
.         est clear 
{txt}
{com}.         eststo unmarked:        estpost summarize       kg_tdfert kg_plantfert packets_hyb if plot=="_unmarked"

{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(sum_w)}{space 1}{space 1}{ralign 9:e(mean)}{space 1}{space 1}{ralign 9:e(Var)}{space 1}{space 1}{ralign 9:e(sd)}{space 1}{space 1}{ralign 9:e(min)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      820}}}{space 1}{space 1}{ralign 9:{res:{sf:      820}}}{space 1}{space 1}{ralign 9:{res:{sf:  8.09878}}}{space 1}{space 1}{ralign 9:{res:{sf: 50.45543}}}{space 1}{space 1}{ralign 9:{res:{sf: 7.103199}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      806}}}{space 1}{space 1}{ralign 9:{res:{sf:      806}}}{space 1}{space 1}{ralign 9:{res:{sf: 6.143238}}}{space 1}{space 1}{ralign 9:{res:{sf: 40.22108}}}{space 1}{space 1}{ralign 9:{res:{sf: 6.342009}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      812}}}{space 1}{space 1}{ralign 9:{res:{sf:      812}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.314483}}}{space 1}{space 1}{ralign 9:{res:{sf: .3372371}}}{space 1}{space 1}{ralign 9:{res:{sf: .5807212}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(max)}{space 1}{space 1}{ralign 9:e(sum)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       75}}}{space 1}{space 1}{ralign 9:{res:{sf:     6641}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       25}}}{space 1}{space 1}{ralign 9:{res:{sf:  4951.45}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       10}}}{space 1}{space 1}{ralign 9:{res:{sf:  1067.36}}}{space 1}

{com}.         eststo blue:            estpost summarize       kg_tdfert kg_plantfert packets_hyb if plot=="_blue"

{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(sum_w)}{space 1}{space 1}{ralign 9:e(mean)}{space 1}{space 1}{ralign 9:e(Var)}{space 1}{space 1}{ralign 9:e(sd)}{space 1}{space 1}{ralign 9:e(min)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      822}}}{space 1}{space 1}{ralign 9:{res:{sf:      822}}}{space 1}{space 1}{ralign 9:{res:{sf:  12.3455}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.894493}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.376406}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      811}}}{space 1}{space 1}{ralign 9:{res:{sf:      811}}}{space 1}{space 1}{ralign 9:{res:{sf: 11.31751}}}{space 1}{space 1}{ralign 9:{res:{sf: 11.49117}}}{space 1}{space 1}{ralign 9:{res:{sf: 3.389863}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      816}}}{space 1}{space 1}{ralign 9:{res:{sf:      816}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.370196}}}{space 1}{space 1}{ralign 9:{res:{sf: .2174247}}}{space 1}{space 1}{ralign 9:{res:{sf: .4662883}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(max)}{space 1}{space 1}{ralign 9:e(sum)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       25}}}{space 1}{space 1}{ralign 9:{res:{sf:    10148}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       25}}}{space 1}{space 1}{ralign 9:{res:{sf:   9178.5}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       10}}}{space 1}{space 1}{ralign 9:{res:{sf:  1118.08}}}{space 1}

{com}.         eststo difference:      estpost ttest           kg_tdfert kg_plantfert packets_hyb, by(plot) unequal

{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(b)}{space 1}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(se)}{space 1}{space 1}{ralign 9:e(t)}{space 1}{space 1}{ralign 9:e(df_t)}{space 1}{space 1}{ralign 9:e(p_l)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 4.246718}}}{space 1}{space 1}{ralign 9:{res:{sf:     1642}}}{space 1}{space 1}{ralign 9:{res:{sf: .2526574}}}{space 1}{space 1}{ralign 9:{res:{sf: 16.80821}}}{space 1}{space 1}{ralign 9:{res:{sf: 880.2708}}}{space 1}{space 1}{ralign 9:{res:{sf:        1}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 5.174271}}}{space 1}{space 1}{ralign 9:{res:{sf:     1617}}}{space 1}{space 1}{ralign 9:{res:{sf: .2531229}}}{space 1}{space 1}{ralign 9:{res:{sf: 20.44173}}}{space 1}{space 1}{ralign 9:{res:{sf: 1228.602}}}{space 1}{space 1}{ralign 9:{res:{sf:        1}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .0557133}}}{space 1}{space 1}{ralign 9:{res:{sf:     1628}}}{space 1}{space 1}{ralign 9:{res:{sf: .0261107}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.133735}}}{space 1}{space 1}{ralign 9:{res:{sf: 1550.406}}}{space 1}{space 1}{ralign 9:{res:{sf: .9834895}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(p)}{space 1}{space 1}{ralign 9:e(p_u)}{space 1}{space 1}{ralign 9:e(N_1)}{space 1}{space 1}{ralign 9:e(mu_1)}{space 1}{space 1}{ralign 9:e(N_2)}{space 1}{space 1}{ralign 9:e(mu_2)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 3.39e-55}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.69e-55}}}{space 1}{space 1}{ralign 9:{res:{sf:      822}}}{space 1}{space 1}{ralign 9:{res:{sf:  12.3455}}}{space 1}{space 1}{ralign 9:{res:{sf:      820}}}{space 1}{space 1}{ralign 9:{res:{sf:  8.09878}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 3.55e-80}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.78e-80}}}{space 1}{space 1}{ralign 9:{res:{sf:      811}}}{space 1}{space 1}{ralign 9:{res:{sf: 11.31751}}}{space 1}{space 1}{ralign 9:{res:{sf:      806}}}{space 1}{space 1}{ralign 9:{res:{sf: 6.143238}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf:  .033021}}}{space 1}{space 1}{ralign 9:{res:{sf: .0165105}}}{space 1}{space 1}{ralign 9:{res:{sf:      816}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.370196}}}{space 1}{space 1}{ralign 9:{res:{sf:      812}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.314483}}}{space 1}

{com}. 
.         esttab unmarked blue difference using "Section3_table1_raw.csv", replace  cells("mean(pattern(1 1 0) fmt(%9.2f)) b(pattern(0 0 1) fmt(%9.2f) star)" "sd(pattern(1 1 0) fmt(%9.2f) par) se(pattern(0 0 1) fmt(%9.2f) par)") starlevels(* 0.10 ** 0.05 *** 0.01)  plain 
{res}{txt}(output written to {browse  `"Section3_table1_raw.csv"'})

{com}. restore
{txt}
{com}. 
. // Calculating monetary cost of inputs
. gen input_ksh_blue = kg_tdfert_blue*65 + kg_plantfert_blue*70 + packets_hyb_blue*230
{txt}(488 missing values generated)

{com}. gen input_ksh_unmarked = kg_tdfert_unmarked*65 + kg_plantfert_unmarked*70 + packets_hyb_unmarked*230
{txt}(495 missing values generated)

{com}. 
. ttest input_ksh_blue = input_ksh_unmarked

{txt}Paired t test
{hline 9}{c TT}{hline 68}
Variable{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
input_~e {c |}{res}{col 12}    741{col 22} 1909.007{col 34} 10.58548{col 46} 288.1508{col 58} 1888.226{col 70} 1929.788
{txt}input_~d {c |}{res}{col 12}    741{col 22} 1265.847{col 34} 28.75187{col 46} 782.6636{col 58} 1209.402{col 70} 1322.292
{txt}{hline 9}{c +}{hline 68}
    diff {c |}{res}{col 12}    741{col 22} 643.1601{col 34} 27.52955{col 46} 749.3906{col 58} 589.1147{col 70} 697.2054
{txt}{hline 9}{c BT}{hline 68}
     mean(diff) = mean({res}input_ksh_blue{txt} - {res}input_ksh_unma~d{txt})         t = {res} 23.3625
{txt} Ho: mean(diff) = 0                              degrees of freedom = {res}     740

 {txt}Ha: mean(diff) < 0           Ha: mean(diff) != 0           Ha: mean(diff) > 0
 Pr(T < t) = {res}1.0000         {txt}Pr(|T| > |t|) = {res}0.0000          {txt}Pr(T > t) = {res}0.0000
{txt}
{com}. 
.         // To export in nice-looking table formst, you can do something similar to above
.         preserve
{txt}
{com}.                 // Step 1: eshaping the dataset from "wide" to "long" 
.                 keep respondent_id input_ksh_blue input_ksh_unmarked
{txt}
{com}.                 reshape long input_ksh, i(respondent_id) j(plot,string)
{txt}(note: j = _blue _unmarked)

Data{col 36}wide{col 43}->{col 48}long
{hline 77}
Number of obs.                 {res}    1248   {txt}->{res}    2496
{txt}Number of variables            {res}       3   {txt}->{res}       3
{txt}j variable (2 values)                     ->   {res}plot
{txt}xij variables:
      {res}input_ksh_blue input_ksh_unmarked   {txt}->   {res}input_ksh
{txt}{hline 77}

{com}. 
.                 // Step 2: exporting into single table (similar to what you've done for Econ104)
.                 est clear 
{txt}
{com}.                 eststo unmarked:        estpost summarize       input_ksh if plot=="_unmarked"

{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(sum_w)}{space 1}{space 1}{ralign 9:e(mean)}{space 1}{space 1}{ralign 9:e(Var)}{space 1}{space 1}{ralign 9:e(sd)}{space 1}{space 1}{ralign 9:e(min)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:input_ksh}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      753}}}{space 1}{space 1}{ralign 9:{res:{sf:      753}}}{space 1}{space 1}{ralign 9:{res:{sf: 1258.903}}}{space 1}{space 1}{ralign 9:{res:{sf: 609995.3}}}{space 1}{space 1}{ralign 9:{res:{sf:  781.022}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(max)}{space 1}{space 1}{ralign 9:e(sum)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:input_ksh}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     6095}}}{space 1}{space 1}{ralign 9:{res:{sf: 947954.3}}}{space 1}

{com}.                 eststo blue:            estpost summarize       input_ksh if plot=="_blue"

{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(sum_w)}{space 1}{space 1}{ralign 9:e(mean)}{space 1}{space 1}{ralign 9:e(Var)}{space 1}{space 1}{ralign 9:e(sd)}{space 1}{space 1}{ralign 9:e(min)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:input_ksh}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      760}}}{space 1}{space 1}{ralign 9:{res:{sf:      760}}}{space 1}{space 1}{ralign 9:{res:{sf: 1909.561}}}{space 1}{space 1}{ralign 9:{res:{sf:  81324.3}}}{space 1}{space 1}{ralign 9:{res:{sf: 285.1742}}}{space 1}{space 1}{ralign 9:{res:{sf:    812.5}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(max)}{space 1}{space 1}{ralign 9:e(sum)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:input_ksh}{space 1}{c |}{space 1}{ralign 9:{res:{sf:   3952.5}}}{space 1}{space 1}{ralign 9:{res:{sf:  1451267}}}{space 1}

{com}.                 eststo difference:      estpost ttest           input_ksh, by(plot) unequal

{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(b)}{space 1}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(se)}{space 1}{space 1}{ralign 9:e(t)}{space 1}{space 1}{ralign 9:e(df_t)}{space 1}{space 1}{ralign 9:e(p_l)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:input_ksh}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 650.6579}}}{space 1}{space 1}{ralign 9:{res:{sf:     1513}}}{space 1}{space 1}{ralign 9:{res:{sf: 30.28353}}}{space 1}{space 1}{ralign 9:{res:{sf: 21.48553}}}{space 1}{space 1}{ralign 9:{res:{sf: 947.4087}}}{space 1}{space 1}{ralign 9:{res:{sf:        1}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(p)}{space 1}{space 1}{ralign 9:e(p_u)}{space 1}{space 1}{ralign 9:e(N_1)}{space 1}{space 1}{ralign 9:e(mu_1)}{space 1}{space 1}{ralign 9:e(N_2)}{space 1}{space 1}{ralign 9:e(mu_2)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:input_ksh}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 9.90e-84}}}{space 1}{space 1}{ralign 9:{res:{sf: 4.95e-84}}}{space 1}{space 1}{ralign 9:{res:{sf:      760}}}{space 1}{space 1}{ralign 9:{res:{sf: 1909.561}}}{space 1}{space 1}{ralign 9:{res:{sf:      753}}}{space 1}{space 1}{ralign 9:{res:{sf: 1258.903}}}{space 1}

{com}. 
.                 esttab unmarked blue difference using "Section3_table2_raw.csv", replace  cells("mean(pattern(1 1 0) fmt(%9.2f)) b(pattern(0 0 1) fmt(%9.2f) star)" "sd(pattern(1 1 0) fmt(%9.2f) par) se(pattern(0 0 1) fmt(%9.2f) par)") starlevels(* 0.10 ** 0.05 *** 0.01)  plain 
{res}{txt}(output written to {browse  `"Section3_table2_raw.csv"'})

{com}.         restore
{txt}
{com}. sss
{err}command {bf}sss{sf} is unrecognized
{txt}{search r(199):r(199);}

end of do-file

{search r(199):r(199);}

{com}. do "/var/folders/wy/26794k5d4ydcf0nqcms58wkr0000gn/T//SD43744.000000"
{txt}
{com}.                 keep respondent_id input_ksh_blue input_ksh_unmarked
{txt}
{com}.                 reshape long input_ksh, i(respondent_id) j(plot,string)
{txt}(note: j = _blue _unmarked)

Data{col 36}wide{col 43}->{col 48}long
{hline 77}
Number of obs.                 {res}    1248   {txt}->{res}    2496
{txt}Number of variables            {res}       3   {txt}->{res}       3
{txt}j variable (2 values)                     ->   {res}plot
{txt}xij variables:
      {res}input_ksh_blue input_ksh_unmarked   {txt}->   {res}input_ksh
{txt}{hline 77}

{com}. 
.                 // Step 2: exporting into single table (similar to what you've done for Econ104)
.                 est clear 
{txt}
{com}.                 eststo unmarked:        estpost summarize       input_ksh if plot=="_unmarked"

{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(sum_w)}{space 1}{space 1}{ralign 9:e(mean)}{space 1}{space 1}{ralign 9:e(Var)}{space 1}{space 1}{ralign 9:e(sd)}{space 1}{space 1}{ralign 9:e(min)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:input_ksh}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      753}}}{space 1}{space 1}{ralign 9:{res:{sf:      753}}}{space 1}{space 1}{ralign 9:{res:{sf: 1258.903}}}{space 1}{space 1}{ralign 9:{res:{sf: 609995.3}}}{space 1}{space 1}{ralign 9:{res:{sf:  781.022}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(max)}{space 1}{space 1}{ralign 9:e(sum)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:input_ksh}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     6095}}}{space 1}{space 1}{ralign 9:{res:{sf: 947954.3}}}{space 1}

{com}.                 eststo blue:            estpost summarize       input_ksh if plot=="_blue"

{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(sum_w)}{space 1}{space 1}{ralign 9:e(mean)}{space 1}{space 1}{ralign 9:e(Var)}{space 1}{space 1}{ralign 9:e(sd)}{space 1}{space 1}{ralign 9:e(min)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:input_ksh}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      760}}}{space 1}{space 1}{ralign 9:{res:{sf:      760}}}{space 1}{space 1}{ralign 9:{res:{sf: 1909.561}}}{space 1}{space 1}{ralign 9:{res:{sf:  81324.3}}}{space 1}{space 1}{ralign 9:{res:{sf: 285.1742}}}{space 1}{space 1}{ralign 9:{res:{sf:    812.5}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(max)}{space 1}{space 1}{ralign 9:e(sum)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:input_ksh}{space 1}{c |}{space 1}{ralign 9:{res:{sf:   3952.5}}}{space 1}{space 1}{ralign 9:{res:{sf:  1451267}}}{space 1}

{com}.                 eststo difference:      estpost ttest           input_ksh, by(plot) unequal

{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(b)}{space 1}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(se)}{space 1}{space 1}{ralign 9:e(t)}{space 1}{space 1}{ralign 9:e(df_t)}{space 1}{space 1}{ralign 9:e(p_l)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:input_ksh}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 650.6579}}}{space 1}{space 1}{ralign 9:{res:{sf:     1513}}}{space 1}{space 1}{ralign 9:{res:{sf: 30.28353}}}{space 1}{space 1}{ralign 9:{res:{sf: 21.48553}}}{space 1}{space 1}{ralign 9:{res:{sf: 947.4087}}}{space 1}{space 1}{ralign 9:{res:{sf:        1}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(p)}{space 1}{space 1}{ralign 9:e(p_u)}{space 1}{space 1}{ralign 9:e(N_1)}{space 1}{space 1}{ralign 9:e(mu_1)}{space 1}{space 1}{ralign 9:e(N_2)}{space 1}{space 1}{ralign 9:e(mu_2)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:input_ksh}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 9.90e-84}}}{space 1}{space 1}{ralign 9:{res:{sf: 4.95e-84}}}{space 1}{space 1}{ralign 9:{res:{sf:      760}}}{space 1}{space 1}{ralign 9:{res:{sf: 1909.561}}}{space 1}{space 1}{ralign 9:{res:{sf:      753}}}{space 1}{space 1}{ralign 9:{res:{sf: 1258.903}}}{space 1}

{com}. 
{txt}end of do-file

{com}. ttest input_ksh, by(plot) unequal

{txt}Two-sample t test with unequal variances
{hline 9}{c TT}{hline 68}
   Group{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
   _blue {c |}{res}{col 12}    760{col 22} 1909.561{col 34} 10.34435{col 46} 285.1742{col 58} 1889.254{col 70} 1929.868
{txt}_unmarke {c |}{res}{col 12}    753{col 22} 1258.903{col 34} 28.46202{col 46}  781.022{col 58} 1203.029{col 70} 1314.778
{txt}{hline 9}{c +}{hline 68}
combined {c |}{res}{col 12}  1,513{col 22} 1585.738{col 34} 17.24812{col 46} 670.9054{col 58} 1551.905{col 70}  1619.57
{txt}{hline 9}{c +}{hline 68}
    diff {c |}{res}{col 22} 650.6579{col 34} 30.28353{col 58} 591.2273{col 70} 710.0884
{txt}{hline 9}{c BT}{hline 68}
    diff = mean({res}_blue{txt}) - mean({res}_unmarke{txt})                           t = {res} 21.4855
{txt}Ho: diff = 0                     Satterthwaite's degrees of freedom = {res} 947.409

    {txt}Ha: diff < 0                 Ha: diff != 0                 Ha: diff > 0
 Pr(T < t) = {res}1.0000         {txt}Pr(|T| > |t|) = {res}0.0000          {txt}Pr(T > t) = {res}0.0000

{com}. br

. su input_ksh 

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
{space 3}input_ksh {c |}{res}      1,513    1585.738    670.9054          0       6095

{com}. do "/Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3/Econ120_F20_Section3.do"
{txt}
{com}. * ---------------------------- *
. * Econ120 (J. Robinson, F2020) *
. * Section 3 (Oct. 19, 2020)        * NOTE: all the path directories are based on my own computer, 
. * TA: David Sungho Park        *       so you should change them according to yours.
. * ---------------------------- *
. 
. clear all
{txt}
{com}. set more off
{txt}
{com}. 
. cap noisily cd "/Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3/" // Note: I changed this from previous do-files for Sections 1 & 2
{res}/Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3
{txt}
{com}. 
. //log using "Econ120_F20_Section3.smcl", replace // you can uncomment this line if you want to keep a Stata log file
. 
. use "farming.dta", clear
{txt}
{com}. 
. // Getting sumstats 
. su kg_tdfert_blue kg_plantfert_blue packets_hyb_blue

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
kg_tdfert_~e {c |}{res}        822     12.3455    1.376406          0         25
{txt}kg_plantfe~e {c |}{res}        811    11.31751    3.389863          0         25
{txt}packets_hy~e {c |}{res}        816    1.370196    .4662883          0         10
{txt}
{com}. su kg_tdfert_unmarked kg_plantfert_unmarked packets_hyb_unmarked

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
kg_tdfert_~d {c |}{res}        820     8.09878    7.103199          0         75
{txt}kg_plantfe~d {c |}{res}        806    6.143238    6.342009          0         25
{txt}packets_hy~d {c |}{res}        812    1.314483    .5807212          0         10
{txt}
{com}. 
. // Testing for mean differences
. gen kg_tdfert_diff              = kg_tdfert_blue        - kg_tdfert_unmarked
{txt}(435 missing values generated)

{com}. gen kg_plantfert_diff   = kg_plantfert_blue - kg_plantfert_unmarked
{txt}(447 missing values generated)

{com}. gen packets_hyb_diff    = packets_hyb_blue      - packets_hyb_unmarked
{txt}(436 missing values generated)

{com}. 
. ttest kg_tdfert_diff    = 0

{txt}One-sample t test
{hline 9}{c TT}{hline 68}
Variable{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
kg_td~ff {c |}{res}{col 12}    813{col 22} 4.195572{col 34} .2448409{col 46} 6.981185{col 58} 3.714976{col 70} 4.676168
{txt}{hline 9}{c BT}{hline 68}
    mean = mean({res}kg_tdfert_diff{txt})                                   t = {res} 17.1359
{txt}Ho: mean = {res}0                                     {txt}degrees of freedom = {res}     812

    {txt}Ha: mean < {res}0                 {txt}Ha: mean != {res}0                 {txt}Ha: mean > {res}0
 {txt}Pr(T < t) = {res}1.0000         {txt}Pr(|T| > |t|) = {res}0.0000          {txt}Pr(T > t) = {res}0.0000
{txt}
{com}. ttest kg_plantfert_diff = 0

{txt}One-sample t test
{hline 9}{c TT}{hline 68}
Variable{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
kg_pl~ff {c |}{res}{col 12}    801{col 22} 5.152996{col 34} .2192189{col 46} 6.204321{col 58} 4.722684{col 70} 5.583308
{txt}{hline 9}{c BT}{hline 68}
    mean = mean({res}kg_plantfert_diff{txt})                                t = {res} 23.5062
{txt}Ho: mean = {res}0                                     {txt}degrees of freedom = {res}     800

    {txt}Ha: mean < {res}0                 {txt}Ha: mean != {res}0                 {txt}Ha: mean > {res}0
 {txt}Pr(T < t) = {res}1.0000         {txt}Pr(|T| > |t|) = {res}0.0000          {txt}Pr(T > t) = {res}0.0000
{txt}
{com}. ttest packets_hyb_diff  = 0

{txt}One-sample t test
{hline 9}{c TT}{hline 68}
Variable{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
packe~ff {c |}{res}{col 12}    812{col 22} .0559975{col 34} .0137451{col 46} .3916762{col 58} .0290173{col 70} .0829778
{txt}{hline 9}{c BT}{hline 68}
    mean = mean({res}packets_hyb_diff{txt})                                 t = {res}  4.0740
{txt}Ho: mean = {res}0                                     {txt}degrees of freedom = {res}     811

    {txt}Ha: mean < {res}0                 {txt}Ha: mean != {res}0                 {txt}Ha: mean > {res}0
 {txt}Pr(T < t) = {res}1.0000         {txt}Pr(|T| > |t|) = {res}0.0001          {txt}Pr(T > t) = {res}0.0000
{txt}
{com}. 
. // Constructing mean-difference table (similar to what you've done for Econ104)
. preserve
{txt}
{com}.         // First step: we need to reshape the dataset from "wide" format to "long" format
.         keep respondent_id kg_tdfert_unmarked kg_plantfert_unmarked packets_hyb_unmarked kg_tdfert_blue kg_plantfert_blue packets_hyb_blue 
{txt}
{com}.         reshape long kg_tdfert kg_plantfert packets_hyb, i(respondent_id) j(plot,string)
{txt}(note: j = _blue _unmarked)

Data{col 36}wide{col 43}->{col 48}long
{hline 77}
Number of obs.                 {res}    1248   {txt}->{res}    2496
{txt}Number of variables            {res}       7   {txt}->{res}       5
{txt}j variable (2 values)                     ->   {res}plot
{txt}xij variables:
      {res}kg_tdfert_blue kg_tdfert_unmarked   {txt}->   {res}kg_tdfert
kg_plantfert_blue kg_plantfert_unmarked   {txt}->   {res}kg_plantfert
  packets_hyb_blue packets_hyb_unmarked   {txt}->   {res}packets_hyb
{txt}{hline 77}

{com}. 
.         // Step 2: exporting into single table (similar to what you've done for Econ104)
.         est clear 
{txt}
{com}.         eststo unmarked:        estpost summarize       kg_tdfert kg_plantfert packets_hyb if plot=="_unmarked"

{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(sum_w)}{space 1}{space 1}{ralign 9:e(mean)}{space 1}{space 1}{ralign 9:e(Var)}{space 1}{space 1}{ralign 9:e(sd)}{space 1}{space 1}{ralign 9:e(min)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      820}}}{space 1}{space 1}{ralign 9:{res:{sf:      820}}}{space 1}{space 1}{ralign 9:{res:{sf:  8.09878}}}{space 1}{space 1}{ralign 9:{res:{sf: 50.45543}}}{space 1}{space 1}{ralign 9:{res:{sf: 7.103199}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      806}}}{space 1}{space 1}{ralign 9:{res:{sf:      806}}}{space 1}{space 1}{ralign 9:{res:{sf: 6.143238}}}{space 1}{space 1}{ralign 9:{res:{sf: 40.22108}}}{space 1}{space 1}{ralign 9:{res:{sf: 6.342009}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      812}}}{space 1}{space 1}{ralign 9:{res:{sf:      812}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.314483}}}{space 1}{space 1}{ralign 9:{res:{sf: .3372371}}}{space 1}{space 1}{ralign 9:{res:{sf: .5807212}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(max)}{space 1}{space 1}{ralign 9:e(sum)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       75}}}{space 1}{space 1}{ralign 9:{res:{sf:     6641}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       25}}}{space 1}{space 1}{ralign 9:{res:{sf:  4951.45}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       10}}}{space 1}{space 1}{ralign 9:{res:{sf:  1067.36}}}{space 1}

{com}.         eststo blue:            estpost summarize       kg_tdfert kg_plantfert packets_hyb if plot=="_blue"

{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(sum_w)}{space 1}{space 1}{ralign 9:e(mean)}{space 1}{space 1}{ralign 9:e(Var)}{space 1}{space 1}{ralign 9:e(sd)}{space 1}{space 1}{ralign 9:e(min)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      822}}}{space 1}{space 1}{ralign 9:{res:{sf:      822}}}{space 1}{space 1}{ralign 9:{res:{sf:  12.3455}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.894493}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.376406}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      811}}}{space 1}{space 1}{ralign 9:{res:{sf:      811}}}{space 1}{space 1}{ralign 9:{res:{sf: 11.31751}}}{space 1}{space 1}{ralign 9:{res:{sf: 11.49117}}}{space 1}{space 1}{ralign 9:{res:{sf: 3.389863}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      816}}}{space 1}{space 1}{ralign 9:{res:{sf:      816}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.370196}}}{space 1}{space 1}{ralign 9:{res:{sf: .2174247}}}{space 1}{space 1}{ralign 9:{res:{sf: .4662883}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(max)}{space 1}{space 1}{ralign 9:e(sum)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       25}}}{space 1}{space 1}{ralign 9:{res:{sf:    10148}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       25}}}{space 1}{space 1}{ralign 9:{res:{sf:   9178.5}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       10}}}{space 1}{space 1}{ralign 9:{res:{sf:  1118.08}}}{space 1}

{com}.         eststo difference:      estpost ttest           kg_tdfert kg_plantfert packets_hyb, by(plot) unequal

{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(b)}{space 1}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(se)}{space 1}{space 1}{ralign 9:e(t)}{space 1}{space 1}{ralign 9:e(df_t)}{space 1}{space 1}{ralign 9:e(p_l)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 4.246718}}}{space 1}{space 1}{ralign 9:{res:{sf:     1642}}}{space 1}{space 1}{ralign 9:{res:{sf: .2526574}}}{space 1}{space 1}{ralign 9:{res:{sf: 16.80821}}}{space 1}{space 1}{ralign 9:{res:{sf: 880.2708}}}{space 1}{space 1}{ralign 9:{res:{sf:        1}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 5.174271}}}{space 1}{space 1}{ralign 9:{res:{sf:     1617}}}{space 1}{space 1}{ralign 9:{res:{sf: .2531229}}}{space 1}{space 1}{ralign 9:{res:{sf: 20.44173}}}{space 1}{space 1}{ralign 9:{res:{sf: 1228.602}}}{space 1}{space 1}{ralign 9:{res:{sf:        1}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .0557133}}}{space 1}{space 1}{ralign 9:{res:{sf:     1628}}}{space 1}{space 1}{ralign 9:{res:{sf: .0261107}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.133735}}}{space 1}{space 1}{ralign 9:{res:{sf: 1550.406}}}{space 1}{space 1}{ralign 9:{res:{sf: .9834895}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(p)}{space 1}{space 1}{ralign 9:e(p_u)}{space 1}{space 1}{ralign 9:e(N_1)}{space 1}{space 1}{ralign 9:e(mu_1)}{space 1}{space 1}{ralign 9:e(N_2)}{space 1}{space 1}{ralign 9:e(mu_2)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 3.39e-55}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.69e-55}}}{space 1}{space 1}{ralign 9:{res:{sf:      822}}}{space 1}{space 1}{ralign 9:{res:{sf:  12.3455}}}{space 1}{space 1}{ralign 9:{res:{sf:      820}}}{space 1}{space 1}{ralign 9:{res:{sf:  8.09878}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 3.55e-80}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.78e-80}}}{space 1}{space 1}{ralign 9:{res:{sf:      811}}}{space 1}{space 1}{ralign 9:{res:{sf: 11.31751}}}{space 1}{space 1}{ralign 9:{res:{sf:      806}}}{space 1}{space 1}{ralign 9:{res:{sf: 6.143238}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf:  .033021}}}{space 1}{space 1}{ralign 9:{res:{sf: .0165105}}}{space 1}{space 1}{ralign 9:{res:{sf:      816}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.370196}}}{space 1}{space 1}{ralign 9:{res:{sf:      812}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.314483}}}{space 1}

{com}. 
.         esttab unmarked blue difference using "Section3_table1_raw.csv", replace  cells("mean(pattern(1 1 0) fmt(%9.2f)) b(pattern(0 0 1) fmt(%9.2f) star)" "sd(pattern(1 1 0) fmt(%9.2f) par) se(pattern(0 0 1) fmt(%9.2f) par)") starlevels(* 0.10 ** 0.05 *** 0.01)  plain 
{res}{txt}(output written to {browse  `"Section3_table1_raw.csv"'})

{com}. restore
{txt}
{com}. 
. // Calculating monetary cost of inputs
. gen input_ksh_blue = kg_tdfert_blue*65 + kg_plantfert_blue*70 + packets_hyb_blue*230
{txt}(488 missing values generated)

{com}. gen input_ksh_unmarked = kg_tdfert_unmarked*65 + kg_plantfert_unmarked*70 + packets_hyb_unmarked*230
{txt}(495 missing values generated)

{com}. 
. ttest input_ksh_blue = input_ksh_unmarked

{txt}Paired t test
{hline 9}{c TT}{hline 68}
Variable{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
input_~e {c |}{res}{col 12}    741{col 22} 1909.007{col 34} 10.58548{col 46} 288.1508{col 58} 1888.226{col 70} 1929.788
{txt}input_~d {c |}{res}{col 12}    741{col 22} 1265.847{col 34} 28.75187{col 46} 782.6636{col 58} 1209.402{col 70} 1322.292
{txt}{hline 9}{c +}{hline 68}
    diff {c |}{res}{col 12}    741{col 22} 643.1601{col 34} 27.52955{col 46} 749.3906{col 58} 589.1147{col 70} 697.2054
{txt}{hline 9}{c BT}{hline 68}
     mean(diff) = mean({res}input_ksh_blue{txt} - {res}input_ksh_unma~d{txt})         t = {res} 23.3625
{txt} Ho: mean(diff) = 0                              degrees of freedom = {res}     740

 {txt}Ha: mean(diff) < 0           Ha: mean(diff) != 0           Ha: mean(diff) > 0
 Pr(T < t) = {res}1.0000         {txt}Pr(|T| > |t|) = {res}0.0000          {txt}Pr(T > t) = {res}0.0000
{txt}
{com}. 
.         // FYI: To export in nice-looking table format, you can do something similar to above
.         preserve
{txt}
{com}.                 // Step 1: eshaping the dataset from "wide" to "long" 
.                 keep respondent_id input_ksh_blue input_ksh_unmarked
{txt}
{com}.                 reshape long input_ksh, i(respondent_id) j(plot,string)
{txt}(note: j = _blue _unmarked)

Data{col 36}wide{col 43}->{col 48}long
{hline 77}
Number of obs.                 {res}    1248   {txt}->{res}    2496
{txt}Number of variables            {res}       3   {txt}->{res}       3
{txt}j variable (2 values)                     ->   {res}plot
{txt}xij variables:
      {res}input_ksh_blue input_ksh_unmarked   {txt}->   {res}input_ksh
{txt}{hline 77}

{com}. 
.                 // Step 2: exporting into single table (similar to what you've done for Econ104)
.                 est clear 
{txt}
{com}.                 eststo unmarked:        estpost summarize       input_ksh if plot=="_unmarked"

{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(sum_w)}{space 1}{space 1}{ralign 9:e(mean)}{space 1}{space 1}{ralign 9:e(Var)}{space 1}{space 1}{ralign 9:e(sd)}{space 1}{space 1}{ralign 9:e(min)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:input_ksh}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      753}}}{space 1}{space 1}{ralign 9:{res:{sf:      753}}}{space 1}{space 1}{ralign 9:{res:{sf: 1258.903}}}{space 1}{space 1}{ralign 9:{res:{sf: 609995.3}}}{space 1}{space 1}{ralign 9:{res:{sf:  781.022}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(max)}{space 1}{space 1}{ralign 9:e(sum)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:input_ksh}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     6095}}}{space 1}{space 1}{ralign 9:{res:{sf: 947954.3}}}{space 1}

{com}.                 eststo blue:            estpost summarize       input_ksh if plot=="_blue"

{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(sum_w)}{space 1}{space 1}{ralign 9:e(mean)}{space 1}{space 1}{ralign 9:e(Var)}{space 1}{space 1}{ralign 9:e(sd)}{space 1}{space 1}{ralign 9:e(min)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:input_ksh}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      760}}}{space 1}{space 1}{ralign 9:{res:{sf:      760}}}{space 1}{space 1}{ralign 9:{res:{sf: 1909.561}}}{space 1}{space 1}{ralign 9:{res:{sf:  81324.3}}}{space 1}{space 1}{ralign 9:{res:{sf: 285.1742}}}{space 1}{space 1}{ralign 9:{res:{sf:    812.5}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(max)}{space 1}{space 1}{ralign 9:e(sum)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:input_ksh}{space 1}{c |}{space 1}{ralign 9:{res:{sf:   3952.5}}}{space 1}{space 1}{ralign 9:{res:{sf:  1451267}}}{space 1}

{com}.                 eststo difference:      estpost ttest           input_ksh, by(plot) unequal

{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(b)}{space 1}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(se)}{space 1}{space 1}{ralign 9:e(t)}{space 1}{space 1}{ralign 9:e(df_t)}{space 1}{space 1}{ralign 9:e(p_l)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:input_ksh}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 650.6579}}}{space 1}{space 1}{ralign 9:{res:{sf:     1513}}}{space 1}{space 1}{ralign 9:{res:{sf: 30.28353}}}{space 1}{space 1}{ralign 9:{res:{sf: 21.48553}}}{space 1}{space 1}{ralign 9:{res:{sf: 947.4087}}}{space 1}{space 1}{ralign 9:{res:{sf:        1}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(p)}{space 1}{space 1}{ralign 9:e(p_u)}{space 1}{space 1}{ralign 9:e(N_1)}{space 1}{space 1}{ralign 9:e(mu_1)}{space 1}{space 1}{ralign 9:e(N_2)}{space 1}{space 1}{ralign 9:e(mu_2)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:input_ksh}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 9.90e-84}}}{space 1}{space 1}{ralign 9:{res:{sf: 4.95e-84}}}{space 1}{space 1}{ralign 9:{res:{sf:      760}}}{space 1}{space 1}{ralign 9:{res:{sf: 1909.561}}}{space 1}{space 1}{ralign 9:{res:{sf:      753}}}{space 1}{space 1}{ralign 9:{res:{sf: 1258.903}}}{space 1}

{com}. 
.                 esttab unmarked blue difference using "Section3_table2_raw.csv", replace  cells("mean(pattern(1 1 0) fmt(%9.2f)) b(pattern(0 0 1) fmt(%9.2f) star)" "sd(pattern(1 1 0) fmt(%9.2f) par) se(pattern(0 0 1) fmt(%9.2f) par)") starlevels(* 0.10 ** 0.05 *** 0.01)  plain 
{res}{txt}(output written to {browse  `"Section3_table2_raw.csv"'})

{com}.         restore
{txt}
{com}. 
. // Calculating rate of return
. gen rate_of_return = 
{err}invalid syntax
{txt}{search r(198):r(198);}

end of do-file

{search r(198):r(198);}

{com}. do "/var/folders/wy/26794k5d4ydcf0nqcms58wkr0000gn/T//SD43744.000000"
{txt}
{com}. gen rate_of_return = ((revenue_blue - revenue_unmarked) - (input_ksh_blue - input_ksh_unmarked)) / (input_ksh_blue - input_ksh_unmarked)
{txt}(626 missing values generated)

{com}. 
{txt}end of do-file

{com}. su rate_of_return 

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
rate_of_re~n {c |}{res}        622     2.10442    29.47147  -303.4385   313.5361

{com}. do "/var/folders/wy/26794k5d4ydcf0nqcms58wkr0000gn/T//SD43744.000000"
{txt}
{com}. su rate_of_return, d

                       {txt}rate_of_return
{hline 61}
      Percentiles      Smallest
 1%    {res} -43.0784      -303.4385
{txt} 5%    {res} -13.5147      -115.2545
{txt}10%    {res}-7.141827      -82.52691       {txt}Obs         {res}        622
{txt}25%    {res}-1.924888      -70.56084       {txt}Sum of Wgt. {res}        622

{txt}50%    {res} .3028125                      {txt}Mean          {res}  2.10442
                        {txt}Largest       Std. Dev.     {res} 29.47147
{txt}75%    {res}  3.27173       240.9508
{txt}90%    {res} 8.119684       262.5536       {txt}Variance      {res} 868.5675
{txt}95%    {res} 18.81494        313.536       {txt}Skewness      {res} 4.151109
{txt}99%    {res} 77.63403       313.5361       {txt}Kurtosis      {res} 77.86307
{txt}
{com}. 
{txt}end of do-file

{com}. do "/var/folders/wy/26794k5d4ydcf0nqcms58wkr0000gn/T//SD43744.000000"
{txt}
{com}. histogram revenue_blue, saving(histogram_revenue_blue, replace) xtitle("revenue (Ksh)") ytitle("percentage of farmers") title("Distribution of revenue on blue plot")
{txt}(bin={res}28{txt}, start={res}0{txt}, width={res}653.48319{txt})
{res}{txt}(note: file histogram_revenue_blue.gph not found)
{res}{txt}(file histogram_revenue_blue.gph saved)

{com}. 
{txt}end of do-file

{com}. do "/var/folders/wy/26794k5d4ydcf0nqcms58wkr0000gn/T//SD43744.000000"
{txt}
{com}. histogram revenue_blue, saving(histogram_revenue_blue.pdf, replace) xtitle("revenue (Ksh)") ytitle("percentage of farmers") title("Distribution of revenue on blue plot")
{txt}(bin={res}28{txt}, start={res}0{txt}, width={res}653.48319{txt})
{res}{txt}(note: file histogram_revenue_blue.pdf not found)
{res}{txt}(file histogram_revenue_blue.pdf saved)

{com}. 
{txt}end of do-file

{com}. do "/var/folders/wy/26794k5d4ydcf0nqcms58wkr0000gn/T//SD43744.000000"
{txt}
{com}. * ---------------------------- *
. * Econ120 (J. Robinson, F2020) *
. * Section 3 (Oct. 19, 2020)        * NOTE: all the path directories are based on my own computer, 
. * TA: David Sungho Park        *       so you should change them according to yours.
. * ---------------------------- *
. 
. clear all
{txt}
{com}. set more off
{txt}
{com}. 
. cap noisily cd "/Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3/" // Note: I changed this from previous do-files for Sections 1 & 2
{res}/Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3
{txt}
{com}. 
. //log using "Econ120_F20_Section3.smcl", replace // you can uncomment this line if you want to keep a Stata log file
. 
. use "farming.dta", clear
{txt}
{com}. 
. // Getting sumstats 
. su kg_tdfert_blue kg_plantfert_blue packets_hyb_blue

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
kg_tdfert_~e {c |}{res}        822     12.3455    1.376406          0         25
{txt}kg_plantfe~e {c |}{res}        811    11.31751    3.389863          0         25
{txt}packets_hy~e {c |}{res}        816    1.370196    .4662883          0         10
{txt}
{com}. su kg_tdfert_unmarked kg_plantfert_unmarked packets_hyb_unmarked

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
kg_tdfert_~d {c |}{res}        820     8.09878    7.103199          0         75
{txt}kg_plantfe~d {c |}{res}        806    6.143238    6.342009          0         25
{txt}packets_hy~d {c |}{res}        812    1.314483    .5807212          0         10
{txt}
{com}. 
. // Testing for mean differences
. gen kg_tdfert_diff              = kg_tdfert_blue        - kg_tdfert_unmarked
{txt}(435 missing values generated)

{com}. gen kg_plantfert_diff   = kg_plantfert_blue - kg_plantfert_unmarked
{txt}(447 missing values generated)

{com}. gen packets_hyb_diff    = packets_hyb_blue      - packets_hyb_unmarked
{txt}(436 missing values generated)

{com}. 
. ttest kg_tdfert_diff    = 0

{txt}One-sample t test
{hline 9}{c TT}{hline 68}
Variable{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
kg_td~ff {c |}{res}{col 12}    813{col 22} 4.195572{col 34} .2448409{col 46} 6.981185{col 58} 3.714976{col 70} 4.676168
{txt}{hline 9}{c BT}{hline 68}
    mean = mean({res}kg_tdfert_diff{txt})                                   t = {res} 17.1359
{txt}Ho: mean = {res}0                                     {txt}degrees of freedom = {res}     812

    {txt}Ha: mean < {res}0                 {txt}Ha: mean != {res}0                 {txt}Ha: mean > {res}0
 {txt}Pr(T < t) = {res}1.0000         {txt}Pr(|T| > |t|) = {res}0.0000          {txt}Pr(T > t) = {res}0.0000
{txt}
{com}. ttest kg_plantfert_diff = 0

{txt}One-sample t test
{hline 9}{c TT}{hline 68}
Variable{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
kg_pl~ff {c |}{res}{col 12}    801{col 22} 5.152996{col 34} .2192189{col 46} 6.204321{col 58} 4.722684{col 70} 5.583308
{txt}{hline 9}{c BT}{hline 68}
    mean = mean({res}kg_plantfert_diff{txt})                                t = {res} 23.5062
{txt}Ho: mean = {res}0                                     {txt}degrees of freedom = {res}     800

    {txt}Ha: mean < {res}0                 {txt}Ha: mean != {res}0                 {txt}Ha: mean > {res}0
 {txt}Pr(T < t) = {res}1.0000         {txt}Pr(|T| > |t|) = {res}0.0000          {txt}Pr(T > t) = {res}0.0000
{txt}
{com}. ttest packets_hyb_diff  = 0

{txt}One-sample t test
{hline 9}{c TT}{hline 68}
Variable{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
packe~ff {c |}{res}{col 12}    812{col 22} .0559975{col 34} .0137451{col 46} .3916762{col 58} .0290173{col 70} .0829778
{txt}{hline 9}{c BT}{hline 68}
    mean = mean({res}packets_hyb_diff{txt})                                 t = {res}  4.0740
{txt}Ho: mean = {res}0                                     {txt}degrees of freedom = {res}     811

    {txt}Ha: mean < {res}0                 {txt}Ha: mean != {res}0                 {txt}Ha: mean > {res}0
 {txt}Pr(T < t) = {res}1.0000         {txt}Pr(|T| > |t|) = {res}0.0001          {txt}Pr(T > t) = {res}0.0000
{txt}
{com}. 
. // Constructing mean-difference table (similar to what you've done for Econ104)
. preserve
{txt}
{com}.         // First step: we need to reshape the dataset from "wide" format to "long" format
.         keep respondent_id kg_tdfert_unmarked kg_plantfert_unmarked packets_hyb_unmarked kg_tdfert_blue kg_plantfert_blue packets_hyb_blue 
{txt}
{com}.         reshape long kg_tdfert kg_plantfert packets_hyb, i(respondent_id) j(plot,string)
{txt}(note: j = _blue _unmarked)

Data{col 36}wide{col 43}->{col 48}long
{hline 77}
Number of obs.                 {res}    1248   {txt}->{res}    2496
{txt}Number of variables            {res}       7   {txt}->{res}       5
{txt}j variable (2 values)                     ->   {res}plot
{txt}xij variables:
      {res}kg_tdfert_blue kg_tdfert_unmarked   {txt}->   {res}kg_tdfert
kg_plantfert_blue kg_plantfert_unmarked   {txt}->   {res}kg_plantfert
  packets_hyb_blue packets_hyb_unmarked   {txt}->   {res}packets_hyb
{txt}{hline 77}

{com}. 
.         // Step 2: exporting into single table (similar to what you've done for Econ104)
.         est clear 
{txt}
{com}.         eststo unmarked:        estpost summarize       kg_tdfert kg_plantfert packets_hyb if plot=="_unmarked"

{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(sum_w)}{space 1}{space 1}{ralign 9:e(mean)}{space 1}{space 1}{ralign 9:e(Var)}{space 1}{space 1}{ralign 9:e(sd)}{space 1}{space 1}{ralign 9:e(min)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      820}}}{space 1}{space 1}{ralign 9:{res:{sf:      820}}}{space 1}{space 1}{ralign 9:{res:{sf:  8.09878}}}{space 1}{space 1}{ralign 9:{res:{sf: 50.45543}}}{space 1}{space 1}{ralign 9:{res:{sf: 7.103199}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      806}}}{space 1}{space 1}{ralign 9:{res:{sf:      806}}}{space 1}{space 1}{ralign 9:{res:{sf: 6.143238}}}{space 1}{space 1}{ralign 9:{res:{sf: 40.22108}}}{space 1}{space 1}{ralign 9:{res:{sf: 6.342009}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      812}}}{space 1}{space 1}{ralign 9:{res:{sf:      812}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.314483}}}{space 1}{space 1}{ralign 9:{res:{sf: .3372371}}}{space 1}{space 1}{ralign 9:{res:{sf: .5807212}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(max)}{space 1}{space 1}{ralign 9:e(sum)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       75}}}{space 1}{space 1}{ralign 9:{res:{sf:     6641}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       25}}}{space 1}{space 1}{ralign 9:{res:{sf:  4951.45}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       10}}}{space 1}{space 1}{ralign 9:{res:{sf:  1067.36}}}{space 1}

{com}.         eststo blue:            estpost summarize       kg_tdfert kg_plantfert packets_hyb if plot=="_blue"

{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(sum_w)}{space 1}{space 1}{ralign 9:e(mean)}{space 1}{space 1}{ralign 9:e(Var)}{space 1}{space 1}{ralign 9:e(sd)}{space 1}{space 1}{ralign 9:e(min)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      822}}}{space 1}{space 1}{ralign 9:{res:{sf:      822}}}{space 1}{space 1}{ralign 9:{res:{sf:  12.3455}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.894493}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.376406}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      811}}}{space 1}{space 1}{ralign 9:{res:{sf:      811}}}{space 1}{space 1}{ralign 9:{res:{sf: 11.31751}}}{space 1}{space 1}{ralign 9:{res:{sf: 11.49117}}}{space 1}{space 1}{ralign 9:{res:{sf: 3.389863}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      816}}}{space 1}{space 1}{ralign 9:{res:{sf:      816}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.370196}}}{space 1}{space 1}{ralign 9:{res:{sf: .2174247}}}{space 1}{space 1}{ralign 9:{res:{sf: .4662883}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(max)}{space 1}{space 1}{ralign 9:e(sum)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       25}}}{space 1}{space 1}{ralign 9:{res:{sf:    10148}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       25}}}{space 1}{space 1}{ralign 9:{res:{sf:   9178.5}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       10}}}{space 1}{space 1}{ralign 9:{res:{sf:  1118.08}}}{space 1}

{com}.         eststo difference:      estpost ttest           kg_tdfert kg_plantfert packets_hyb, by(plot) unequal

{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(b)}{space 1}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(se)}{space 1}{space 1}{ralign 9:e(t)}{space 1}{space 1}{ralign 9:e(df_t)}{space 1}{space 1}{ralign 9:e(p_l)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 4.246718}}}{space 1}{space 1}{ralign 9:{res:{sf:     1642}}}{space 1}{space 1}{ralign 9:{res:{sf: .2526574}}}{space 1}{space 1}{ralign 9:{res:{sf: 16.80821}}}{space 1}{space 1}{ralign 9:{res:{sf: 880.2708}}}{space 1}{space 1}{ralign 9:{res:{sf:        1}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 5.174271}}}{space 1}{space 1}{ralign 9:{res:{sf:     1617}}}{space 1}{space 1}{ralign 9:{res:{sf: .2531229}}}{space 1}{space 1}{ralign 9:{res:{sf: 20.44173}}}{space 1}{space 1}{ralign 9:{res:{sf: 1228.602}}}{space 1}{space 1}{ralign 9:{res:{sf:        1}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .0557133}}}{space 1}{space 1}{ralign 9:{res:{sf:     1628}}}{space 1}{space 1}{ralign 9:{res:{sf: .0261107}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.133735}}}{space 1}{space 1}{ralign 9:{res:{sf: 1550.406}}}{space 1}{space 1}{ralign 9:{res:{sf: .9834895}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(p)}{space 1}{space 1}{ralign 9:e(p_u)}{space 1}{space 1}{ralign 9:e(N_1)}{space 1}{space 1}{ralign 9:e(mu_1)}{space 1}{space 1}{ralign 9:e(N_2)}{space 1}{space 1}{ralign 9:e(mu_2)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 3.39e-55}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.69e-55}}}{space 1}{space 1}{ralign 9:{res:{sf:      822}}}{space 1}{space 1}{ralign 9:{res:{sf:  12.3455}}}{space 1}{space 1}{ralign 9:{res:{sf:      820}}}{space 1}{space 1}{ralign 9:{res:{sf:  8.09878}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 3.55e-80}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.78e-80}}}{space 1}{space 1}{ralign 9:{res:{sf:      811}}}{space 1}{space 1}{ralign 9:{res:{sf: 11.31751}}}{space 1}{space 1}{ralign 9:{res:{sf:      806}}}{space 1}{space 1}{ralign 9:{res:{sf: 6.143238}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf:  .033021}}}{space 1}{space 1}{ralign 9:{res:{sf: .0165105}}}{space 1}{space 1}{ralign 9:{res:{sf:      816}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.370196}}}{space 1}{space 1}{ralign 9:{res:{sf:      812}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.314483}}}{space 1}

{com}. 
.         esttab unmarked blue difference using "Section3_table1_raw.csv", replace  cells("mean(pattern(1 1 0) fmt(%9.2f)) b(pattern(0 0 1) fmt(%9.2f) star)" "sd(pattern(1 1 0) fmt(%9.2f) par) se(pattern(0 0 1) fmt(%9.2f) par)") starlevels(* 0.10 ** 0.05 *** 0.01)  plain 
{res}{txt}(output written to {browse  `"Section3_table1_raw.csv"'})

{com}. restore
{txt}
{com}. 
. // Calculating monetary cost of inputs
. gen input_ksh_blue = kg_tdfert_blue*65 + kg_plantfert_blue*70 + packets_hyb_blue*230
{txt}(488 missing values generated)

{com}. gen input_ksh_unmarked = kg_tdfert_unmarked*65 + kg_plantfert_unmarked*70 + packets_hyb_unmarked*230
{txt}(495 missing values generated)

{com}. 
. ttest input_ksh_blue = input_ksh_unmarked

{txt}Paired t test
{hline 9}{c TT}{hline 68}
Variable{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
input_~e {c |}{res}{col 12}    741{col 22} 1909.007{col 34} 10.58548{col 46} 288.1508{col 58} 1888.226{col 70} 1929.788
{txt}input_~d {c |}{res}{col 12}    741{col 22} 1265.847{col 34} 28.75187{col 46} 782.6636{col 58} 1209.402{col 70} 1322.292
{txt}{hline 9}{c +}{hline 68}
    diff {c |}{res}{col 12}    741{col 22} 643.1601{col 34} 27.52955{col 46} 749.3906{col 58} 589.1147{col 70} 697.2054
{txt}{hline 9}{c BT}{hline 68}
     mean(diff) = mean({res}input_ksh_blue{txt} - {res}input_ksh_unma~d{txt})         t = {res} 23.3625
{txt} Ho: mean(diff) = 0                              degrees of freedom = {res}     740

 {txt}Ha: mean(diff) < 0           Ha: mean(diff) != 0           Ha: mean(diff) > 0
 Pr(T < t) = {res}1.0000         {txt}Pr(|T| > |t|) = {res}0.0000          {txt}Pr(T > t) = {res}0.0000
{txt}
{com}. 
.         // FYI: To export in nice-looking table format, you can do something similar to above
.         preserve
{txt}
{com}.                 // Step 1: eshaping the dataset from "wide" to "long" 
.                 keep respondent_id input_ksh_blue input_ksh_unmarked
{txt}
{com}.                 reshape long input_ksh, i(respondent_id) j(plot,string)
{txt}(note: j = _blue _unmarked)

Data{col 36}wide{col 43}->{col 48}long
{hline 77}
Number of obs.                 {res}    1248   {txt}->{res}    2496
{txt}Number of variables            {res}       3   {txt}->{res}       3
{txt}j variable (2 values)                     ->   {res}plot
{txt}xij variables:
      {res}input_ksh_blue input_ksh_unmarked   {txt}->   {res}input_ksh
{txt}{hline 77}

{com}. 
.                 // Step 2: exporting into single table (similar to what you've done for Econ104)
.                 est clear 
{txt}
{com}.                 eststo unmarked:        estpost summarize       input_ksh if plot=="_unmarked"

{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(sum_w)}{space 1}{space 1}{ralign 9:e(mean)}{space 1}{space 1}{ralign 9:e(Var)}{space 1}{space 1}{ralign 9:e(sd)}{space 1}{space 1}{ralign 9:e(min)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:input_ksh}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      753}}}{space 1}{space 1}{ralign 9:{res:{sf:      753}}}{space 1}{space 1}{ralign 9:{res:{sf: 1258.903}}}{space 1}{space 1}{ralign 9:{res:{sf: 609995.3}}}{space 1}{space 1}{ralign 9:{res:{sf:  781.022}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(max)}{space 1}{space 1}{ralign 9:e(sum)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:input_ksh}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     6095}}}{space 1}{space 1}{ralign 9:{res:{sf: 947954.3}}}{space 1}

{com}.                 eststo blue:            estpost summarize       input_ksh if plot=="_blue"

{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(sum_w)}{space 1}{space 1}{ralign 9:e(mean)}{space 1}{space 1}{ralign 9:e(Var)}{space 1}{space 1}{ralign 9:e(sd)}{space 1}{space 1}{ralign 9:e(min)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:input_ksh}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      760}}}{space 1}{space 1}{ralign 9:{res:{sf:      760}}}{space 1}{space 1}{ralign 9:{res:{sf: 1909.561}}}{space 1}{space 1}{ralign 9:{res:{sf:  81324.3}}}{space 1}{space 1}{ralign 9:{res:{sf: 285.1742}}}{space 1}{space 1}{ralign 9:{res:{sf:    812.5}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(max)}{space 1}{space 1}{ralign 9:e(sum)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:input_ksh}{space 1}{c |}{space 1}{ralign 9:{res:{sf:   3952.5}}}{space 1}{space 1}{ralign 9:{res:{sf:  1451267}}}{space 1}

{com}.                 eststo difference:      estpost ttest           input_ksh, by(plot) unequal

{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(b)}{space 1}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(se)}{space 1}{space 1}{ralign 9:e(t)}{space 1}{space 1}{ralign 9:e(df_t)}{space 1}{space 1}{ralign 9:e(p_l)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:input_ksh}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 650.6579}}}{space 1}{space 1}{ralign 9:{res:{sf:     1513}}}{space 1}{space 1}{ralign 9:{res:{sf: 30.28353}}}{space 1}{space 1}{ralign 9:{res:{sf: 21.48553}}}{space 1}{space 1}{ralign 9:{res:{sf: 947.4087}}}{space 1}{space 1}{ralign 9:{res:{sf:        1}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(p)}{space 1}{space 1}{ralign 9:e(p_u)}{space 1}{space 1}{ralign 9:e(N_1)}{space 1}{space 1}{ralign 9:e(mu_1)}{space 1}{space 1}{ralign 9:e(N_2)}{space 1}{space 1}{ralign 9:e(mu_2)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:input_ksh}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 9.90e-84}}}{space 1}{space 1}{ralign 9:{res:{sf: 4.95e-84}}}{space 1}{space 1}{ralign 9:{res:{sf:      760}}}{space 1}{space 1}{ralign 9:{res:{sf: 1909.561}}}{space 1}{space 1}{ralign 9:{res:{sf:      753}}}{space 1}{space 1}{ralign 9:{res:{sf: 1258.903}}}{space 1}

{com}. 
.                 esttab unmarked blue difference using "Section3_table2_raw.csv", replace  cells("mean(pattern(1 1 0) fmt(%9.2f)) b(pattern(0 0 1) fmt(%9.2f) star)" "sd(pattern(1 1 0) fmt(%9.2f) par) se(pattern(0 0 1) fmt(%9.2f) par)") starlevels(* 0.10 ** 0.05 *** 0.01)  plain 
{res}{txt}(output written to {browse  `"Section3_table2_raw.csv"'})

{com}.         restore
{txt}
{com}. 
. // Calculating rate of return
. gen rate_of_return = ((revenue_blue - revenue_unmarked) - (input_ksh_blue - input_ksh_unmarked)) / (input_ksh_blue - input_ksh_unmarked)
{txt}(626 missing values generated)

{com}. su rate_of_return, d

                       {txt}rate_of_return
{hline 61}
      Percentiles      Smallest
 1%    {res} -43.0784      -303.4385
{txt} 5%    {res} -13.5147      -115.2545
{txt}10%    {res}-7.141827      -82.52691       {txt}Obs         {res}        622
{txt}25%    {res}-1.924888      -70.56084       {txt}Sum of Wgt. {res}        622

{txt}50%    {res} .3028125                      {txt}Mean          {res}  2.10442
                        {txt}Largest       Std. Dev.     {res} 29.47147
{txt}75%    {res}  3.27173       240.9508
{txt}90%    {res} 8.119684       262.5536       {txt}Variance      {res} 868.5675
{txt}95%    {res} 18.81494        313.536       {txt}Skewness      {res} 4.151109
{txt}99%    {res} 77.63403       313.5361       {txt}Kurtosis      {res} 77.86307
{txt}
{com}. 
. // Histograms
. histogram revenue_blue, saving(histogram_revenue_blue, replace) xtitle("revenue (Ksh)") ytitle("percentage of farmers") title("Distribution of revenue on blue plot")
{txt}(bin={res}28{txt}, start={res}0{txt}, width={res}653.48319{txt})
{res}{txt}(note: file histogram_revenue_blue.gph not found)
{res}{txt}(file histogram_revenue_blue.gph saved)

{com}. graph export "histogram_revenue_blue.pdf", replace // this line is necessary to save in PDF format
{txt}(file /Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3/histogram_revenue_blue.pdf written in PDF format)

{com}. 
. sss
{err}command {bf}sss{sf} is unrecognized
{txt}{search r(199):r(199);}

end of do-file

{search r(199):r(199);}

{com}. do "/var/folders/wy/26794k5d4ydcf0nqcms58wkr0000gn/T//SD43744.000000"
{txt}
{com}. kdensity revenue_blue, saving(histogram_revenue_blue, replace) xtitle("revenue (Ksh)") ytitle("percentage of farmers") title("Distribution of revenue on blue plot")
{res}{txt}(file histogram_revenue_blue.gph saved)

{com}. graph export "kdensity_revenue_blue.pdf", replace // this line is necessary to save in PDF format
{txt}(file /Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3/kdensity_revenue_blue.pdf written in PDF format)

{com}. 
{txt}end of do-file

{com}. do "/var/folders/wy/26794k5d4ydcf0nqcms58wkr0000gn/T//SD43744.000000"
{txt}
{com}. twoway (kdensity revenue_blue) (kdensity revenue_unmarked, lpattern("-")), saving(kdensity_both, replace) xtitle("revenue (Ksh)") ytitle("Percentage of farmers") legend(order(1 "Blue Plot" 2 "Unmarked plot"));
{err}option {bf:;} not allowed
{txt}{search r(198):r(198);}

end of do-file

{search r(198):r(198);}

{com}. do "/var/folders/wy/26794k5d4ydcf0nqcms58wkr0000gn/T//SD43744.000000"
{txt}
{com}. twoway (kdensity revenue_blue) (kdensity revenue_unmarked, lpattern("-")), saving(kdensity_both, replace) xtitle("revenue (Ksh)") ytitle("Percentage of farmers") legend(order(1 "Blue Plot" 2 "Unmarked plot"))
{res}{txt}(note: file kdensity_both.gph not found)
{res}{txt}(file kdensity_both.gph saved)

{com}. graph export "both_revenue_blue.pdf", replace // this line is necessary to save in PDF format
{txt}(file /Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3/both_revenue_blue.pdf written in PDF format)

{com}. 
{txt}end of do-file

{com}. do "/var/folders/wy/26794k5d4ydcf0nqcms58wkr0000gn/T//SD43744.000000"
{txt}
{com}. su rate_of_return, d

                       {txt}rate_of_return
{hline 61}
      Percentiles      Smallest
 1%    {res} -43.0784      -303.4385
{txt} 5%    {res} -13.5147      -115.2545
{txt}10%    {res}-7.141827      -82.52691       {txt}Obs         {res}        622
{txt}25%    {res}-1.924888      -70.56084       {txt}Sum of Wgt. {res}        622

{txt}50%    {res} .3028125                      {txt}Mean          {res}  2.10442
                        {txt}Largest       Std. Dev.     {res} 29.47147
{txt}75%    {res}  3.27173       240.9508
{txt}90%    {res} 8.119684       262.5536       {txt}Variance      {res} 868.5675
{txt}95%    {res} 18.81494        313.536       {txt}Skewness      {res} 4.151109
{txt}99%    {res} 77.63403       313.5361       {txt}Kurtosis      {res} 77.86307
{txt}
{com}. 
{txt}end of do-file

{com}. do "/var/folders/wy/26794k5d4ydcf0nqcms58wkr0000gn/T//SD43744.000000"
{txt}
{com}. su rate_of_return, d

                       {txt}rate_of_return
{hline 61}
      Percentiles      Smallest
 1%    {res} -43.0784      -303.4385
{txt} 5%    {res} -13.5147      -115.2545
{txt}10%    {res}-7.141827      -82.52691       {txt}Obs         {res}        622
{txt}25%    {res}-1.924888      -70.56084       {txt}Sum of Wgt. {res}        622

{txt}50%    {res} .3028125                      {txt}Mean          {res}  2.10442
                        {txt}Largest       Std. Dev.     {res} 29.47147
{txt}75%    {res}  3.27173       240.9508
{txt}90%    {res} 8.119684       262.5536       {txt}Variance      {res} 868.5675
{txt}95%    {res} 18.81494        313.536       {txt}Skewness      {res} 4.151109
{txt}99%    {res} 77.63403       313.5361       {txt}Kurtosis      {res} 77.86307
{txt}
{com}. drop if rate_of_return < `p1'
{err}invalid syntax
{txt}{search r(198):r(198);}

end of do-file

{search r(198):r(198);}

{com}. do "/var/folders/wy/26794k5d4ydcf0nqcms58wkr0000gn/T//SD43744.000000"
{txt}
{com}. su rate_of_return, d

                       {txt}rate_of_return
{hline 61}
      Percentiles      Smallest
 1%    {res} -43.0784      -303.4385
{txt} 5%    {res} -13.5147      -115.2545
{txt}10%    {res}-7.141827      -82.52691       {txt}Obs         {res}        622
{txt}25%    {res}-1.924888      -70.56084       {txt}Sum of Wgt. {res}        622

{txt}50%    {res} .3028125                      {txt}Mean          {res}  2.10442
                        {txt}Largest       Std. Dev.     {res} 29.47147
{txt}75%    {res}  3.27173       240.9508
{txt}90%    {res} 8.119684       262.5536       {txt}Variance      {res} 868.5675
{txt}95%    {res} 18.81494        313.536       {txt}Skewness      {res} 4.151109
{txt}99%    {res} 77.63403       313.5361       {txt}Kurtosis      {res} 77.86307
{txt}
{com}. drop if rate_of_return < `r(p1)'
{txt}(6 observations deleted)

{com}. 
{txt}end of do-file

{com}. do "/Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3/Econ120_F20_Section3.do"
{txt}
{com}. * ---------------------------- *
. * Econ120 (J. Robinson, F2020) *
. * Section 3 (Oct. 19, 2020)        * NOTE: all the path directories are based on my own computer, 
. * TA: David Sungho Park        *       so you should change them according to yours.
. * ---------------------------- *
. 
. clear all
{txt}
{com}. set more off
{txt}
{com}. 
. cap noisily cd "/Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3/" // Note: I changed this from previous do-files for Sections 1 & 2
{res}/Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3
{txt}
{com}. 
. //log using "Econ120_F20_Section3.smcl", replace // you can uncomment this line if you want to keep a Stata log file
. 
. use "farming.dta", clear
{txt}
{com}. 
. // Getting sumstats 
. su kg_tdfert_blue kg_plantfert_blue packets_hyb_blue

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
kg_tdfert_~e {c |}{res}        822     12.3455    1.376406          0         25
{txt}kg_plantfe~e {c |}{res}        811    11.31751    3.389863          0         25
{txt}packets_hy~e {c |}{res}        816    1.370196    .4662883          0         10
{txt}
{com}. su kg_tdfert_unmarked kg_plantfert_unmarked packets_hyb_unmarked

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
kg_tdfert_~d {c |}{res}        820     8.09878    7.103199          0         75
{txt}kg_plantfe~d {c |}{res}        806    6.143238    6.342009          0         25
{txt}packets_hy~d {c |}{res}        812    1.314483    .5807212          0         10
{txt}
{com}. 
. // Testing for mean differences
. gen kg_tdfert_diff              = kg_tdfert_blue        - kg_tdfert_unmarked
{txt}(435 missing values generated)

{com}. gen kg_plantfert_diff   = kg_plantfert_blue - kg_plantfert_unmarked
{txt}(447 missing values generated)

{com}. gen packets_hyb_diff    = packets_hyb_blue      - packets_hyb_unmarked
{txt}(436 missing values generated)

{com}. 
. ttest kg_tdfert_diff    = 0

{txt}One-sample t test
{hline 9}{c TT}{hline 68}
Variable{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
kg_td~ff {c |}{res}{col 12}    813{col 22} 4.195572{col 34} .2448409{col 46} 6.981185{col 58} 3.714976{col 70} 4.676168
{txt}{hline 9}{c BT}{hline 68}
    mean = mean({res}kg_tdfert_diff{txt})                                   t = {res} 17.1359
{txt}Ho: mean = {res}0                                     {txt}degrees of freedom = {res}     812

    {txt}Ha: mean < {res}0                 {txt}Ha: mean != {res}0                 {txt}Ha: mean > {res}0
 {txt}Pr(T < t) = {res}1.0000         {txt}Pr(|T| > |t|) = {res}0.0000          {txt}Pr(T > t) = {res}0.0000
{txt}
{com}. ttest kg_plantfert_diff = 0

{txt}One-sample t test
{hline 9}{c TT}{hline 68}
Variable{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
kg_pl~ff {c |}{res}{col 12}    801{col 22} 5.152996{col 34} .2192189{col 46} 6.204321{col 58} 4.722684{col 70} 5.583308
{txt}{hline 9}{c BT}{hline 68}
    mean = mean({res}kg_plantfert_diff{txt})                                t = {res} 23.5062
{txt}Ho: mean = {res}0                                     {txt}degrees of freedom = {res}     800

    {txt}Ha: mean < {res}0                 {txt}Ha: mean != {res}0                 {txt}Ha: mean > {res}0
 {txt}Pr(T < t) = {res}1.0000         {txt}Pr(|T| > |t|) = {res}0.0000          {txt}Pr(T > t) = {res}0.0000
{txt}
{com}. ttest packets_hyb_diff  = 0

{txt}One-sample t test
{hline 9}{c TT}{hline 68}
Variable{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
packe~ff {c |}{res}{col 12}    812{col 22} .0559975{col 34} .0137451{col 46} .3916762{col 58} .0290173{col 70} .0829778
{txt}{hline 9}{c BT}{hline 68}
    mean = mean({res}packets_hyb_diff{txt})                                 t = {res}  4.0740
{txt}Ho: mean = {res}0                                     {txt}degrees of freedom = {res}     811

    {txt}Ha: mean < {res}0                 {txt}Ha: mean != {res}0                 {txt}Ha: mean > {res}0
 {txt}Pr(T < t) = {res}1.0000         {txt}Pr(|T| > |t|) = {res}0.0001          {txt}Pr(T > t) = {res}0.0000
{txt}
{com}. 
. // Constructing mean-difference table (similar to what you've done for Econ104)
. preserve
{txt}
{com}.         // First step: we need to reshape the dataset from "wide" format to "long" format
.         keep respondent_id kg_tdfert_unmarked kg_plantfert_unmarked packets_hyb_unmarked kg_tdfert_blue kg_plantfert_blue packets_hyb_blue 
{txt}
{com}.         reshape long kg_tdfert kg_plantfert packets_hyb, i(respondent_id) j(plot,string)
{txt}(note: j = _blue _unmarked)

Data{col 36}wide{col 43}->{col 48}long
{hline 77}
Number of obs.                 {res}    1248   {txt}->{res}    2496
{txt}Number of variables            {res}       7   {txt}->{res}       5
{txt}j variable (2 values)                     ->   {res}plot
{txt}xij variables:
      {res}kg_tdfert_blue kg_tdfert_unmarked   {txt}->   {res}kg_tdfert
kg_plantfert_blue kg_plantfert_unmarked   {txt}->   {res}kg_plantfert
  packets_hyb_blue packets_hyb_unmarked   {txt}->   {res}packets_hyb
{txt}{hline 77}

{com}. 
.         // Step 2: exporting into single table (similar to what you've done for Econ104)
.         est clear 
{txt}
{com}.         eststo unmarked:        estpost summarize       kg_tdfert kg_plantfert packets_hyb if plot=="_unmarked"

{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(sum_w)}{space 1}{space 1}{ralign 9:e(mean)}{space 1}{space 1}{ralign 9:e(Var)}{space 1}{space 1}{ralign 9:e(sd)}{space 1}{space 1}{ralign 9:e(min)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      820}}}{space 1}{space 1}{ralign 9:{res:{sf:      820}}}{space 1}{space 1}{ralign 9:{res:{sf:  8.09878}}}{space 1}{space 1}{ralign 9:{res:{sf: 50.45543}}}{space 1}{space 1}{ralign 9:{res:{sf: 7.103199}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      806}}}{space 1}{space 1}{ralign 9:{res:{sf:      806}}}{space 1}{space 1}{ralign 9:{res:{sf: 6.143238}}}{space 1}{space 1}{ralign 9:{res:{sf: 40.22108}}}{space 1}{space 1}{ralign 9:{res:{sf: 6.342009}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      812}}}{space 1}{space 1}{ralign 9:{res:{sf:      812}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.314483}}}{space 1}{space 1}{ralign 9:{res:{sf: .3372371}}}{space 1}{space 1}{ralign 9:{res:{sf: .5807212}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(max)}{space 1}{space 1}{ralign 9:e(sum)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       75}}}{space 1}{space 1}{ralign 9:{res:{sf:     6641}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       25}}}{space 1}{space 1}{ralign 9:{res:{sf:  4951.45}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       10}}}{space 1}{space 1}{ralign 9:{res:{sf:  1067.36}}}{space 1}

{com}.         eststo blue:            estpost summarize       kg_tdfert kg_plantfert packets_hyb if plot=="_blue"

{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(sum_w)}{space 1}{space 1}{ralign 9:e(mean)}{space 1}{space 1}{ralign 9:e(Var)}{space 1}{space 1}{ralign 9:e(sd)}{space 1}{space 1}{ralign 9:e(min)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      822}}}{space 1}{space 1}{ralign 9:{res:{sf:      822}}}{space 1}{space 1}{ralign 9:{res:{sf:  12.3455}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.894493}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.376406}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      811}}}{space 1}{space 1}{ralign 9:{res:{sf:      811}}}{space 1}{space 1}{ralign 9:{res:{sf: 11.31751}}}{space 1}{space 1}{ralign 9:{res:{sf: 11.49117}}}{space 1}{space 1}{ralign 9:{res:{sf: 3.389863}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      816}}}{space 1}{space 1}{ralign 9:{res:{sf:      816}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.370196}}}{space 1}{space 1}{ralign 9:{res:{sf: .2174247}}}{space 1}{space 1}{ralign 9:{res:{sf: .4662883}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(max)}{space 1}{space 1}{ralign 9:e(sum)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       25}}}{space 1}{space 1}{ralign 9:{res:{sf:    10148}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       25}}}{space 1}{space 1}{ralign 9:{res:{sf:   9178.5}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       10}}}{space 1}{space 1}{ralign 9:{res:{sf:  1118.08}}}{space 1}

{com}.         eststo difference:      estpost ttest           kg_tdfert kg_plantfert packets_hyb, by(plot) unequal

{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(b)}{space 1}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(se)}{space 1}{space 1}{ralign 9:e(t)}{space 1}{space 1}{ralign 9:e(df_t)}{space 1}{space 1}{ralign 9:e(p_l)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 4.246718}}}{space 1}{space 1}{ralign 9:{res:{sf:     1642}}}{space 1}{space 1}{ralign 9:{res:{sf: .2526574}}}{space 1}{space 1}{ralign 9:{res:{sf: 16.80821}}}{space 1}{space 1}{ralign 9:{res:{sf: 880.2708}}}{space 1}{space 1}{ralign 9:{res:{sf:        1}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 5.174271}}}{space 1}{space 1}{ralign 9:{res:{sf:     1617}}}{space 1}{space 1}{ralign 9:{res:{sf: .2531229}}}{space 1}{space 1}{ralign 9:{res:{sf: 20.44173}}}{space 1}{space 1}{ralign 9:{res:{sf: 1228.602}}}{space 1}{space 1}{ralign 9:{res:{sf:        1}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .0557133}}}{space 1}{space 1}{ralign 9:{res:{sf:     1628}}}{space 1}{space 1}{ralign 9:{res:{sf: .0261107}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.133735}}}{space 1}{space 1}{ralign 9:{res:{sf: 1550.406}}}{space 1}{space 1}{ralign 9:{res:{sf: .9834895}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(p)}{space 1}{space 1}{ralign 9:e(p_u)}{space 1}{space 1}{ralign 9:e(N_1)}{space 1}{space 1}{ralign 9:e(mu_1)}{space 1}{space 1}{ralign 9:e(N_2)}{space 1}{space 1}{ralign 9:e(mu_2)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 3.39e-55}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.69e-55}}}{space 1}{space 1}{ralign 9:{res:{sf:      822}}}{space 1}{space 1}{ralign 9:{res:{sf:  12.3455}}}{space 1}{space 1}{ralign 9:{res:{sf:      820}}}{space 1}{space 1}{ralign 9:{res:{sf:  8.09878}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 3.55e-80}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.78e-80}}}{space 1}{space 1}{ralign 9:{res:{sf:      811}}}{space 1}{space 1}{ralign 9:{res:{sf: 11.31751}}}{space 1}{space 1}{ralign 9:{res:{sf:      806}}}{space 1}{space 1}{ralign 9:{res:{sf: 6.143238}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf:  .033021}}}{space 1}{space 1}{ralign 9:{res:{sf: .0165105}}}{space 1}{space 1}{ralign 9:{res:{sf:      816}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.370196}}}{space 1}{space 1}{ralign 9:{res:{sf:      812}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.314483}}}{space 1}

{com}. 
.         esttab unmarked blue difference using "Section3_table1_raw.csv", replace  cells("mean(pattern(1 1 0) fmt(%9.2f)) b(pattern(0 0 1) fmt(%9.2f) star)" "sd(pattern(1 1 0) fmt(%9.2f) par) se(pattern(0 0 1) fmt(%9.2f) par)") starlevels(* 0.10 ** 0.05 *** 0.01)  plain 
{res}{txt}(output written to {browse  `"Section3_table1_raw.csv"'})

{com}. restore
{txt}
{com}. 
. // Calculating monetary cost of inputs
. gen input_ksh_blue = kg_tdfert_blue*65 + kg_plantfert_blue*70 + packets_hyb_blue*230
{txt}(488 missing values generated)

{com}. gen input_ksh_unmarked = kg_tdfert_unmarked*65 + kg_plantfert_unmarked*70 + packets_hyb_unmarked*230
{txt}(495 missing values generated)

{com}. 
. ttest input_ksh_blue = input_ksh_unmarked

{txt}Paired t test
{hline 9}{c TT}{hline 68}
Variable{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
input_~e {c |}{res}{col 12}    741{col 22} 1909.007{col 34} 10.58548{col 46} 288.1508{col 58} 1888.226{col 70} 1929.788
{txt}input_~d {c |}{res}{col 12}    741{col 22} 1265.847{col 34} 28.75187{col 46} 782.6636{col 58} 1209.402{col 70} 1322.292
{txt}{hline 9}{c +}{hline 68}
    diff {c |}{res}{col 12}    741{col 22} 643.1601{col 34} 27.52955{col 46} 749.3906{col 58} 589.1147{col 70} 697.2054
{txt}{hline 9}{c BT}{hline 68}
     mean(diff) = mean({res}input_ksh_blue{txt} - {res}input_ksh_unma~d{txt})         t = {res} 23.3625
{txt} Ho: mean(diff) = 0                              degrees of freedom = {res}     740

 {txt}Ha: mean(diff) < 0           Ha: mean(diff) != 0           Ha: mean(diff) > 0
 Pr(T < t) = {res}1.0000         {txt}Pr(|T| > |t|) = {res}0.0000          {txt}Pr(T > t) = {res}0.0000
{txt}
{com}. 
.         // FYI: To export in nice-looking table format, you can do something similar to above
.         preserve
{txt}
{com}.                 // Step 1: eshaping the dataset from "wide" to "long" 
.                 keep respondent_id input_ksh_blue input_ksh_unmarked
{txt}
{com}.                 reshape long input_ksh, i(respondent_id) j(plot,string)
{txt}(note: j = _blue _unmarked)

Data{col 36}wide{col 43}->{col 48}long
{hline 77}
Number of obs.                 {res}    1248   {txt}->{res}    2496
{txt}Number of variables            {res}       3   {txt}->{res}       3
{txt}j variable (2 values)                     ->   {res}plot
{txt}xij variables:
      {res}input_ksh_blue input_ksh_unmarked   {txt}->   {res}input_ksh
{txt}{hline 77}

{com}. 
.                 // Step 2: exporting into single table (similar to what you've done for Econ104)
.                 est clear 
{txt}
{com}.                 eststo unmarked:        estpost summarize       input_ksh if plot=="_unmarked"

{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(sum_w)}{space 1}{space 1}{ralign 9:e(mean)}{space 1}{space 1}{ralign 9:e(Var)}{space 1}{space 1}{ralign 9:e(sd)}{space 1}{space 1}{ralign 9:e(min)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:input_ksh}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      753}}}{space 1}{space 1}{ralign 9:{res:{sf:      753}}}{space 1}{space 1}{ralign 9:{res:{sf: 1258.903}}}{space 1}{space 1}{ralign 9:{res:{sf: 609995.3}}}{space 1}{space 1}{ralign 9:{res:{sf:  781.022}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(max)}{space 1}{space 1}{ralign 9:e(sum)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:input_ksh}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     6095}}}{space 1}{space 1}{ralign 9:{res:{sf: 947954.3}}}{space 1}

{com}.                 eststo blue:            estpost summarize       input_ksh if plot=="_blue"

{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(sum_w)}{space 1}{space 1}{ralign 9:e(mean)}{space 1}{space 1}{ralign 9:e(Var)}{space 1}{space 1}{ralign 9:e(sd)}{space 1}{space 1}{ralign 9:e(min)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:input_ksh}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      760}}}{space 1}{space 1}{ralign 9:{res:{sf:      760}}}{space 1}{space 1}{ralign 9:{res:{sf: 1909.561}}}{space 1}{space 1}{ralign 9:{res:{sf:  81324.3}}}{space 1}{space 1}{ralign 9:{res:{sf: 285.1742}}}{space 1}{space 1}{ralign 9:{res:{sf:    812.5}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(max)}{space 1}{space 1}{ralign 9:e(sum)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:input_ksh}{space 1}{c |}{space 1}{ralign 9:{res:{sf:   3952.5}}}{space 1}{space 1}{ralign 9:{res:{sf:  1451267}}}{space 1}

{com}.                 eststo difference:      estpost ttest           input_ksh, by(plot) unequal

{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(b)}{space 1}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(se)}{space 1}{space 1}{ralign 9:e(t)}{space 1}{space 1}{ralign 9:e(df_t)}{space 1}{space 1}{ralign 9:e(p_l)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:input_ksh}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 650.6579}}}{space 1}{space 1}{ralign 9:{res:{sf:     1513}}}{space 1}{space 1}{ralign 9:{res:{sf: 30.28353}}}{space 1}{space 1}{ralign 9:{res:{sf: 21.48553}}}{space 1}{space 1}{ralign 9:{res:{sf: 947.4087}}}{space 1}{space 1}{ralign 9:{res:{sf:        1}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(p)}{space 1}{space 1}{ralign 9:e(p_u)}{space 1}{space 1}{ralign 9:e(N_1)}{space 1}{space 1}{ralign 9:e(mu_1)}{space 1}{space 1}{ralign 9:e(N_2)}{space 1}{space 1}{ralign 9:e(mu_2)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:input_ksh}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 9.90e-84}}}{space 1}{space 1}{ralign 9:{res:{sf: 4.95e-84}}}{space 1}{space 1}{ralign 9:{res:{sf:      760}}}{space 1}{space 1}{ralign 9:{res:{sf: 1909.561}}}{space 1}{space 1}{ralign 9:{res:{sf:      753}}}{space 1}{space 1}{ralign 9:{res:{sf: 1258.903}}}{space 1}

{com}. 
.                 esttab unmarked blue difference using "Section3_table2_raw.csv", replace  cells("mean(pattern(1 1 0) fmt(%9.2f)) b(pattern(0 0 1) fmt(%9.2f) star)" "sd(pattern(1 1 0) fmt(%9.2f) par) se(pattern(0 0 1) fmt(%9.2f) par)") starlevels(* 0.10 ** 0.05 *** 0.01)  plain 
{res}{txt}(output written to {browse  `"Section3_table2_raw.csv"'})

{com}.         restore
{txt}
{com}. 
. // Calculating rate of return
. gen rate_of_return = ((revenue_blue - revenue_unmarked) - (input_ksh_blue - input_ksh_unmarked)) / (input_ksh_blue - input_ksh_unmarked)
{txt}(626 missing values generated)

{com}. su rate_of_return, d

                       {txt}rate_of_return
{hline 61}
      Percentiles      Smallest
 1%    {res} -43.0784      -303.4385
{txt} 5%    {res} -13.5147      -115.2545
{txt}10%    {res}-7.141827      -82.52691       {txt}Obs         {res}        622
{txt}25%    {res}-1.924888      -70.56084       {txt}Sum of Wgt. {res}        622

{txt}50%    {res} .3028125                      {txt}Mean          {res}  2.10442
                        {txt}Largest       Std. Dev.     {res} 29.47147
{txt}75%    {res}  3.27173       240.9508
{txt}90%    {res} 8.119684       262.5536       {txt}Variance      {res} 868.5675
{txt}95%    {res} 18.81494        313.536       {txt}Skewness      {res} 4.151109
{txt}99%    {res} 77.63403       313.5361       {txt}Kurtosis      {res} 77.86307
{txt}
{com}. 
. // Histograms
. histogram revenue_blue, saving(histogram_revenue_blue, replace) xtitle("revenue (Ksh)") ytitle("percentage of farmers") title("Distribution of revenue on blue plot")
{txt}(bin={res}28{txt}, start={res}0{txt}, width={res}653.48319{txt})
{res}{txt}(file histogram_revenue_blue.gph saved)

{com}. graph export "histogram_revenue_blue.pdf", replace // this line is necessary to save in PDF format
{txt}(file /Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3/histogram_revenue_blue.pdf written in PDF format)

{com}. 
. kdensity revenue_blue, saving(histogram_revenue_blue, replace) xtitle("revenue (Ksh)") ytitle("percentage of farmers") title("Distribution of revenue on blue plot")
{res}{txt}(file histogram_revenue_blue.gph saved)

{com}. graph export "kdensity_revenue_blue.pdf", replace // this line is necessary to save in PDF format
{txt}(file /Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3/kdensity_revenue_blue.pdf written in PDF format)

{com}. 
. // Putting two graphs into a single figure
. twoway (kdensity revenue_blue) (kdensity revenue_unmarked, lpattern("-")), saving(kdensity_both, replace) xtitle("revenue (Ksh)") ytitle("Percentage of farmers") legend(order(1 "Blue Plot" 2 "Unmarked plot"))
{res}{txt}(file kdensity_both.gph saved)

{com}. graph export "both_revenue_blue.pdf", replace // this line is necessary to save in PDF format
{txt}(file /Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3/both_revenue_blue.pdf written in PDF format)

{com}. 
. // Dealing with outliers
. // Sample trimming (i.e., dropping observations that are too large/small)
. su rate_of_return, d

                       {txt}rate_of_return
{hline 61}
      Percentiles      Smallest
 1%    {res} -43.0784      -303.4385
{txt} 5%    {res} -13.5147      -115.2545
{txt}10%    {res}-7.141827      -82.52691       {txt}Obs         {res}        622
{txt}25%    {res}-1.924888      -70.56084       {txt}Sum of Wgt. {res}        622

{txt}50%    {res} .3028125                      {txt}Mean          {res}  2.10442
                        {txt}Largest       Std. Dev.     {res} 29.47147
{txt}75%    {res}  3.27173       240.9508
{txt}90%    {res} 8.119684       262.5536       {txt}Variance      {res} 868.5675
{txt}95%    {res} 18.81494        313.536       {txt}Skewness      {res} 4.151109
{txt}99%    {res} 77.63403       313.5361       {txt}Kurtosis      {res} 77.86307
{txt}
{com}. drop if rate_of_return < `r(p5)' | rate_of_return > `r(95)'
{err}invalid syntax
{txt}{search r(198):r(198);}

end of do-file

{search r(198):r(198);}

{com}. drop if rate_of_return < `r(p5)' 
{txt}(32 observations deleted)

{com}. drop if rate_of_return > `r(95)'
{err}invalid syntax
{txt}{search r(198):r(198);}

{com}. do "/var/folders/wy/26794k5d4ydcf0nqcms58wkr0000gn/T//SD43744.000000"
{txt}
{com}. use "farming.dta", clear
{txt}
{com}. 
{txt}end of do-file

{com}. do "/var/folders/wy/26794k5d4ydcf0nqcms58wkr0000gn/T//SD43744.000000"
{txt}
{com}. gen rate_of_return = ((revenue_blue - revenue_unmarked) - (input_ksh_blue - input_ksh_unmarked)) / (input_ksh_blue - input_ksh_unmarked)
{err}input_ksh_blue not found
{txt}{search r(111):r(111);}

end of do-file

{search r(111):r(111);}

{com}. do "/var/folders/wy/26794k5d4ydcf0nqcms58wkr0000gn/T//SD43744.000000"
{txt}
{com}. gen input_ksh_blue = kg_tdfert_blue*65 + kg_plantfert_blue*70 + packets_hyb_blue*230
{txt}(488 missing values generated)

{com}. gen input_ksh_unmarked = kg_tdfert_unmarked*65 + kg_plantfert_unmarked*70 + packets_hyb_unmarked*230
{txt}(495 missing values generated)

{com}. 
{txt}end of do-file

{com}. do "/var/folders/wy/26794k5d4ydcf0nqcms58wkr0000gn/T//SD43744.000000"
{txt}
{com}. gen rate_of_return = ((revenue_blue - revenue_unmarked) - (input_ksh_blue - input_ksh_unmarked)) / (input_ksh_blue - input_ksh_unmarked)
{txt}(626 missing values generated)

{com}. su rate_of_return, d

                       {txt}rate_of_return
{hline 61}
      Percentiles      Smallest
 1%    {res} -43.0784      -303.4385
{txt} 5%    {res} -13.5147      -115.2545
{txt}10%    {res}-7.141827      -82.52691       {txt}Obs         {res}        622
{txt}25%    {res}-1.924888      -70.56084       {txt}Sum of Wgt. {res}        622

{txt}50%    {res} .3028125                      {txt}Mean          {res}  2.10442
                        {txt}Largest       Std. Dev.     {res} 29.47147
{txt}75%    {res}  3.27173       240.9508
{txt}90%    {res} 8.119684       262.5536       {txt}Variance      {res} 868.5675
{txt}95%    {res} 18.81494        313.536       {txt}Skewness      {res} 4.151109
{txt}99%    {res} 77.63403       313.5361       {txt}Kurtosis      {res} 77.86307
{txt}
{com}. 
{txt}end of do-file

{com}. do "/var/folders/wy/26794k5d4ydcf0nqcms58wkr0000gn/T//SD43744.000000"
{txt}
{com}. su rate_of_return, d

                       {txt}rate_of_return
{hline 61}
      Percentiles      Smallest
 1%    {res} -43.0784      -303.4385
{txt} 5%    {res} -13.5147      -115.2545
{txt}10%    {res}-7.141827      -82.52691       {txt}Obs         {res}        622
{txt}25%    {res}-1.924888      -70.56084       {txt}Sum of Wgt. {res}        622

{txt}50%    {res} .3028125                      {txt}Mean          {res}  2.10442
                        {txt}Largest       Std. Dev.     {res} 29.47147
{txt}75%    {res}  3.27173       240.9508
{txt}90%    {res} 8.119684       262.5536       {txt}Variance      {res} 868.5675
{txt}95%    {res} 18.81494        313.536       {txt}Skewness      {res} 4.151109
{txt}99%    {res} 77.63403       313.5361       {txt}Kurtosis      {res} 77.86307
{txt}
{com}. drop if rate_of_return < `r(p5)' | rate_of_return > `r(p95)'
{txt}(689 observations deleted)

{com}. 
{txt}end of do-file

{com}. su rate_of_return 

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
rate_of_re~n {c |}{res}        559     .695109    4.895663  -13.09754   18.81494

{com}. su rate_of_return , d

                       {txt}rate_of_return
{hline 61}
      Percentiles      Smallest
 1%    {res}-11.55018      -13.09754
{txt} 5%    {res}-7.442477      -12.52147
{txt}10%    {res}-4.722317      -12.16696       {txt}Obs         {res}        559
{txt}25%    {res}-1.595938      -11.84009       {txt}Sum of Wgt. {res}        559

{txt}50%    {res} .3028125                      {txt}Mean          {res}  .695109
                        {txt}Largest       Std. Dev.     {res} 4.895663
{txt}75%    {res} 2.789591       16.64224
{txt}90%    {res}  6.44464       16.68102       {txt}Variance      {res} 23.96751
{txt}95%    {res} 9.192067       16.68102       {txt}Skewness      {res} .4769487
{txt}99%    {res}  16.2822       18.81494       {txt}Kurtosis      {res} 4.918137

{com}. do "/var/folders/wy/26794k5d4ydcf0nqcms58wkr0000gn/T//SD43744.000000"
{txt}
{com}. * ---------------------------- *
. * Econ120 (J. Robinson, F2020) *
. * Section 3 (Oct. 19, 2020)        * NOTE: all the path directories are based on my own computer, 
. * TA: David Sungho Park        *       so you should change them according to yours.
. * ---------------------------- *
. 
. clear all
{txt}
{com}. set more off
{txt}
{com}. 
. cap noisily cd "/Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3/" // Note: I changed this from previous do-files for Sections 1 & 2
{res}/Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3
{txt}
{com}. 
. //log using "Econ120_F20_Section3.smcl", replace // you can uncomment this line if you want to keep a Stata log file
. 
. use "farming.dta", clear
{txt}
{com}. 
. // Getting sumstats 
. su kg_tdfert_blue kg_plantfert_blue packets_hyb_blue

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
kg_tdfert_~e {c |}{res}        822     12.3455    1.376406          0         25
{txt}kg_plantfe~e {c |}{res}        811    11.31751    3.389863          0         25
{txt}packets_hy~e {c |}{res}        816    1.370196    .4662883          0         10
{txt}
{com}. su kg_tdfert_unmarked kg_plantfert_unmarked packets_hyb_unmarked

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
kg_tdfert_~d {c |}{res}        820     8.09878    7.103199          0         75
{txt}kg_plantfe~d {c |}{res}        806    6.143238    6.342009          0         25
{txt}packets_hy~d {c |}{res}        812    1.314483    .5807212          0         10
{txt}
{com}. 
. // Testing for mean differences
. gen kg_tdfert_diff              = kg_tdfert_blue        - kg_tdfert_unmarked
{txt}(435 missing values generated)

{com}. gen kg_plantfert_diff   = kg_plantfert_blue - kg_plantfert_unmarked
{txt}(447 missing values generated)

{com}. gen packets_hyb_diff    = packets_hyb_blue      - packets_hyb_unmarked
{txt}(436 missing values generated)

{com}. 
. ttest kg_tdfert_diff    = 0

{txt}One-sample t test
{hline 9}{c TT}{hline 68}
Variable{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
kg_td~ff {c |}{res}{col 12}    813{col 22} 4.195572{col 34} .2448409{col 46} 6.981185{col 58} 3.714976{col 70} 4.676168
{txt}{hline 9}{c BT}{hline 68}
    mean = mean({res}kg_tdfert_diff{txt})                                   t = {res} 17.1359
{txt}Ho: mean = {res}0                                     {txt}degrees of freedom = {res}     812

    {txt}Ha: mean < {res}0                 {txt}Ha: mean != {res}0                 {txt}Ha: mean > {res}0
 {txt}Pr(T < t) = {res}1.0000         {txt}Pr(|T| > |t|) = {res}0.0000          {txt}Pr(T > t) = {res}0.0000
{txt}
{com}. ttest kg_plantfert_diff = 0

{txt}One-sample t test
{hline 9}{c TT}{hline 68}
Variable{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
kg_pl~ff {c |}{res}{col 12}    801{col 22} 5.152996{col 34} .2192189{col 46} 6.204321{col 58} 4.722684{col 70} 5.583308
{txt}{hline 9}{c BT}{hline 68}
    mean = mean({res}kg_plantfert_diff{txt})                                t = {res} 23.5062
{txt}Ho: mean = {res}0                                     {txt}degrees of freedom = {res}     800

    {txt}Ha: mean < {res}0                 {txt}Ha: mean != {res}0                 {txt}Ha: mean > {res}0
 {txt}Pr(T < t) = {res}1.0000         {txt}Pr(|T| > |t|) = {res}0.0000          {txt}Pr(T > t) = {res}0.0000
{txt}
{com}. ttest packets_hyb_diff  = 0

{txt}One-sample t test
{hline 9}{c TT}{hline 68}
Variable{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
packe~ff {c |}{res}{col 12}    812{col 22} .0559975{col 34} .0137451{col 46} .3916762{col 58} .0290173{col 70} .0829778
{txt}{hline 9}{c BT}{hline 68}
    mean = mean({res}packets_hyb_diff{txt})                                 t = {res}  4.0740
{txt}Ho: mean = {res}0                                     {txt}degrees of freedom = {res}     811

    {txt}Ha: mean < {res}0                 {txt}Ha: mean != {res}0                 {txt}Ha: mean > {res}0
 {txt}Pr(T < t) = {res}1.0000         {txt}Pr(|T| > |t|) = {res}0.0001          {txt}Pr(T > t) = {res}0.0000
{txt}
{com}. 
. // Constructing mean-difference table (similar to what you've done for Econ104)
. preserve
{txt}
{com}.         // First step: we need to reshape the dataset from "wide" format to "long" format
.         keep respondent_id kg_tdfert_unmarked kg_plantfert_unmarked packets_hyb_unmarked kg_tdfert_blue kg_plantfert_blue packets_hyb_blue 
{txt}
{com}.         reshape long kg_tdfert kg_plantfert packets_hyb, i(respondent_id) j(plot,string)
{txt}(note: j = _blue _unmarked)

Data{col 36}wide{col 43}->{col 48}long
{hline 77}
Number of obs.                 {res}    1248   {txt}->{res}    2496
{txt}Number of variables            {res}       7   {txt}->{res}       5
{txt}j variable (2 values)                     ->   {res}plot
{txt}xij variables:
      {res}kg_tdfert_blue kg_tdfert_unmarked   {txt}->   {res}kg_tdfert
kg_plantfert_blue kg_plantfert_unmarked   {txt}->   {res}kg_plantfert
  packets_hyb_blue packets_hyb_unmarked   {txt}->   {res}packets_hyb
{txt}{hline 77}

{com}. 
.         // Step 2: exporting into single table (similar to what you've done for Econ104)
.         est clear 
{txt}
{com}.         eststo unmarked:        estpost summarize       kg_tdfert kg_plantfert packets_hyb if plot=="_unmarked"

{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(sum_w)}{space 1}{space 1}{ralign 9:e(mean)}{space 1}{space 1}{ralign 9:e(Var)}{space 1}{space 1}{ralign 9:e(sd)}{space 1}{space 1}{ralign 9:e(min)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      820}}}{space 1}{space 1}{ralign 9:{res:{sf:      820}}}{space 1}{space 1}{ralign 9:{res:{sf:  8.09878}}}{space 1}{space 1}{ralign 9:{res:{sf: 50.45543}}}{space 1}{space 1}{ralign 9:{res:{sf: 7.103199}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      806}}}{space 1}{space 1}{ralign 9:{res:{sf:      806}}}{space 1}{space 1}{ralign 9:{res:{sf: 6.143238}}}{space 1}{space 1}{ralign 9:{res:{sf: 40.22108}}}{space 1}{space 1}{ralign 9:{res:{sf: 6.342009}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      812}}}{space 1}{space 1}{ralign 9:{res:{sf:      812}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.314483}}}{space 1}{space 1}{ralign 9:{res:{sf: .3372371}}}{space 1}{space 1}{ralign 9:{res:{sf: .5807212}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(max)}{space 1}{space 1}{ralign 9:e(sum)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       75}}}{space 1}{space 1}{ralign 9:{res:{sf:     6641}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       25}}}{space 1}{space 1}{ralign 9:{res:{sf:  4951.45}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       10}}}{space 1}{space 1}{ralign 9:{res:{sf:  1067.36}}}{space 1}

{com}.         eststo blue:            estpost summarize       kg_tdfert kg_plantfert packets_hyb if plot=="_blue"

{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(sum_w)}{space 1}{space 1}{ralign 9:e(mean)}{space 1}{space 1}{ralign 9:e(Var)}{space 1}{space 1}{ralign 9:e(sd)}{space 1}{space 1}{ralign 9:e(min)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      822}}}{space 1}{space 1}{ralign 9:{res:{sf:      822}}}{space 1}{space 1}{ralign 9:{res:{sf:  12.3455}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.894493}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.376406}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      811}}}{space 1}{space 1}{ralign 9:{res:{sf:      811}}}{space 1}{space 1}{ralign 9:{res:{sf: 11.31751}}}{space 1}{space 1}{ralign 9:{res:{sf: 11.49117}}}{space 1}{space 1}{ralign 9:{res:{sf: 3.389863}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      816}}}{space 1}{space 1}{ralign 9:{res:{sf:      816}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.370196}}}{space 1}{space 1}{ralign 9:{res:{sf: .2174247}}}{space 1}{space 1}{ralign 9:{res:{sf: .4662883}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(max)}{space 1}{space 1}{ralign 9:e(sum)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       25}}}{space 1}{space 1}{ralign 9:{res:{sf:    10148}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       25}}}{space 1}{space 1}{ralign 9:{res:{sf:   9178.5}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       10}}}{space 1}{space 1}{ralign 9:{res:{sf:  1118.08}}}{space 1}

{com}.         eststo difference:      estpost ttest           kg_tdfert kg_plantfert packets_hyb, by(plot) unequal

{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(b)}{space 1}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(se)}{space 1}{space 1}{ralign 9:e(t)}{space 1}{space 1}{ralign 9:e(df_t)}{space 1}{space 1}{ralign 9:e(p_l)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 4.246718}}}{space 1}{space 1}{ralign 9:{res:{sf:     1642}}}{space 1}{space 1}{ralign 9:{res:{sf: .2526574}}}{space 1}{space 1}{ralign 9:{res:{sf: 16.80821}}}{space 1}{space 1}{ralign 9:{res:{sf: 880.2708}}}{space 1}{space 1}{ralign 9:{res:{sf:        1}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 5.174271}}}{space 1}{space 1}{ralign 9:{res:{sf:     1617}}}{space 1}{space 1}{ralign 9:{res:{sf: .2531229}}}{space 1}{space 1}{ralign 9:{res:{sf: 20.44173}}}{space 1}{space 1}{ralign 9:{res:{sf: 1228.602}}}{space 1}{space 1}{ralign 9:{res:{sf:        1}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .0557133}}}{space 1}{space 1}{ralign 9:{res:{sf:     1628}}}{space 1}{space 1}{ralign 9:{res:{sf: .0261107}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.133735}}}{space 1}{space 1}{ralign 9:{res:{sf: 1550.406}}}{space 1}{space 1}{ralign 9:{res:{sf: .9834895}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(p)}{space 1}{space 1}{ralign 9:e(p_u)}{space 1}{space 1}{ralign 9:e(N_1)}{space 1}{space 1}{ralign 9:e(mu_1)}{space 1}{space 1}{ralign 9:e(N_2)}{space 1}{space 1}{ralign 9:e(mu_2)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 3.39e-55}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.69e-55}}}{space 1}{space 1}{ralign 9:{res:{sf:      822}}}{space 1}{space 1}{ralign 9:{res:{sf:  12.3455}}}{space 1}{space 1}{ralign 9:{res:{sf:      820}}}{space 1}{space 1}{ralign 9:{res:{sf:  8.09878}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 3.55e-80}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.78e-80}}}{space 1}{space 1}{ralign 9:{res:{sf:      811}}}{space 1}{space 1}{ralign 9:{res:{sf: 11.31751}}}{space 1}{space 1}{ralign 9:{res:{sf:      806}}}{space 1}{space 1}{ralign 9:{res:{sf: 6.143238}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf:  .033021}}}{space 1}{space 1}{ralign 9:{res:{sf: .0165105}}}{space 1}{space 1}{ralign 9:{res:{sf:      816}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.370196}}}{space 1}{space 1}{ralign 9:{res:{sf:      812}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.314483}}}{space 1}

{com}. 
.         esttab unmarked blue difference using "Section3_table1_raw.csv", replace  cells("mean(pattern(1 1 0) fmt(%9.2f)) b(pattern(0 0 1) fmt(%9.2f) star)" "sd(pattern(1 1 0) fmt(%9.2f) par) se(pattern(0 0 1) fmt(%9.2f) par)") starlevels(* 0.10 ** 0.05 *** 0.01)  plain 
{res}{txt}(output written to {browse  `"Section3_table1_raw.csv"'})

{com}. restore
{txt}
{com}. 
. // Calculating monetary cost of inputs
. gen input_ksh_blue = kg_tdfert_blue*65 + kg_plantfert_blue*70 + packets_hyb_blue*230
{txt}(488 missing values generated)

{com}. gen input_ksh_unmarked = kg_tdfert_unmarked*65 + kg_plantfert_unmarked*70 + packets_hyb_unmarked*230
{txt}(495 missing values generated)

{com}. 
. ttest input_ksh_blue = input_ksh_unmarked

{txt}Paired t test
{hline 9}{c TT}{hline 68}
Variable{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
input_~e {c |}{res}{col 12}    741{col 22} 1909.007{col 34} 10.58548{col 46} 288.1508{col 58} 1888.226{col 70} 1929.788
{txt}input_~d {c |}{res}{col 12}    741{col 22} 1265.847{col 34} 28.75187{col 46} 782.6636{col 58} 1209.402{col 70} 1322.292
{txt}{hline 9}{c +}{hline 68}
    diff {c |}{res}{col 12}    741{col 22} 643.1601{col 34} 27.52955{col 46} 749.3906{col 58} 589.1147{col 70} 697.2054
{txt}{hline 9}{c BT}{hline 68}
     mean(diff) = mean({res}input_ksh_blue{txt} - {res}input_ksh_unma~d{txt})         t = {res} 23.3625
{txt} Ho: mean(diff) = 0                              degrees of freedom = {res}     740

 {txt}Ha: mean(diff) < 0           Ha: mean(diff) != 0           Ha: mean(diff) > 0
 Pr(T < t) = {res}1.0000         {txt}Pr(|T| > |t|) = {res}0.0000          {txt}Pr(T > t) = {res}0.0000
{txt}
{com}. 
.         // FYI: To export in nice-looking table format, you can do something similar to above
.         preserve
{txt}
{com}.                 // Step 1: eshaping the dataset from "wide" to "long" 
.                 keep respondent_id input_ksh_blue input_ksh_unmarked
{txt}
{com}.                 reshape long input_ksh, i(respondent_id) j(plot,string)
{txt}(note: j = _blue _unmarked)

Data{col 36}wide{col 43}->{col 48}long
{hline 77}
Number of obs.                 {res}    1248   {txt}->{res}    2496
{txt}Number of variables            {res}       3   {txt}->{res}       3
{txt}j variable (2 values)                     ->   {res}plot
{txt}xij variables:
      {res}input_ksh_blue input_ksh_unmarked   {txt}->   {res}input_ksh
{txt}{hline 77}

{com}. 
.                 // Step 2: exporting into single table (similar to what you've done for Econ104)
.                 est clear 
{txt}
{com}.                 eststo unmarked:        estpost summarize       input_ksh if plot=="_unmarked"

{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(sum_w)}{space 1}{space 1}{ralign 9:e(mean)}{space 1}{space 1}{ralign 9:e(Var)}{space 1}{space 1}{ralign 9:e(sd)}{space 1}{space 1}{ralign 9:e(min)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:input_ksh}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      753}}}{space 1}{space 1}{ralign 9:{res:{sf:      753}}}{space 1}{space 1}{ralign 9:{res:{sf: 1258.903}}}{space 1}{space 1}{ralign 9:{res:{sf: 609995.3}}}{space 1}{space 1}{ralign 9:{res:{sf:  781.022}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(max)}{space 1}{space 1}{ralign 9:e(sum)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:input_ksh}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     6095}}}{space 1}{space 1}{ralign 9:{res:{sf: 947954.3}}}{space 1}

{com}.                 eststo blue:            estpost summarize       input_ksh if plot=="_blue"

{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(sum_w)}{space 1}{space 1}{ralign 9:e(mean)}{space 1}{space 1}{ralign 9:e(Var)}{space 1}{space 1}{ralign 9:e(sd)}{space 1}{space 1}{ralign 9:e(min)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:input_ksh}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      760}}}{space 1}{space 1}{ralign 9:{res:{sf:      760}}}{space 1}{space 1}{ralign 9:{res:{sf: 1909.561}}}{space 1}{space 1}{ralign 9:{res:{sf:  81324.3}}}{space 1}{space 1}{ralign 9:{res:{sf: 285.1742}}}{space 1}{space 1}{ralign 9:{res:{sf:    812.5}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(max)}{space 1}{space 1}{ralign 9:e(sum)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:input_ksh}{space 1}{c |}{space 1}{ralign 9:{res:{sf:   3952.5}}}{space 1}{space 1}{ralign 9:{res:{sf:  1451267}}}{space 1}

{com}.                 eststo difference:      estpost ttest           input_ksh, by(plot) unequal

{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(b)}{space 1}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(se)}{space 1}{space 1}{ralign 9:e(t)}{space 1}{space 1}{ralign 9:e(df_t)}{space 1}{space 1}{ralign 9:e(p_l)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:input_ksh}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 650.6579}}}{space 1}{space 1}{ralign 9:{res:{sf:     1513}}}{space 1}{space 1}{ralign 9:{res:{sf: 30.28353}}}{space 1}{space 1}{ralign 9:{res:{sf: 21.48553}}}{space 1}{space 1}{ralign 9:{res:{sf: 947.4087}}}{space 1}{space 1}{ralign 9:{res:{sf:        1}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(p)}{space 1}{space 1}{ralign 9:e(p_u)}{space 1}{space 1}{ralign 9:e(N_1)}{space 1}{space 1}{ralign 9:e(mu_1)}{space 1}{space 1}{ralign 9:e(N_2)}{space 1}{space 1}{ralign 9:e(mu_2)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:input_ksh}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 9.90e-84}}}{space 1}{space 1}{ralign 9:{res:{sf: 4.95e-84}}}{space 1}{space 1}{ralign 9:{res:{sf:      760}}}{space 1}{space 1}{ralign 9:{res:{sf: 1909.561}}}{space 1}{space 1}{ralign 9:{res:{sf:      753}}}{space 1}{space 1}{ralign 9:{res:{sf: 1258.903}}}{space 1}

{com}. 
.                 esttab unmarked blue difference using "Section3_table2_raw.csv", replace  cells("mean(pattern(1 1 0) fmt(%9.2f)) b(pattern(0 0 1) fmt(%9.2f) star)" "sd(pattern(1 1 0) fmt(%9.2f) par) se(pattern(0 0 1) fmt(%9.2f) par)") starlevels(* 0.10 ** 0.05 *** 0.01)  plain 
{res}{txt}(output written to {browse  `"Section3_table2_raw.csv"'})

{com}.         restore
{txt}
{com}. 
. // Calculating rate of return
. gen rate_of_return = ((revenue_blue - revenue_unmarked) - (input_ksh_blue - input_ksh_unmarked)) / (input_ksh_blue - input_ksh_unmarked)
{txt}(626 missing values generated)

{com}. su rate_of_return, d

                       {txt}rate_of_return
{hline 61}
      Percentiles      Smallest
 1%    {res} -43.0784      -303.4385
{txt} 5%    {res} -13.5147      -115.2545
{txt}10%    {res}-7.141827      -82.52691       {txt}Obs         {res}        622
{txt}25%    {res}-1.924888      -70.56084       {txt}Sum of Wgt. {res}        622

{txt}50%    {res} .3028125                      {txt}Mean          {res}  2.10442
                        {txt}Largest       Std. Dev.     {res} 29.47147
{txt}75%    {res}  3.27173       240.9508
{txt}90%    {res} 8.119684       262.5536       {txt}Variance      {res} 868.5675
{txt}95%    {res} 18.81494        313.536       {txt}Skewness      {res} 4.151109
{txt}99%    {res} 77.63403       313.5361       {txt}Kurtosis      {res} 77.86307
{txt}
{com}. 
. // Histograms
. histogram revenue_blue, saving(histogram_revenue_blue, replace) xtitle("revenue (Ksh)") ytitle("percentage of farmers") title("Distribution of revenue on blue plot")
{txt}(bin={res}28{txt}, start={res}0{txt}, width={res}653.48319{txt})
{res}{txt}(file histogram_revenue_blue.gph saved)

{com}. graph export "histogram_revenue_blue.pdf", replace // this line is necessary to save in PDF format
{txt}(file /Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3/histogram_revenue_blue.pdf written in PDF format)

{com}. 
. kdensity revenue_blue, saving(histogram_revenue_blue, replace) xtitle("revenue (Ksh)") ytitle("percentage of farmers") title("Distribution of revenue on blue plot")
{res}{txt}(file histogram_revenue_blue.gph saved)

{com}. graph export "kdensity_revenue_blue.pdf", replace // this line is necessary to save in PDF format
{txt}(file /Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3/kdensity_revenue_blue.pdf written in PDF format)

{com}. 
. // Putting two graphs into a single figure
. twoway (kdensity revenue_blue) (kdensity revenue_unmarked, lpattern("-")), saving(kdensity_both, replace) xtitle("revenue (Ksh)") ytitle("Percentage of farmers") legend(order(1 "Blue Plot" 2 "Unmarked plot"))
{res}{txt}(file kdensity_both.gph saved)

{com}. graph export "both_revenue_blue.pdf", replace // this line is necessary to save in PDF format
{txt}(file /Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3/both_revenue_blue.pdf written in PDF format)

{com}. 
. // Dealing with outliers
. // Sample trimming (i.e., dropping observations that are too large/small)
. su rate_of_return, d

                       {txt}rate_of_return
{hline 61}
      Percentiles      Smallest
 1%    {res} -43.0784      -303.4385
{txt} 5%    {res} -13.5147      -115.2545
{txt}10%    {res}-7.141827      -82.52691       {txt}Obs         {res}        622
{txt}25%    {res}-1.924888      -70.56084       {txt}Sum of Wgt. {res}        622

{txt}50%    {res} .3028125                      {txt}Mean          {res}  2.10442
                        {txt}Largest       Std. Dev.     {res} 29.47147
{txt}75%    {res}  3.27173       240.9508
{txt}90%    {res} 8.119684       262.5536       {txt}Variance      {res} 868.5675
{txt}95%    {res} 18.81494        313.536       {txt}Skewness      {res} 4.151109
{txt}99%    {res} 77.63403       313.5361       {txt}Kurtosis      {res} 77.86307
{txt}
{com}. di `r(p5)'  // 5th-%tile value
{res}-13.514698
{txt}
{com}. di `r(p95)' // 95th-%tile value
{res}18.814936
{txt}
{com}. sss
{err}command {bf}sss{sf} is unrecognized
{txt}{search r(199):r(199);}

end of do-file

{search r(199):r(199);}

{com}. do "/var/folders/wy/26794k5d4ydcf0nqcms58wkr0000gn/T//SD43744.000000"
{txt}
{com}. * ---------------------------- *
. * Econ120 (J. Robinson, F2020) *
. * Section 3 (Oct. 19, 2020)        * NOTE: all the path directories are based on my own computer, 
. * TA: David Sungho Park        *       so you should change them according to yours.
. * ---------------------------- *
. 
. clear all
{txt}
{com}. set more off
{txt}
{com}. 
. cap noisily cd "/Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3/" // Note: I changed this from previous do-files for Sections 1 & 2
{res}/Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3
{txt}
{com}. 
. //log using "Econ120_F20_Section3.smcl", replace // you can uncomment this line if you want to keep a Stata log file
. 
. use "farming.dta", clear
{txt}
{com}. 
. // Getting sumstats 
. su kg_tdfert_blue kg_plantfert_blue packets_hyb_blue

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
kg_tdfert_~e {c |}{res}        822     12.3455    1.376406          0         25
{txt}kg_plantfe~e {c |}{res}        811    11.31751    3.389863          0         25
{txt}packets_hy~e {c |}{res}        816    1.370196    .4662883          0         10
{txt}
{com}. su kg_tdfert_unmarked kg_plantfert_unmarked packets_hyb_unmarked

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
kg_tdfert_~d {c |}{res}        820     8.09878    7.103199          0         75
{txt}kg_plantfe~d {c |}{res}        806    6.143238    6.342009          0         25
{txt}packets_hy~d {c |}{res}        812    1.314483    .5807212          0         10
{txt}
{com}. 
. // Testing for mean differences
. gen kg_tdfert_diff              = kg_tdfert_blue        - kg_tdfert_unmarked
{txt}(435 missing values generated)

{com}. gen kg_plantfert_diff   = kg_plantfert_blue - kg_plantfert_unmarked
{txt}(447 missing values generated)

{com}. gen packets_hyb_diff    = packets_hyb_blue      - packets_hyb_unmarked
{txt}(436 missing values generated)

{com}. 
. ttest kg_tdfert_diff    = 0

{txt}One-sample t test
{hline 9}{c TT}{hline 68}
Variable{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
kg_td~ff {c |}{res}{col 12}    813{col 22} 4.195572{col 34} .2448409{col 46} 6.981185{col 58} 3.714976{col 70} 4.676168
{txt}{hline 9}{c BT}{hline 68}
    mean = mean({res}kg_tdfert_diff{txt})                                   t = {res} 17.1359
{txt}Ho: mean = {res}0                                     {txt}degrees of freedom = {res}     812

    {txt}Ha: mean < {res}0                 {txt}Ha: mean != {res}0                 {txt}Ha: mean > {res}0
 {txt}Pr(T < t) = {res}1.0000         {txt}Pr(|T| > |t|) = {res}0.0000          {txt}Pr(T > t) = {res}0.0000
{txt}
{com}. ttest kg_plantfert_diff = 0

{txt}One-sample t test
{hline 9}{c TT}{hline 68}
Variable{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
kg_pl~ff {c |}{res}{col 12}    801{col 22} 5.152996{col 34} .2192189{col 46} 6.204321{col 58} 4.722684{col 70} 5.583308
{txt}{hline 9}{c BT}{hline 68}
    mean = mean({res}kg_plantfert_diff{txt})                                t = {res} 23.5062
{txt}Ho: mean = {res}0                                     {txt}degrees of freedom = {res}     800

    {txt}Ha: mean < {res}0                 {txt}Ha: mean != {res}0                 {txt}Ha: mean > {res}0
 {txt}Pr(T < t) = {res}1.0000         {txt}Pr(|T| > |t|) = {res}0.0000          {txt}Pr(T > t) = {res}0.0000
{txt}
{com}. ttest packets_hyb_diff  = 0

{txt}One-sample t test
{hline 9}{c TT}{hline 68}
Variable{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
packe~ff {c |}{res}{col 12}    812{col 22} .0559975{col 34} .0137451{col 46} .3916762{col 58} .0290173{col 70} .0829778
{txt}{hline 9}{c BT}{hline 68}
    mean = mean({res}packets_hyb_diff{txt})                                 t = {res}  4.0740
{txt}Ho: mean = {res}0                                     {txt}degrees of freedom = {res}     811

    {txt}Ha: mean < {res}0                 {txt}Ha: mean != {res}0                 {txt}Ha: mean > {res}0
 {txt}Pr(T < t) = {res}1.0000         {txt}Pr(|T| > |t|) = {res}0.0001          {txt}Pr(T > t) = {res}0.0000
{txt}
{com}. 
. // Constructing mean-difference table (similar to what you've done for Econ104)
. preserve
{txt}
{com}.         // First step: we need to reshape the dataset from "wide" format to "long" format
.         keep respondent_id kg_tdfert_unmarked kg_plantfert_unmarked packets_hyb_unmarked kg_tdfert_blue kg_plantfert_blue packets_hyb_blue 
{txt}
{com}.         reshape long kg_tdfert kg_plantfert packets_hyb, i(respondent_id) j(plot,string)
{txt}(note: j = _blue _unmarked)

Data{col 36}wide{col 43}->{col 48}long
{hline 77}
Number of obs.                 {res}    1248   {txt}->{res}    2496
{txt}Number of variables            {res}       7   {txt}->{res}       5
{txt}j variable (2 values)                     ->   {res}plot
{txt}xij variables:
      {res}kg_tdfert_blue kg_tdfert_unmarked   {txt}->   {res}kg_tdfert
kg_plantfert_blue kg_plantfert_unmarked   {txt}->   {res}kg_plantfert
  packets_hyb_blue packets_hyb_unmarked   {txt}->   {res}packets_hyb
{txt}{hline 77}

{com}. 
.         // Step 2: exporting into single table (similar to what you've done for Econ104)
.         est clear 
{txt}
{com}.         eststo unmarked:        estpost summarize       kg_tdfert kg_plantfert packets_hyb if plot=="_unmarked"

{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(sum_w)}{space 1}{space 1}{ralign 9:e(mean)}{space 1}{space 1}{ralign 9:e(Var)}{space 1}{space 1}{ralign 9:e(sd)}{space 1}{space 1}{ralign 9:e(min)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      820}}}{space 1}{space 1}{ralign 9:{res:{sf:      820}}}{space 1}{space 1}{ralign 9:{res:{sf:  8.09878}}}{space 1}{space 1}{ralign 9:{res:{sf: 50.45543}}}{space 1}{space 1}{ralign 9:{res:{sf: 7.103199}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      806}}}{space 1}{space 1}{ralign 9:{res:{sf:      806}}}{space 1}{space 1}{ralign 9:{res:{sf: 6.143238}}}{space 1}{space 1}{ralign 9:{res:{sf: 40.22108}}}{space 1}{space 1}{ralign 9:{res:{sf: 6.342009}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      812}}}{space 1}{space 1}{ralign 9:{res:{sf:      812}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.314483}}}{space 1}{space 1}{ralign 9:{res:{sf: .3372371}}}{space 1}{space 1}{ralign 9:{res:{sf: .5807212}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(max)}{space 1}{space 1}{ralign 9:e(sum)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       75}}}{space 1}{space 1}{ralign 9:{res:{sf:     6641}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       25}}}{space 1}{space 1}{ralign 9:{res:{sf:  4951.45}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       10}}}{space 1}{space 1}{ralign 9:{res:{sf:  1067.36}}}{space 1}

{com}.         eststo blue:            estpost summarize       kg_tdfert kg_plantfert packets_hyb if plot=="_blue"

{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(sum_w)}{space 1}{space 1}{ralign 9:e(mean)}{space 1}{space 1}{ralign 9:e(Var)}{space 1}{space 1}{ralign 9:e(sd)}{space 1}{space 1}{ralign 9:e(min)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      822}}}{space 1}{space 1}{ralign 9:{res:{sf:      822}}}{space 1}{space 1}{ralign 9:{res:{sf:  12.3455}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.894493}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.376406}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      811}}}{space 1}{space 1}{ralign 9:{res:{sf:      811}}}{space 1}{space 1}{ralign 9:{res:{sf: 11.31751}}}{space 1}{space 1}{ralign 9:{res:{sf: 11.49117}}}{space 1}{space 1}{ralign 9:{res:{sf: 3.389863}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      816}}}{space 1}{space 1}{ralign 9:{res:{sf:      816}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.370196}}}{space 1}{space 1}{ralign 9:{res:{sf: .2174247}}}{space 1}{space 1}{ralign 9:{res:{sf: .4662883}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(max)}{space 1}{space 1}{ralign 9:e(sum)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       25}}}{space 1}{space 1}{ralign 9:{res:{sf:    10148}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       25}}}{space 1}{space 1}{ralign 9:{res:{sf:   9178.5}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       10}}}{space 1}{space 1}{ralign 9:{res:{sf:  1118.08}}}{space 1}

{com}.         eststo difference:      estpost ttest           kg_tdfert kg_plantfert packets_hyb, by(plot) unequal

{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(b)}{space 1}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(se)}{space 1}{space 1}{ralign 9:e(t)}{space 1}{space 1}{ralign 9:e(df_t)}{space 1}{space 1}{ralign 9:e(p_l)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 4.246718}}}{space 1}{space 1}{ralign 9:{res:{sf:     1642}}}{space 1}{space 1}{ralign 9:{res:{sf: .2526574}}}{space 1}{space 1}{ralign 9:{res:{sf: 16.80821}}}{space 1}{space 1}{ralign 9:{res:{sf: 880.2708}}}{space 1}{space 1}{ralign 9:{res:{sf:        1}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 5.174271}}}{space 1}{space 1}{ralign 9:{res:{sf:     1617}}}{space 1}{space 1}{ralign 9:{res:{sf: .2531229}}}{space 1}{space 1}{ralign 9:{res:{sf: 20.44173}}}{space 1}{space 1}{ralign 9:{res:{sf: 1228.602}}}{space 1}{space 1}{ralign 9:{res:{sf:        1}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .0557133}}}{space 1}{space 1}{ralign 9:{res:{sf:     1628}}}{space 1}{space 1}{ralign 9:{res:{sf: .0261107}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.133735}}}{space 1}{space 1}{ralign 9:{res:{sf: 1550.406}}}{space 1}{space 1}{ralign 9:{res:{sf: .9834895}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(p)}{space 1}{space 1}{ralign 9:e(p_u)}{space 1}{space 1}{ralign 9:e(N_1)}{space 1}{space 1}{ralign 9:e(mu_1)}{space 1}{space 1}{ralign 9:e(N_2)}{space 1}{space 1}{ralign 9:e(mu_2)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 3.39e-55}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.69e-55}}}{space 1}{space 1}{ralign 9:{res:{sf:      822}}}{space 1}{space 1}{ralign 9:{res:{sf:  12.3455}}}{space 1}{space 1}{ralign 9:{res:{sf:      820}}}{space 1}{space 1}{ralign 9:{res:{sf:  8.09878}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 3.55e-80}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.78e-80}}}{space 1}{space 1}{ralign 9:{res:{sf:      811}}}{space 1}{space 1}{ralign 9:{res:{sf: 11.31751}}}{space 1}{space 1}{ralign 9:{res:{sf:      806}}}{space 1}{space 1}{ralign 9:{res:{sf: 6.143238}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf:  .033021}}}{space 1}{space 1}{ralign 9:{res:{sf: .0165105}}}{space 1}{space 1}{ralign 9:{res:{sf:      816}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.370196}}}{space 1}{space 1}{ralign 9:{res:{sf:      812}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.314483}}}{space 1}

{com}. 
.         esttab unmarked blue difference using "Section3_table1_raw.csv", replace  cells("mean(pattern(1 1 0) fmt(%9.2f)) b(pattern(0 0 1) fmt(%9.2f) star)" "sd(pattern(1 1 0) fmt(%9.2f) par) se(pattern(0 0 1) fmt(%9.2f) par)") starlevels(* 0.10 ** 0.05 *** 0.01)  plain 
{res}{txt}(output written to {browse  `"Section3_table1_raw.csv"'})

{com}. restore
{txt}
{com}. 
. // Calculating monetary cost of inputs
. gen input_ksh_blue = kg_tdfert_blue*65 + kg_plantfert_blue*70 + packets_hyb_blue*230
{txt}(488 missing values generated)

{com}. gen input_ksh_unmarked = kg_tdfert_unmarked*65 + kg_plantfert_unmarked*70 + packets_hyb_unmarked*230
{txt}(495 missing values generated)

{com}. 
. ttest input_ksh_blue = input_ksh_unmarked

{txt}Paired t test
{hline 9}{c TT}{hline 68}
Variable{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
input_~e {c |}{res}{col 12}    741{col 22} 1909.007{col 34} 10.58548{col 46} 288.1508{col 58} 1888.226{col 70} 1929.788
{txt}input_~d {c |}{res}{col 12}    741{col 22} 1265.847{col 34} 28.75187{col 46} 782.6636{col 58} 1209.402{col 70} 1322.292
{txt}{hline 9}{c +}{hline 68}
    diff {c |}{res}{col 12}    741{col 22} 643.1601{col 34} 27.52955{col 46} 749.3906{col 58} 589.1147{col 70} 697.2054
{txt}{hline 9}{c BT}{hline 68}
     mean(diff) = mean({res}input_ksh_blue{txt} - {res}input_ksh_unma~d{txt})         t = {res} 23.3625
{txt} Ho: mean(diff) = 0                              degrees of freedom = {res}     740

 {txt}Ha: mean(diff) < 0           Ha: mean(diff) != 0           Ha: mean(diff) > 0
 Pr(T < t) = {res}1.0000         {txt}Pr(|T| > |t|) = {res}0.0000          {txt}Pr(T > t) = {res}0.0000
{txt}
{com}. 
.         // FYI: To export in nice-looking table format, you can do something similar to above
.         preserve
{txt}
{com}.                 // Step 1: eshaping the dataset from "wide" to "long" 
.                 keep respondent_id input_ksh_blue input_ksh_unmarked
{txt}
{com}.                 reshape long input_ksh, i(respondent_id) j(plot,string)
{txt}(note: j = _blue _unmarked)

Data{col 36}wide{col 43}->{col 48}long
{hline 77}
Number of obs.                 {res}    1248   {txt}->{res}    2496
{txt}Number of variables            {res}       3   {txt}->{res}       3
{txt}j variable (2 values)                     ->   {res}plot
{txt}xij variables:
      {res}input_ksh_blue input_ksh_unmarked   {txt}->   {res}input_ksh
{txt}{hline 77}

{com}. 
.                 // Step 2: exporting into single table (similar to what you've done for Econ104)
.                 est clear 
{txt}
{com}.                 eststo unmarked:        estpost summarize       input_ksh if plot=="_unmarked"

{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(sum_w)}{space 1}{space 1}{ralign 9:e(mean)}{space 1}{space 1}{ralign 9:e(Var)}{space 1}{space 1}{ralign 9:e(sd)}{space 1}{space 1}{ralign 9:e(min)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:input_ksh}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      753}}}{space 1}{space 1}{ralign 9:{res:{sf:      753}}}{space 1}{space 1}{ralign 9:{res:{sf: 1258.903}}}{space 1}{space 1}{ralign 9:{res:{sf: 609995.3}}}{space 1}{space 1}{ralign 9:{res:{sf:  781.022}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(max)}{space 1}{space 1}{ralign 9:e(sum)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:input_ksh}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     6095}}}{space 1}{space 1}{ralign 9:{res:{sf: 947954.3}}}{space 1}

{com}.                 eststo blue:            estpost summarize       input_ksh if plot=="_blue"

{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(sum_w)}{space 1}{space 1}{ralign 9:e(mean)}{space 1}{space 1}{ralign 9:e(Var)}{space 1}{space 1}{ralign 9:e(sd)}{space 1}{space 1}{ralign 9:e(min)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:input_ksh}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      760}}}{space 1}{space 1}{ralign 9:{res:{sf:      760}}}{space 1}{space 1}{ralign 9:{res:{sf: 1909.561}}}{space 1}{space 1}{ralign 9:{res:{sf:  81324.3}}}{space 1}{space 1}{ralign 9:{res:{sf: 285.1742}}}{space 1}{space 1}{ralign 9:{res:{sf:    812.5}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(max)}{space 1}{space 1}{ralign 9:e(sum)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:input_ksh}{space 1}{c |}{space 1}{ralign 9:{res:{sf:   3952.5}}}{space 1}{space 1}{ralign 9:{res:{sf:  1451267}}}{space 1}

{com}.                 eststo difference:      estpost ttest           input_ksh, by(plot) unequal

{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(b)}{space 1}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(se)}{space 1}{space 1}{ralign 9:e(t)}{space 1}{space 1}{ralign 9:e(df_t)}{space 1}{space 1}{ralign 9:e(p_l)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:input_ksh}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 650.6579}}}{space 1}{space 1}{ralign 9:{res:{sf:     1513}}}{space 1}{space 1}{ralign 9:{res:{sf: 30.28353}}}{space 1}{space 1}{ralign 9:{res:{sf: 21.48553}}}{space 1}{space 1}{ralign 9:{res:{sf: 947.4087}}}{space 1}{space 1}{ralign 9:{res:{sf:        1}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(p)}{space 1}{space 1}{ralign 9:e(p_u)}{space 1}{space 1}{ralign 9:e(N_1)}{space 1}{space 1}{ralign 9:e(mu_1)}{space 1}{space 1}{ralign 9:e(N_2)}{space 1}{space 1}{ralign 9:e(mu_2)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:input_ksh}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 9.90e-84}}}{space 1}{space 1}{ralign 9:{res:{sf: 4.95e-84}}}{space 1}{space 1}{ralign 9:{res:{sf:      760}}}{space 1}{space 1}{ralign 9:{res:{sf: 1909.561}}}{space 1}{space 1}{ralign 9:{res:{sf:      753}}}{space 1}{space 1}{ralign 9:{res:{sf: 1258.903}}}{space 1}

{com}. 
.                 esttab unmarked blue difference using "Section3_table2_raw.csv", replace  cells("mean(pattern(1 1 0) fmt(%9.2f)) b(pattern(0 0 1) fmt(%9.2f) star)" "sd(pattern(1 1 0) fmt(%9.2f) par) se(pattern(0 0 1) fmt(%9.2f) par)") starlevels(* 0.10 ** 0.05 *** 0.01)  plain 
{res}{txt}(output written to {browse  `"Section3_table2_raw.csv"'})

{com}.         restore
{txt}
{com}. 
. // Calculating rate of return
. gen rate_of_return = ((revenue_blue - revenue_unmarked) - (input_ksh_blue - input_ksh_unmarked)) / (input_ksh_blue - input_ksh_unmarked)
{txt}(626 missing values generated)

{com}. su rate_of_return, d

                       {txt}rate_of_return
{hline 61}
      Percentiles      Smallest
 1%    {res} -43.0784      -303.4385
{txt} 5%    {res} -13.5147      -115.2545
{txt}10%    {res}-7.141827      -82.52691       {txt}Obs         {res}        622
{txt}25%    {res}-1.924888      -70.56084       {txt}Sum of Wgt. {res}        622

{txt}50%    {res} .3028125                      {txt}Mean          {res}  2.10442
                        {txt}Largest       Std. Dev.     {res} 29.47147
{txt}75%    {res}  3.27173       240.9508
{txt}90%    {res} 8.119684       262.5536       {txt}Variance      {res} 868.5675
{txt}95%    {res} 18.81494        313.536       {txt}Skewness      {res} 4.151109
{txt}99%    {res} 77.63403       313.5361       {txt}Kurtosis      {res} 77.86307
{txt}
{com}. 
. // Histograms
. histogram revenue_blue, saving(histogram_revenue_blue, replace) xtitle("revenue (Ksh)") ytitle("percentage of farmers") title("Distribution of revenue on blue plot")
{txt}(bin={res}28{txt}, start={res}0{txt}, width={res}653.48319{txt})
{res}{txt}(file histogram_revenue_blue.gph saved)

{com}. graph export "histogram_revenue_blue.pdf", replace // this line is necessary to save in PDF format
{txt}(file /Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3/histogram_revenue_blue.pdf written in PDF format)

{com}. 
. kdensity revenue_blue, saving(histogram_revenue_blue, replace) xtitle("revenue (Ksh)") ytitle("percentage of farmers") title("Distribution of revenue on blue plot")
{res}{txt}(file histogram_revenue_blue.gph saved)

{com}. graph export "kdensity_revenue_blue.pdf", replace // this line is necessary to save in PDF format
{txt}(file /Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3/kdensity_revenue_blue.pdf written in PDF format)

{com}. 
. // Putting two graphs into a single figure
. twoway (kdensity revenue_blue) (kdensity revenue_unmarked, lpattern("-")), saving(kdensity_both, replace) xtitle("revenue (Ksh)") ytitle("Percentage of farmers") legend(order(1 "Blue Plot" 2 "Unmarked plot"))
{res}{txt}(file kdensity_both.gph saved)

{com}. graph export "both_revenue_blue.pdf", replace // this line is necessary to save in PDF format
{txt}(file /Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3/both_revenue_blue.pdf written in PDF format)

{com}. 
. // Dealing with outliers
. // Sample trimming (i.e., dropping observations that are too large/small)
. su rate_of_return, d

                       {txt}rate_of_return
{hline 61}
      Percentiles      Smallest
 1%    {res} -43.0784      -303.4385
{txt} 5%    {res} -13.5147      -115.2545
{txt}10%    {res}-7.141827      -82.52691       {txt}Obs         {res}        622
{txt}25%    {res}-1.924888      -70.56084       {txt}Sum of Wgt. {res}        622

{txt}50%    {res} .3028125                      {txt}Mean          {res}  2.10442
                        {txt}Largest       Std. Dev.     {res} 29.47147
{txt}75%    {res}  3.27173       240.9508
{txt}90%    {res} 8.119684       262.5536       {txt}Variance      {res} 868.5675
{txt}95%    {res} 18.81494        313.536       {txt}Skewness      {res} 4.151109
{txt}99%    {res} 77.63403       313.5361       {txt}Kurtosis      {res} 77.86307
{txt}
{com}. gen rate_of_return_p5 = `r(p5)'
{txt}
{com}. gen rate_of_return_p95 = `r(p95)'
{txt}
{com}. 
. sss
{err}command {bf}sss{sf} is unrecognized
{txt}{search r(199):r(199);}

end of do-file

{search r(199):r(199);}

{com}. su rate_of_return*

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
rate_of_re~n {c |}{res}        622     2.10442    29.47147  -303.4385   313.5361
{txt}rate_of_r~p5 {c |}{res}      1,248    -13.5147           0   -13.5147   -13.5147
{txt}rate_of_r~95 {c |}{res}      1,248    18.81494           0   18.81494   18.81494

{com}. do "/var/folders/wy/26794k5d4ydcf0nqcms58wkr0000gn/T//SD43744.000000"
{txt}
{com}. kdensity rate_of_return if rate_of_return>rate_of_return_p5 & rate_of_return<rate_of_return_p95, xtitle("revenue (Ksh)") ytitle("percentage of farmers") title("Rate of return - excluding top and bottom 5%")
{res}{txt}
{com}. graph export "kdensity_return.pdf", replace // this line is necessary to save in PDF format
{txt}(file /Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3/kdensity_return.pdf written in PDF format)

{com}. 
{txt}end of do-file

{com}. do "/var/folders/wy/26794k5d4ydcf0nqcms58wkr0000gn/T//SD43744.000000"
{txt}
{com}. twoway ///
> (kdensity rate_of_return if rate_of_return>rate_of_return_p5 & rate_of_return<rate_of_return_p95 & training==1) ///
> (kdensity rate_of_return if rate_of_return>rate_of_return_p5 & rate_of_return<rate_of_return_p95 & training==0, lpattern("-")), ///
> xtitle("revenue (Ksh)") ytitle("Percentage of farmers") legend(order(1 "Training group" 2 "Control group"))
{res}{txt}
{com}. graph export "kdensity_return_training.pdf", replace // this line is necessary to save in PDF format
{txt}(file /Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3/kdensity_return_training.pdf written in PDF format)

{com}. 
{txt}end of do-file

{com}. do "/var/folders/wy/26794k5d4ydcf0nqcms58wkr0000gn/T//SD43744.000000"
{txt}
{com}. reg revenue_blue training

{txt}      Source {c |}       SS           df       MS      Number of obs   ={res}       813
{txt}{hline 13}{c +}{hline 34}   F(1, 811)       = {res}     7.42
{txt}       Model {c |} {res} 64899617.5         1  64899617.5   {txt}Prob > F        ={res}    0.0066
{txt}    Residual {c |} {res} 7.0894e+09       811  8741588.15   {txt}R-squared       ={res}    0.0091
{txt}{hline 13}{c +}{hline 34}   Adj R-squared   ={res}    0.0078
{txt}       Total {c |} {res} 7.1543e+09       812  8810748.29   {txt}Root MSE        =   {res} 2956.6

{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 1}revenue_blue{col 14}{c |}      Coef.{col 26}   Std. Err.{col 38}      t{col 46}   P>|t|{col 54}     [95% Con{col 67}f. Interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 4}training {c |}{col 14}{res}{space 2}  565.599{col 26}{space 2} 207.5787{col 37}{space 1}    2.72{col 46}{space 3}0.007{col 54}{space 4} 158.1442{col 67}{space 3} 973.0538
{txt}{space 7}_cons {c |}{col 14}{res}{space 2} 7401.362{col 26}{space 2}  143.586{col 37}{space 1}   51.55{col 46}{space 3}0.000{col 54}{space 4} 7119.518{col 67}{space 3} 7683.206
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{res}{txt}
{com}. 
{txt}end of do-file

{com}. do "/Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3/Econ120_F20_Section3.do"
{txt}
{com}. * ---------------------------- *
. * Econ120 (J. Robinson, F2020) *
. * Section 3 (Oct. 19, 2020)        * NOTE: all the path directories are based on my own computer, 
. * TA: David Sungho Park        *       so you should change them according to yours.
. * ---------------------------- *
. 
. clear all
{txt}
{com}. set more off
{txt}
{com}. 
. cap noisily cd "/Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3/" // Note: I changed this from previous do-files for Sections 1 & 2
{res}/Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3
{txt}
{com}. 
. //log using "Econ120_F20_Section3.smcl", replace // you can uncomment this line if you want to keep a Stata log file
. 
. //ssc install estout // you need to install this package only once
. 
. use "farming.dta", clear
{txt}
{com}. 
. // Getting sumstats 
. su kg_tdfert_blue kg_plantfert_blue packets_hyb_blue

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
kg_tdfert_~e {c |}{res}        822     12.3455    1.376406          0         25
{txt}kg_plantfe~e {c |}{res}        811    11.31751    3.389863          0         25
{txt}packets_hy~e {c |}{res}        816    1.370196    .4662883          0         10
{txt}
{com}. su kg_tdfert_unmarked kg_plantfert_unmarked packets_hyb_unmarked

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
kg_tdfert_~d {c |}{res}        820     8.09878    7.103199          0         75
{txt}kg_plantfe~d {c |}{res}        806    6.143238    6.342009          0         25
{txt}packets_hy~d {c |}{res}        812    1.314483    .5807212          0         10
{txt}
{com}. 
. // Testing for mean differences
. gen kg_tdfert_diff              = kg_tdfert_blue        - kg_tdfert_unmarked
{txt}(435 missing values generated)

{com}. gen kg_plantfert_diff   = kg_plantfert_blue - kg_plantfert_unmarked
{txt}(447 missing values generated)

{com}. gen packets_hyb_diff    = packets_hyb_blue      - packets_hyb_unmarked
{txt}(436 missing values generated)

{com}. 
. ttest kg_tdfert_diff    = 0

{txt}One-sample t test
{hline 9}{c TT}{hline 68}
Variable{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
kg_td~ff {c |}{res}{col 12}    813{col 22} 4.195572{col 34} .2448409{col 46} 6.981185{col 58} 3.714976{col 70} 4.676168
{txt}{hline 9}{c BT}{hline 68}
    mean = mean({res}kg_tdfert_diff{txt})                                   t = {res} 17.1359
{txt}Ho: mean = {res}0                                     {txt}degrees of freedom = {res}     812

    {txt}Ha: mean < {res}0                 {txt}Ha: mean != {res}0                 {txt}Ha: mean > {res}0
 {txt}Pr(T < t) = {res}1.0000         {txt}Pr(|T| > |t|) = {res}0.0000          {txt}Pr(T > t) = {res}0.0000
{txt}
{com}. ttest kg_plantfert_diff = 0

{txt}One-sample t test
{hline 9}{c TT}{hline 68}
Variable{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
kg_pl~ff {c |}{res}{col 12}    801{col 22} 5.152996{col 34} .2192189{col 46} 6.204321{col 58} 4.722684{col 70} 5.583308
{txt}{hline 9}{c BT}{hline 68}
    mean = mean({res}kg_plantfert_diff{txt})                                t = {res} 23.5062
{txt}Ho: mean = {res}0                                     {txt}degrees of freedom = {res}     800

    {txt}Ha: mean < {res}0                 {txt}Ha: mean != {res}0                 {txt}Ha: mean > {res}0
 {txt}Pr(T < t) = {res}1.0000         {txt}Pr(|T| > |t|) = {res}0.0000          {txt}Pr(T > t) = {res}0.0000
{txt}
{com}. ttest packets_hyb_diff  = 0

{txt}One-sample t test
{hline 9}{c TT}{hline 68}
Variable{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
packe~ff {c |}{res}{col 12}    812{col 22} .0559975{col 34} .0137451{col 46} .3916762{col 58} .0290173{col 70} .0829778
{txt}{hline 9}{c BT}{hline 68}
    mean = mean({res}packets_hyb_diff{txt})                                 t = {res}  4.0740
{txt}Ho: mean = {res}0                                     {txt}degrees of freedom = {res}     811

    {txt}Ha: mean < {res}0                 {txt}Ha: mean != {res}0                 {txt}Ha: mean > {res}0
 {txt}Pr(T < t) = {res}1.0000         {txt}Pr(|T| > |t|) = {res}0.0001          {txt}Pr(T > t) = {res}0.0000
{txt}
{com}. 
. // Constructing mean-difference table (similar to what you've done for Econ104)
. preserve
{txt}
{com}.         // First step: we need to reshape the dataset from "wide" format to "long" format
.         keep respondent_id kg_tdfert_unmarked kg_plantfert_unmarked packets_hyb_unmarked kg_tdfert_blue kg_plantfert_blue packets_hyb_blue 
{txt}
{com}.         reshape long kg_tdfert kg_plantfert packets_hyb, i(respondent_id) j(plot,string)
{txt}(note: j = _blue _unmarked)

Data{col 36}wide{col 43}->{col 48}long
{hline 77}
Number of obs.                 {res}    1248   {txt}->{res}    2496
{txt}Number of variables            {res}       7   {txt}->{res}       5
{txt}j variable (2 values)                     ->   {res}plot
{txt}xij variables:
      {res}kg_tdfert_blue kg_tdfert_unmarked   {txt}->   {res}kg_tdfert
kg_plantfert_blue kg_plantfert_unmarked   {txt}->   {res}kg_plantfert
  packets_hyb_blue packets_hyb_unmarked   {txt}->   {res}packets_hyb
{txt}{hline 77}

{com}. 
.         // Step 2: exporting into single table (similar to what you've done for Econ104)
.         est clear 
{txt}
{com}.         eststo unmarked:        estpost summarize       kg_tdfert kg_plantfert packets_hyb if plot=="_unmarked"

{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(sum_w)}{space 1}{space 1}{ralign 9:e(mean)}{space 1}{space 1}{ralign 9:e(Var)}{space 1}{space 1}{ralign 9:e(sd)}{space 1}{space 1}{ralign 9:e(min)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      820}}}{space 1}{space 1}{ralign 9:{res:{sf:      820}}}{space 1}{space 1}{ralign 9:{res:{sf:  8.09878}}}{space 1}{space 1}{ralign 9:{res:{sf: 50.45543}}}{space 1}{space 1}{ralign 9:{res:{sf: 7.103199}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      806}}}{space 1}{space 1}{ralign 9:{res:{sf:      806}}}{space 1}{space 1}{ralign 9:{res:{sf: 6.143238}}}{space 1}{space 1}{ralign 9:{res:{sf: 40.22108}}}{space 1}{space 1}{ralign 9:{res:{sf: 6.342009}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      812}}}{space 1}{space 1}{ralign 9:{res:{sf:      812}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.314483}}}{space 1}{space 1}{ralign 9:{res:{sf: .3372371}}}{space 1}{space 1}{ralign 9:{res:{sf: .5807212}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(max)}{space 1}{space 1}{ralign 9:e(sum)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       75}}}{space 1}{space 1}{ralign 9:{res:{sf:     6641}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       25}}}{space 1}{space 1}{ralign 9:{res:{sf:  4951.45}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       10}}}{space 1}{space 1}{ralign 9:{res:{sf:  1067.36}}}{space 1}

{com}.         eststo blue:            estpost summarize       kg_tdfert kg_plantfert packets_hyb if plot=="_blue"

{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(sum_w)}{space 1}{space 1}{ralign 9:e(mean)}{space 1}{space 1}{ralign 9:e(Var)}{space 1}{space 1}{ralign 9:e(sd)}{space 1}{space 1}{ralign 9:e(min)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      822}}}{space 1}{space 1}{ralign 9:{res:{sf:      822}}}{space 1}{space 1}{ralign 9:{res:{sf:  12.3455}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.894493}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.376406}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      811}}}{space 1}{space 1}{ralign 9:{res:{sf:      811}}}{space 1}{space 1}{ralign 9:{res:{sf: 11.31751}}}{space 1}{space 1}{ralign 9:{res:{sf: 11.49117}}}{space 1}{space 1}{ralign 9:{res:{sf: 3.389863}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      816}}}{space 1}{space 1}{ralign 9:{res:{sf:      816}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.370196}}}{space 1}{space 1}{ralign 9:{res:{sf: .2174247}}}{space 1}{space 1}{ralign 9:{res:{sf: .4662883}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(max)}{space 1}{space 1}{ralign 9:e(sum)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       25}}}{space 1}{space 1}{ralign 9:{res:{sf:    10148}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       25}}}{space 1}{space 1}{ralign 9:{res:{sf:   9178.5}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       10}}}{space 1}{space 1}{ralign 9:{res:{sf:  1118.08}}}{space 1}

{com}.         eststo difference:      estpost ttest           kg_tdfert kg_plantfert packets_hyb, by(plot) unequal

{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(b)}{space 1}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(se)}{space 1}{space 1}{ralign 9:e(t)}{space 1}{space 1}{ralign 9:e(df_t)}{space 1}{space 1}{ralign 9:e(p_l)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 4.246718}}}{space 1}{space 1}{ralign 9:{res:{sf:     1642}}}{space 1}{space 1}{ralign 9:{res:{sf: .2526574}}}{space 1}{space 1}{ralign 9:{res:{sf: 16.80821}}}{space 1}{space 1}{ralign 9:{res:{sf: 880.2708}}}{space 1}{space 1}{ralign 9:{res:{sf:        1}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 5.174271}}}{space 1}{space 1}{ralign 9:{res:{sf:     1617}}}{space 1}{space 1}{ralign 9:{res:{sf: .2531229}}}{space 1}{space 1}{ralign 9:{res:{sf: 20.44173}}}{space 1}{space 1}{ralign 9:{res:{sf: 1228.602}}}{space 1}{space 1}{ralign 9:{res:{sf:        1}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .0557133}}}{space 1}{space 1}{ralign 9:{res:{sf:     1628}}}{space 1}{space 1}{ralign 9:{res:{sf: .0261107}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.133735}}}{space 1}{space 1}{ralign 9:{res:{sf: 1550.406}}}{space 1}{space 1}{ralign 9:{res:{sf: .9834895}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(p)}{space 1}{space 1}{ralign 9:e(p_u)}{space 1}{space 1}{ralign 9:e(N_1)}{space 1}{space 1}{ralign 9:e(mu_1)}{space 1}{space 1}{ralign 9:e(N_2)}{space 1}{space 1}{ralign 9:e(mu_2)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 3.39e-55}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.69e-55}}}{space 1}{space 1}{ralign 9:{res:{sf:      822}}}{space 1}{space 1}{ralign 9:{res:{sf:  12.3455}}}{space 1}{space 1}{ralign 9:{res:{sf:      820}}}{space 1}{space 1}{ralign 9:{res:{sf:  8.09878}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 3.55e-80}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.78e-80}}}{space 1}{space 1}{ralign 9:{res:{sf:      811}}}{space 1}{space 1}{ralign 9:{res:{sf: 11.31751}}}{space 1}{space 1}{ralign 9:{res:{sf:      806}}}{space 1}{space 1}{ralign 9:{res:{sf: 6.143238}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf:  .033021}}}{space 1}{space 1}{ralign 9:{res:{sf: .0165105}}}{space 1}{space 1}{ralign 9:{res:{sf:      816}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.370196}}}{space 1}{space 1}{ralign 9:{res:{sf:      812}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.314483}}}{space 1}

{com}. 
.         esttab unmarked blue difference using "Section3_table1_raw.csv", replace  cells("mean(pattern(1 1 0) fmt(%9.2f)) b(pattern(0 0 1) fmt(%9.2f) star)" "sd(pattern(1 1 0) fmt(%9.2f) par) se(pattern(0 0 1) fmt(%9.2f) par)") starlevels(* 0.10 ** 0.05 *** 0.01)  plain 
{res}{txt}(output written to {browse  `"Section3_table1_raw.csv"'})

{com}. restore
{txt}
{com}. 
. // Calculating monetary cost of inputs
. gen input_ksh_blue = kg_tdfert_blue*65 + kg_plantfert_blue*70 + packets_hyb_blue*230
{txt}(488 missing values generated)

{com}. gen input_ksh_unmarked = kg_tdfert_unmarked*65 + kg_plantfert_unmarked*70 + packets_hyb_unmarked*230
{txt}(495 missing values generated)

{com}. 
. ttest input_ksh_blue = input_ksh_unmarked

{txt}Paired t test
{hline 9}{c TT}{hline 68}
Variable{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
input_~e {c |}{res}{col 12}    741{col 22} 1909.007{col 34} 10.58548{col 46} 288.1508{col 58} 1888.226{col 70} 1929.788
{txt}input_~d {c |}{res}{col 12}    741{col 22} 1265.847{col 34} 28.75187{col 46} 782.6636{col 58} 1209.402{col 70} 1322.292
{txt}{hline 9}{c +}{hline 68}
    diff {c |}{res}{col 12}    741{col 22} 643.1601{col 34} 27.52955{col 46} 749.3906{col 58} 589.1147{col 70} 697.2054
{txt}{hline 9}{c BT}{hline 68}
     mean(diff) = mean({res}input_ksh_blue{txt} - {res}input_ksh_unma~d{txt})         t = {res} 23.3625
{txt} Ho: mean(diff) = 0                              degrees of freedom = {res}     740

 {txt}Ha: mean(diff) < 0           Ha: mean(diff) != 0           Ha: mean(diff) > 0
 Pr(T < t) = {res}1.0000         {txt}Pr(|T| > |t|) = {res}0.0000          {txt}Pr(T > t) = {res}0.0000
{txt}
{com}. 
.         // FYI: To export in nice-looking table format, you can do something similar to above
.         preserve
{txt}
{com}.                 // Step 1: eshaping the dataset from "wide" to "long" 
.                 keep respondent_id input_ksh_blue input_ksh_unmarked
{txt}
{com}.                 reshape long input_ksh, i(respondent_id) j(plot,string)
{txt}(note: j = _blue _unmarked)

Data{col 36}wide{col 43}->{col 48}long
{hline 77}
Number of obs.                 {res}    1248   {txt}->{res}    2496
{txt}Number of variables            {res}       3   {txt}->{res}       3
{txt}j variable (2 values)                     ->   {res}plot
{txt}xij variables:
      {res}input_ksh_blue input_ksh_unmarked   {txt}->   {res}input_ksh
{txt}{hline 77}

{com}. 
.                 // Step 2: exporting into single table (similar to what you've done for Econ104)
.                 est clear 
{txt}
{com}.                 eststo unmarked:        estpost summarize       input_ksh if plot=="_unmarked"

{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(sum_w)}{space 1}{space 1}{ralign 9:e(mean)}{space 1}{space 1}{ralign 9:e(Var)}{space 1}{space 1}{ralign 9:e(sd)}{space 1}{space 1}{ralign 9:e(min)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:input_ksh}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      753}}}{space 1}{space 1}{ralign 9:{res:{sf:      753}}}{space 1}{space 1}{ralign 9:{res:{sf: 1258.903}}}{space 1}{space 1}{ralign 9:{res:{sf: 609995.3}}}{space 1}{space 1}{ralign 9:{res:{sf:  781.022}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(max)}{space 1}{space 1}{ralign 9:e(sum)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:input_ksh}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     6095}}}{space 1}{space 1}{ralign 9:{res:{sf: 947954.3}}}{space 1}

{com}.                 eststo blue:            estpost summarize       input_ksh if plot=="_blue"

{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(sum_w)}{space 1}{space 1}{ralign 9:e(mean)}{space 1}{space 1}{ralign 9:e(Var)}{space 1}{space 1}{ralign 9:e(sd)}{space 1}{space 1}{ralign 9:e(min)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:input_ksh}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      760}}}{space 1}{space 1}{ralign 9:{res:{sf:      760}}}{space 1}{space 1}{ralign 9:{res:{sf: 1909.561}}}{space 1}{space 1}{ralign 9:{res:{sf:  81324.3}}}{space 1}{space 1}{ralign 9:{res:{sf: 285.1742}}}{space 1}{space 1}{ralign 9:{res:{sf:    812.5}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(max)}{space 1}{space 1}{ralign 9:e(sum)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:input_ksh}{space 1}{c |}{space 1}{ralign 9:{res:{sf:   3952.5}}}{space 1}{space 1}{ralign 9:{res:{sf:  1451267}}}{space 1}

{com}.                 eststo difference:      estpost ttest           input_ksh, by(plot) unequal

{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(b)}{space 1}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(se)}{space 1}{space 1}{ralign 9:e(t)}{space 1}{space 1}{ralign 9:e(df_t)}{space 1}{space 1}{ralign 9:e(p_l)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:input_ksh}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 650.6579}}}{space 1}{space 1}{ralign 9:{res:{sf:     1513}}}{space 1}{space 1}{ralign 9:{res:{sf: 30.28353}}}{space 1}{space 1}{ralign 9:{res:{sf: 21.48553}}}{space 1}{space 1}{ralign 9:{res:{sf: 947.4087}}}{space 1}{space 1}{ralign 9:{res:{sf:        1}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(p)}{space 1}{space 1}{ralign 9:e(p_u)}{space 1}{space 1}{ralign 9:e(N_1)}{space 1}{space 1}{ralign 9:e(mu_1)}{space 1}{space 1}{ralign 9:e(N_2)}{space 1}{space 1}{ralign 9:e(mu_2)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:input_ksh}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 9.90e-84}}}{space 1}{space 1}{ralign 9:{res:{sf: 4.95e-84}}}{space 1}{space 1}{ralign 9:{res:{sf:      760}}}{space 1}{space 1}{ralign 9:{res:{sf: 1909.561}}}{space 1}{space 1}{ralign 9:{res:{sf:      753}}}{space 1}{space 1}{ralign 9:{res:{sf: 1258.903}}}{space 1}

{com}. 
.                 esttab unmarked blue difference using "Section3_table2_raw.csv", replace  cells("mean(pattern(1 1 0) fmt(%9.2f)) b(pattern(0 0 1) fmt(%9.2f) star)" "sd(pattern(1 1 0) fmt(%9.2f) par) se(pattern(0 0 1) fmt(%9.2f) par)") starlevels(* 0.10 ** 0.05 *** 0.01)  plain 
{res}{txt}(output written to {browse  `"Section3_table2_raw.csv"'})

{com}.         restore
{txt}
{com}. 
. // Calculating rate of return
. gen rate_of_return = ((revenue_blue - revenue_unmarked) - (input_ksh_blue - input_ksh_unmarked)) / (input_ksh_blue - input_ksh_unmarked)
{txt}(626 missing values generated)

{com}. su rate_of_return, d

                       {txt}rate_of_return
{hline 61}
      Percentiles      Smallest
 1%    {res} -43.0784      -303.4385
{txt} 5%    {res} -13.5147      -115.2545
{txt}10%    {res}-7.141827      -82.52691       {txt}Obs         {res}        622
{txt}25%    {res}-1.924888      -70.56084       {txt}Sum of Wgt. {res}        622

{txt}50%    {res} .3028125                      {txt}Mean          {res}  2.10442
                        {txt}Largest       Std. Dev.     {res} 29.47147
{txt}75%    {res}  3.27173       240.9508
{txt}90%    {res} 8.119684       262.5536       {txt}Variance      {res} 868.5675
{txt}95%    {res} 18.81494        313.536       {txt}Skewness      {res} 4.151109
{txt}99%    {res} 77.63403       313.5361       {txt}Kurtosis      {res} 77.86307
{txt}
{com}. 
. // Histograms
. histogram revenue_blue, saving(histogram_revenue_blue, replace) xtitle("revenue (Ksh)") ytitle("percentage of farmers") title("Distribution of revenue on blue plot")
{txt}(bin={res}28{txt}, start={res}0{txt}, width={res}653.48319{txt})
{res}{txt}(file histogram_revenue_blue.gph saved)

{com}. graph export "histogram_revenue_blue.pdf", replace // this line is necessary to save in PDF format
{txt}(file /Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3/histogram_revenue_blue.pdf written in PDF format)

{com}. 
. kdensity revenue_blue, saving(histogram_revenue_blue, replace) xtitle("revenue (Ksh)") ytitle("percentage of farmers") title("Distribution of revenue on blue plot")
{res}{txt}(file histogram_revenue_blue.gph saved)

{com}. graph export "kdensity_revenue_blue.pdf", replace // this line is necessary to save in PDF format
{txt}(file /Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3/kdensity_revenue_blue.pdf written in PDF format)

{com}. 
. // Putting two graphs into a single figure
. twoway (kdensity revenue_blue) (kdensity revenue_unmarked, lpattern("-")), saving(kdensity_both, replace) xtitle("revenue (Ksh)") ytitle("Percentage of farmers") legend(order(1 "Blue Plot" 2 "Unmarked plot"))
{res}{txt}(file kdensity_both.gph saved)

{com}. graph export "both_revenue_blue.pdf", replace // this line is necessary to save in PDF format
{txt}(file /Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3/both_revenue_blue.pdf written in PDF format)

{com}. 
. // Dealing with outliers
. su rate_of_return, d

                       {txt}rate_of_return
{hline 61}
      Percentiles      Smallest
 1%    {res} -43.0784      -303.4385
{txt} 5%    {res} -13.5147      -115.2545
{txt}10%    {res}-7.141827      -82.52691       {txt}Obs         {res}        622
{txt}25%    {res}-1.924888      -70.56084       {txt}Sum of Wgt. {res}        622

{txt}50%    {res} .3028125                      {txt}Mean          {res}  2.10442
                        {txt}Largest       Std. Dev.     {res} 29.47147
{txt}75%    {res}  3.27173       240.9508
{txt}90%    {res} 8.119684       262.5536       {txt}Variance      {res} 868.5675
{txt}95%    {res} 18.81494        313.536       {txt}Skewness      {res} 4.151109
{txt}99%    {res} 77.63403       313.5361       {txt}Kurtosis      {res} 77.86307
{txt}
{com}. di `r(p5)'  // 5th-%tile value
{res}-13.514698
{txt}
{com}. di `r(p95)' // 95th-%tile value
{res}18.814936
{txt}
{com}.         gen rate_of_return_p5 = `r(p5)'
{txt}
{com}.         gen rate_of_return_p95 = `r(p95)'
{txt}
{com}. 
. kdensity rate_of_return if rate_of_return>rate_of_return_p5 & rate_of_return<rate_of_return_p95, xtitle("revenue (Ksh)") ytitle("percentage of farmers") title("Rate of return - excluding top and bottom 5%")
{res}{txt}
{com}. graph export "kdensity_return.pdf", replace // this line is necessary to save in PDF format
{txt}(file /Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3/kdensity_return.pdf written in PDF format)

{com}. 
. // Bonus
. twoway ///
>         (kdensity rate_of_return if rate_of_return>rate_of_return_p5 & rate_of_return<rate_of_return_p95 & training==1) ///
>         (kdensity rate_of_return if rate_of_return>rate_of_return_p5 & rate_of_return<rate_of_return_p95 & training==0, lpattern("-")), ///
>         xtitle("revenue (Ksh)") ytitle("Percentage of farmers") legend(order(1 "Training group" 2 "Control group"))
{res}{txt}
{com}. graph export "kdensity_return_training.pdf", replace // this line is necessary to save in PDF format
{txt}(file /Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3/kdensity_return_training.pdf written in PDF format)

{com}. 
. // REVIEW: exporting regression tables
. local i = 1
{txt}
{com}. foreach YYY in revenue_blue revenue_unmarked rate_of_return {c -(}
{txt}  2{com}.         eststo s3_reg_`i': reg `YYY' training 
{txt}  3{com}.         su `YYY' if training==0 
{txt}  4{com}.         estadd scalar controlmean = r(mean)
{txt}  5{com}.         local i = `i' + 1
{txt}  6{com}. {c )-}

{txt}      Source {c |}       SS           df       MS      Number of obs   ={res}       813
{txt}{hline 13}{c +}{hline 34}   F(1, 811)       = {res}     7.42
{txt}       Model {c |} {res} 64899617.5         1  64899617.5   {txt}Prob > F        ={res}    0.0066
{txt}    Residual {c |} {res} 7.0894e+09       811  8741588.15   {txt}R-squared       ={res}    0.0091
{txt}{hline 13}{c +}{hline 34}   Adj R-squared   ={res}    0.0078
{txt}       Total {c |} {res} 7.1543e+09       812  8810748.29   {txt}Root MSE        =   {res} 2956.6

{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 1}revenue_blue{col 14}{c |}      Coef.{col 26}   Std. Err.{col 38}      t{col 46}   P>|t|{col 54}     [95% Con{col 67}f. Interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 4}training {c |}{col 14}{res}{space 2}  565.599{col 26}{space 2} 207.5787{col 37}{space 1}    2.72{col 46}{space 3}0.007{col 54}{space 4} 158.1442{col 67}{space 3} 973.0538
{txt}{space 7}_cons {c |}{col 14}{res}{space 2} 7401.362{col 26}{space 2}  143.586{col 37}{space 1}   51.55{col 46}{space 3}0.000{col 54}{space 4} 7119.518{col 67}{space 3} 7683.206
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{res}
{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
revenue_blue {c |}{res}        424    7401.362     3049.71          0   18297.53

{txt}added scalar:
        e(controlmean) =  {res}7401.362

{txt}      Source {c |}       SS           df       MS      Number of obs   ={res}       810
{txt}{hline 13}{c +}{hline 34}   F(1, 808)       = {res}     0.38
{txt}       Model {c |} {res} 3374435.96         1  3374435.96   {txt}Prob > F        ={res}    0.5399
{txt}    Residual {c |} {res} 7.2514e+09       808  8974473.65   {txt}R-squared       ={res}    0.0005
{txt}{hline 13}{c +}{hline 34}   Adj R-squared   ={res}   -0.0008
{txt}       Total {c |} {res} 7.2547e+09       809  8967551.47   {txt}Root MSE        =   {res} 2995.7

{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 1}revenue_un~d{col 14}{c |}      Coef.{col 26}   Std. Err.{col 38}      t{col 46}   P>|t|{col 54}     [95% Con{col 67}f. Interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 4}training {c |}{col 14}{res}{space 2} 129.2463{col 26}{space 2} 210.7765{col 37}{space 1}    0.61{col 46}{space 3}0.540{col 54}{space 4}-284.4877{col 67}{space 3} 542.9804
{txt}{space 7}_cons {c |}{col 14}{res}{space 2} 6171.098{col 26}{space 2} 145.3149{col 37}{space 1}   42.47{col 46}{space 3}0.000{col 54}{space 4} 5885.858{col 67}{space 3} 6456.337
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{res}
{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
revenue_un~d {c |}{res}        425    6171.098    3106.787          0   15273.14

{txt}added scalar:
        e(controlmean) =  {res}6171.0975

{txt}      Source {c |}       SS           df       MS      Number of obs   ={res}       607
{txt}{hline 13}{c +}{hline 34}   F(1, 605)       = {res}     0.73
{txt}       Model {c |} {res} 653.127029         1  653.127029   {txt}Prob > F        ={res}    0.3918
{txt}    Residual {c |} {res} 538008.297       605  889.269912   {txt}R-squared       ={res}    0.0012
{txt}{hline 13}{c +}{hline 34}   Adj R-squared   ={res}   -0.0004
{txt}       Total {c |} {res} 538661.424       606  888.880237   {txt}Root MSE        =   {res} 29.821

{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 1}rate_of_re~n{col 14}{c |}      Coef.{col 26}   Std. Err.{col 38}      t{col 46}   P>|t|{col 54}     [95% Con{col 67}f. Interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 4}training {c |}{col 14}{res}{space 2} 2.079826{col 26}{space 2} 2.426861{col 37}{space 1}    0.86{col 46}{space 3}0.392{col 54}{space 4}-2.686269{col 67}{space 3} 6.845921
{txt}{space 7}_cons {c |}{col 14}{res}{space 2} 1.201006{col 26}{space 2} 1.654151{col 37}{space 1}    0.73{col 46}{space 3}0.468{col 54}{space 4}-2.047569{col 67}{space 3} 4.449581
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{res}
{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
rate_of_re~n {c |}{res}        325    1.201006    32.57952  -303.4385   313.5361

{txt}added scalar:
        e(controlmean) =  {res}1.2010062
{txt}
{com}. 
. estout s3_reg_* using "Section3_table2_raw.csv", replace style(tab) delimiter(",") mlabel(,depvars) collabel(none) label ///
>         drop(_cons) stats(controlmean N, labels("Control mean" "Obs") fmt(%9.2f %9.0fc)) starlevels(* 0.10 ** 0.05 *** 0.01) ///
>         cells("b(fmt(%9.2f) star)" "se(fmt(%9.2f) par)") 
{res}{txt}(output written to {browse  `"Section3_table2_raw.csv"'})

{com}. 
. 
. 
. sss
{err}command {bf}sss{sf} is unrecognized
{txt}{search r(199):r(199);}

end of do-file

{search r(199):r(199);}

{com}. do "/var/folders/wy/26794k5d4ydcf0nqcms58wkr0000gn/T//SD43744.000000"
{txt}
{com}. local i = 1
{txt}
{com}. foreach YYY in revenue_blue revenue_unmarked rate_of_return {c -(}
{txt}  2{com}.         eststo s3_reg_`i': reg `YYY' training 
{txt}  3{com}.         su `YYY' if training==0 
{txt}  4{com}.         estadd scalar controlmean = r(mean)
{txt}  5{com}.         estadd scalar controlsd = r(sd)
{txt}  6{com}.         local i = `i' + 1
{txt}  7{com}. {c )-}

{txt}      Source {c |}       SS           df       MS      Number of obs   ={res}       813
{txt}{hline 13}{c +}{hline 34}   F(1, 811)       = {res}     7.42
{txt}       Model {c |} {res} 64899617.5         1  64899617.5   {txt}Prob > F        ={res}    0.0066
{txt}    Residual {c |} {res} 7.0894e+09       811  8741588.15   {txt}R-squared       ={res}    0.0091
{txt}{hline 13}{c +}{hline 34}   Adj R-squared   ={res}    0.0078
{txt}       Total {c |} {res} 7.1543e+09       812  8810748.29   {txt}Root MSE        =   {res} 2956.6

{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 1}revenue_blue{col 14}{c |}      Coef.{col 26}   Std. Err.{col 38}      t{col 46}   P>|t|{col 54}     [95% Con{col 67}f. Interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 4}training {c |}{col 14}{res}{space 2}  565.599{col 26}{space 2} 207.5787{col 37}{space 1}    2.72{col 46}{space 3}0.007{col 54}{space 4} 158.1442{col 67}{space 3} 973.0538
{txt}{space 7}_cons {c |}{col 14}{res}{space 2} 7401.362{col 26}{space 2}  143.586{col 37}{space 1}   51.55{col 46}{space 3}0.000{col 54}{space 4} 7119.518{col 67}{space 3} 7683.206
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{res}
{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
revenue_blue {c |}{res}        424    7401.362     3049.71          0   18297.53

{txt}added scalar:
        e(controlmean) =  {res}7401.362

{txt}added scalar:
          e(controlsd) =  {res}3049.7096

{txt}      Source {c |}       SS           df       MS      Number of obs   ={res}       810
{txt}{hline 13}{c +}{hline 34}   F(1, 808)       = {res}     0.38
{txt}       Model {c |} {res} 3374435.96         1  3374435.96   {txt}Prob > F        ={res}    0.5399
{txt}    Residual {c |} {res} 7.2514e+09       808  8974473.65   {txt}R-squared       ={res}    0.0005
{txt}{hline 13}{c +}{hline 34}   Adj R-squared   ={res}   -0.0008
{txt}       Total {c |} {res} 7.2547e+09       809  8967551.47   {txt}Root MSE        =   {res} 2995.7

{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 1}revenue_un~d{col 14}{c |}      Coef.{col 26}   Std. Err.{col 38}      t{col 46}   P>|t|{col 54}     [95% Con{col 67}f. Interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 4}training {c |}{col 14}{res}{space 2} 129.2463{col 26}{space 2} 210.7765{col 37}{space 1}    0.61{col 46}{space 3}0.540{col 54}{space 4}-284.4877{col 67}{space 3} 542.9804
{txt}{space 7}_cons {c |}{col 14}{res}{space 2} 6171.098{col 26}{space 2} 145.3149{col 37}{space 1}   42.47{col 46}{space 3}0.000{col 54}{space 4} 5885.858{col 67}{space 3} 6456.337
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{res}
{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
revenue_un~d {c |}{res}        425    6171.098    3106.787          0   15273.14

{txt}added scalar:
        e(controlmean) =  {res}6171.0975

{txt}added scalar:
          e(controlsd) =  {res}3106.7869

{txt}      Source {c |}       SS           df       MS      Number of obs   ={res}       607
{txt}{hline 13}{c +}{hline 34}   F(1, 605)       = {res}     0.73
{txt}       Model {c |} {res} 653.127029         1  653.127029   {txt}Prob > F        ={res}    0.3918
{txt}    Residual {c |} {res} 538008.297       605  889.269912   {txt}R-squared       ={res}    0.0012
{txt}{hline 13}{c +}{hline 34}   Adj R-squared   ={res}   -0.0004
{txt}       Total {c |} {res} 538661.424       606  888.880237   {txt}Root MSE        =   {res} 29.821

{txt}{hline 13}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 1}rate_of_re~n{col 14}{c |}      Coef.{col 26}   Std. Err.{col 38}      t{col 46}   P>|t|{col 54}     [95% Con{col 67}f. Interval]
{hline 13}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 4}training {c |}{col 14}{res}{space 2} 2.079826{col 26}{space 2} 2.426861{col 37}{space 1}    0.86{col 46}{space 3}0.392{col 54}{space 4}-2.686269{col 67}{space 3} 6.845921
{txt}{space 7}_cons {c |}{col 14}{res}{space 2} 1.201006{col 26}{space 2} 1.654151{col 37}{space 1}    0.73{col 46}{space 3}0.468{col 54}{space 4}-2.047569{col 67}{space 3} 4.449581
{txt}{hline 13}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{res}
{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
rate_of_re~n {c |}{res}        325    1.201006    32.57952  -303.4385   313.5361

{txt}added scalar:
        e(controlmean) =  {res}1.2010062

{txt}added scalar:
          e(controlsd) =  {res}32.579525
{txt}
{com}. 
. estout s3_reg_* using "Section3_table2_raw.csv", replace style(tab) delimiter(",") mlabel(,depvars) collabel(none) label ///
>         drop(_cons) stats(controlmean controlsd N, labels("Control mean" "Control SD" "Obs") fmt(%9.2f %9.2f %9.0fc)) starlevels(* 0.10 ** 0.05 *** 0.01) ///
>         cells("b(fmt(%9.2f) star)" "se(fmt(%9.2f) par)") 
{res}{txt}(output written to {browse  `"Section3_table2_raw.csv"'})

{com}. 
{txt}end of do-file

{com}. do "/var/folders/wy/26794k5d4ydcf0nqcms58wkr0000gn/T//SD43744.000000"
{txt}
{com}. * ---------------------------- *
. * Econ120 (J. Robinson, F2020) *
. * Section 3 (Oct. 19, 2020)        * NOTE: all the path directories are based on my own computer, 
. * TA: David Sungho Park        *       so you should change them according to yours.
. * ---------------------------- *
. 
. clear all
{txt}
{com}. set more off
{txt}
{com}. 
. cap noisily cd "/Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3/" // Note: I changed this from previous do-files for Sections 1 & 2
{res}/Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3
{txt}
{com}. 
. //log using "Econ120_F20_Section3.smcl", replace // you can uncomment this line if you want to keep a Stata log file
. 
. //ssc install estout // you need to install this package only once
. 
. use "farming.dta", clear
{txt}
{com}. 
. // Getting sumstats 
. su kg_tdfert_blue kg_plantfert_blue packets_hyb_blue

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
kg_tdfert_~e {c |}{res}        822     12.3455    1.376406          0         25
{txt}kg_plantfe~e {c |}{res}        811    11.31751    3.389863          0         25
{txt}packets_hy~e {c |}{res}        816    1.370196    .4662883          0         10
{txt}
{com}. su kg_tdfert_unmarked kg_plantfert_unmarked packets_hyb_unmarked

{txt}    Variable {c |}        Obs        Mean    Std. Dev.       Min        Max
{hline 13}{c +}{hline 57}
kg_tdfert_~d {c |}{res}        820     8.09878    7.103199          0         75
{txt}kg_plantfe~d {c |}{res}        806    6.143238    6.342009          0         25
{txt}packets_hy~d {c |}{res}        812    1.314483    .5807212          0         10
{txt}
{com}. 
. // Testing for mean differences
. gen kg_tdfert_diff              = kg_tdfert_blue        - kg_tdfert_unmarked
{txt}(435 missing values generated)

{com}. gen kg_plantfert_diff   = kg_plantfert_blue - kg_plantfert_unmarked
{txt}(447 missing values generated)

{com}. gen packets_hyb_diff    = packets_hyb_blue      - packets_hyb_unmarked
{txt}(436 missing values generated)

{com}. 
. ttest kg_tdfert_diff    = 0

{txt}One-sample t test
{hline 9}{c TT}{hline 68}
Variable{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
kg_td~ff {c |}{res}{col 12}    813{col 22} 4.195572{col 34} .2448409{col 46} 6.981185{col 58} 3.714976{col 70} 4.676168
{txt}{hline 9}{c BT}{hline 68}
    mean = mean({res}kg_tdfert_diff{txt})                                   t = {res} 17.1359
{txt}Ho: mean = {res}0                                     {txt}degrees of freedom = {res}     812

    {txt}Ha: mean < {res}0                 {txt}Ha: mean != {res}0                 {txt}Ha: mean > {res}0
 {txt}Pr(T < t) = {res}1.0000         {txt}Pr(|T| > |t|) = {res}0.0000          {txt}Pr(T > t) = {res}0.0000
{txt}
{com}. ttest kg_plantfert_diff = 0

{txt}One-sample t test
{hline 9}{c TT}{hline 68}
Variable{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
kg_pl~ff {c |}{res}{col 12}    801{col 22} 5.152996{col 34} .2192189{col 46} 6.204321{col 58} 4.722684{col 70} 5.583308
{txt}{hline 9}{c BT}{hline 68}
    mean = mean({res}kg_plantfert_diff{txt})                                t = {res} 23.5062
{txt}Ho: mean = {res}0                                     {txt}degrees of freedom = {res}     800

    {txt}Ha: mean < {res}0                 {txt}Ha: mean != {res}0                 {txt}Ha: mean > {res}0
 {txt}Pr(T < t) = {res}1.0000         {txt}Pr(|T| > |t|) = {res}0.0000          {txt}Pr(T > t) = {res}0.0000
{txt}
{com}. ttest packets_hyb_diff  = 0

{txt}One-sample t test
{hline 9}{c TT}{hline 68}
Variable{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
packe~ff {c |}{res}{col 12}    812{col 22} .0559975{col 34} .0137451{col 46} .3916762{col 58} .0290173{col 70} .0829778
{txt}{hline 9}{c BT}{hline 68}
    mean = mean({res}packets_hyb_diff{txt})                                 t = {res}  4.0740
{txt}Ho: mean = {res}0                                     {txt}degrees of freedom = {res}     811

    {txt}Ha: mean < {res}0                 {txt}Ha: mean != {res}0                 {txt}Ha: mean > {res}0
 {txt}Pr(T < t) = {res}1.0000         {txt}Pr(|T| > |t|) = {res}0.0001          {txt}Pr(T > t) = {res}0.0000
{txt}
{com}. 
. // Constructing mean-difference table (similar to what you've done for Econ104)
. preserve
{txt}
{com}.         // First step: we need to reshape the dataset from "wide" format to "long" format
.         keep respondent_id kg_tdfert_unmarked kg_plantfert_unmarked packets_hyb_unmarked kg_tdfert_blue kg_plantfert_blue packets_hyb_blue 
{txt}
{com}.         reshape long kg_tdfert kg_plantfert packets_hyb, i(respondent_id) j(plot,string)
{txt}(note: j = _blue _unmarked)

Data{col 36}wide{col 43}->{col 48}long
{hline 77}
Number of obs.                 {res}    1248   {txt}->{res}    2496
{txt}Number of variables            {res}       7   {txt}->{res}       5
{txt}j variable (2 values)                     ->   {res}plot
{txt}xij variables:
      {res}kg_tdfert_blue kg_tdfert_unmarked   {txt}->   {res}kg_tdfert
kg_plantfert_blue kg_plantfert_unmarked   {txt}->   {res}kg_plantfert
  packets_hyb_blue packets_hyb_unmarked   {txt}->   {res}packets_hyb
{txt}{hline 77}

{com}. 
.         // Step 2: exporting into single table (similar to what you've done for Econ104)
.         est clear 
{txt}
{com}.         eststo unmarked:        estpost summarize       kg_tdfert kg_plantfert packets_hyb if plot=="_unmarked"

{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(sum_w)}{space 1}{space 1}{ralign 9:e(mean)}{space 1}{space 1}{ralign 9:e(Var)}{space 1}{space 1}{ralign 9:e(sd)}{space 1}{space 1}{ralign 9:e(min)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      820}}}{space 1}{space 1}{ralign 9:{res:{sf:      820}}}{space 1}{space 1}{ralign 9:{res:{sf:  8.09878}}}{space 1}{space 1}{ralign 9:{res:{sf: 50.45543}}}{space 1}{space 1}{ralign 9:{res:{sf: 7.103199}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      806}}}{space 1}{space 1}{ralign 9:{res:{sf:      806}}}{space 1}{space 1}{ralign 9:{res:{sf: 6.143238}}}{space 1}{space 1}{ralign 9:{res:{sf: 40.22108}}}{space 1}{space 1}{ralign 9:{res:{sf: 6.342009}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      812}}}{space 1}{space 1}{ralign 9:{res:{sf:      812}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.314483}}}{space 1}{space 1}{ralign 9:{res:{sf: .3372371}}}{space 1}{space 1}{ralign 9:{res:{sf: .5807212}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(max)}{space 1}{space 1}{ralign 9:e(sum)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       75}}}{space 1}{space 1}{ralign 9:{res:{sf:     6641}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       25}}}{space 1}{space 1}{ralign 9:{res:{sf:  4951.45}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       10}}}{space 1}{space 1}{ralign 9:{res:{sf:  1067.36}}}{space 1}

{com}.         eststo blue:            estpost summarize       kg_tdfert kg_plantfert packets_hyb if plot=="_blue"

{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(sum_w)}{space 1}{space 1}{ralign 9:e(mean)}{space 1}{space 1}{ralign 9:e(Var)}{space 1}{space 1}{ralign 9:e(sd)}{space 1}{space 1}{ralign 9:e(min)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      822}}}{space 1}{space 1}{ralign 9:{res:{sf:      822}}}{space 1}{space 1}{ralign 9:{res:{sf:  12.3455}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.894493}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.376406}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      811}}}{space 1}{space 1}{ralign 9:{res:{sf:      811}}}{space 1}{space 1}{ralign 9:{res:{sf: 11.31751}}}{space 1}{space 1}{ralign 9:{res:{sf: 11.49117}}}{space 1}{space 1}{ralign 9:{res:{sf: 3.389863}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      816}}}{space 1}{space 1}{ralign 9:{res:{sf:      816}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.370196}}}{space 1}{space 1}{ralign 9:{res:{sf: .2174247}}}{space 1}{space 1}{ralign 9:{res:{sf: .4662883}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(max)}{space 1}{space 1}{ralign 9:e(sum)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       25}}}{space 1}{space 1}{ralign 9:{res:{sf:    10148}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       25}}}{space 1}{space 1}{ralign 9:{res:{sf:   9178.5}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf:       10}}}{space 1}{space 1}{ralign 9:{res:{sf:  1118.08}}}{space 1}

{com}.         eststo difference:      estpost ttest           kg_tdfert kg_plantfert packets_hyb, by(plot) unequal

{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(b)}{space 1}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(se)}{space 1}{space 1}{ralign 9:e(t)}{space 1}{space 1}{ralign 9:e(df_t)}{space 1}{space 1}{ralign 9:e(p_l)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 4.246718}}}{space 1}{space 1}{ralign 9:{res:{sf:     1642}}}{space 1}{space 1}{ralign 9:{res:{sf: .2526574}}}{space 1}{space 1}{ralign 9:{res:{sf: 16.80821}}}{space 1}{space 1}{ralign 9:{res:{sf: 880.2708}}}{space 1}{space 1}{ralign 9:{res:{sf:        1}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 5.174271}}}{space 1}{space 1}{ralign 9:{res:{sf:     1617}}}{space 1}{space 1}{ralign 9:{res:{sf: .2531229}}}{space 1}{space 1}{ralign 9:{res:{sf: 20.44173}}}{space 1}{space 1}{ralign 9:{res:{sf: 1228.602}}}{space 1}{space 1}{ralign 9:{res:{sf:        1}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf: .0557133}}}{space 1}{space 1}{ralign 9:{res:{sf:     1628}}}{space 1}{space 1}{ralign 9:{res:{sf: .0261107}}}{space 1}{space 1}{ralign 9:{res:{sf: 2.133735}}}{space 1}{space 1}{ralign 9:{res:{sf: 1550.406}}}{space 1}{space 1}{ralign 9:{res:{sf: .9834895}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(p)}{space 1}{space 1}{ralign 9:e(p_u)}{space 1}{space 1}{ralign 9:e(N_1)}{space 1}{space 1}{ralign 9:e(mu_1)}{space 1}{space 1}{ralign 9:e(N_2)}{space 1}{space 1}{ralign 9:e(mu_2)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:kg_tdfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 3.39e-55}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.69e-55}}}{space 1}{space 1}{ralign 9:{res:{sf:      822}}}{space 1}{space 1}{ralign 9:{res:{sf:  12.3455}}}{space 1}{space 1}{ralign 9:{res:{sf:      820}}}{space 1}{space 1}{ralign 9:{res:{sf:  8.09878}}}{space 1}
{space 0}{space 0}{ralign 12:kg_plantfert}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 3.55e-80}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.78e-80}}}{space 1}{space 1}{ralign 9:{res:{sf:      811}}}{space 1}{space 1}{ralign 9:{res:{sf: 11.31751}}}{space 1}{space 1}{ralign 9:{res:{sf:      806}}}{space 1}{space 1}{ralign 9:{res:{sf: 6.143238}}}{space 1}
{space 0}{space 0}{ralign 12:packets_hyb}{space 1}{c |}{space 1}{ralign 9:{res:{sf:  .033021}}}{space 1}{space 1}{ralign 9:{res:{sf: .0165105}}}{space 1}{space 1}{ralign 9:{res:{sf:      816}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.370196}}}{space 1}{space 1}{ralign 9:{res:{sf:      812}}}{space 1}{space 1}{ralign 9:{res:{sf: 1.314483}}}{space 1}

{com}. 
.         esttab unmarked blue difference using "Section3_table1_raw.csv", replace  cells("mean(pattern(1 1 0) fmt(%9.2f)) b(pattern(0 0 1) fmt(%9.2f) star)" "sd(pattern(1 1 0) fmt(%9.2f) par) se(pattern(0 0 1) fmt(%9.2f) par)") starlevels(* 0.10 ** 0.05 *** 0.01)  plain 
{res}{txt}(output written to {browse  `"Section3_table1_raw.csv"'})

{com}. restore
{txt}
{com}. 
. // Calculating monetary cost of inputs
. gen input_ksh_blue = kg_tdfert_blue*65 + kg_plantfert_blue*70 + packets_hyb_blue*230
{txt}(488 missing values generated)

{com}. gen input_ksh_unmarked = kg_tdfert_unmarked*65 + kg_plantfert_unmarked*70 + packets_hyb_unmarked*230
{txt}(495 missing values generated)

{com}. 
. ttest input_ksh_blue = input_ksh_unmarked

{txt}Paired t test
{hline 9}{c TT}{hline 68}
Variable{col 10}{c |}{col 16}Obs{col 27}Mean{col 35}Std. Err.{col 47}Std. Dev.{col 59}[95% Conf. Interval]
{hline 9}{c +}{hline 68}
input_~e {c |}{res}{col 12}    741{col 22} 1909.007{col 34} 10.58548{col 46} 288.1508{col 58} 1888.226{col 70} 1929.788
{txt}input_~d {c |}{res}{col 12}    741{col 22} 1265.847{col 34} 28.75187{col 46} 782.6636{col 58} 1209.402{col 70} 1322.292
{txt}{hline 9}{c +}{hline 68}
    diff {c |}{res}{col 12}    741{col 22} 643.1601{col 34} 27.52955{col 46} 749.3906{col 58} 589.1147{col 70} 697.2054
{txt}{hline 9}{c BT}{hline 68}
     mean(diff) = mean({res}input_ksh_blue{txt} - {res}input_ksh_unma~d{txt})         t = {res} 23.3625
{txt} Ho: mean(diff) = 0                              degrees of freedom = {res}     740

 {txt}Ha: mean(diff) < 0           Ha: mean(diff) != 0           Ha: mean(diff) > 0
 Pr(T < t) = {res}1.0000         {txt}Pr(|T| > |t|) = {res}0.0000          {txt}Pr(T > t) = {res}0.0000
{txt}
{com}. 
.         // FYI: To export in nice-looking table format, you can do something similar to above
.         preserve
{txt}
{com}.                 // Step 1: eshaping the dataset from "wide" to "long" 
.                 keep respondent_id input_ksh_blue input_ksh_unmarked
{txt}
{com}.                 reshape long input_ksh, i(respondent_id) j(plot,string)
{txt}(note: j = _blue _unmarked)

Data{col 36}wide{col 43}->{col 48}long
{hline 77}
Number of obs.                 {res}    1248   {txt}->{res}    2496
{txt}Number of variables            {res}       3   {txt}->{res}       3
{txt}j variable (2 values)                     ->   {res}plot
{txt}xij variables:
      {res}input_ksh_blue input_ksh_unmarked   {txt}->   {res}input_ksh
{txt}{hline 77}

{com}. 
.                 // Step 2: exporting into single table (similar to what you've done for Econ104)
.                 est clear 
{txt}
{com}.                 eststo unmarked:        estpost summarize       input_ksh if plot=="_unmarked"

{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(sum_w)}{space 1}{space 1}{ralign 9:e(mean)}{space 1}{space 1}{ralign 9:e(Var)}{space 1}{space 1}{ralign 9:e(sd)}{space 1}{space 1}{ralign 9:e(min)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:input_ksh}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      753}}}{space 1}{space 1}{ralign 9:{res:{sf:      753}}}{space 1}{space 1}{ralign 9:{res:{sf: 1258.903}}}{space 1}{space 1}{ralign 9:{res:{sf: 609995.3}}}{space 1}{space 1}{ralign 9:{res:{sf:  781.022}}}{space 1}{space 1}{ralign 9:{res:{sf:        0}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(max)}{space 1}{space 1}{ralign 9:e(sum)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:input_ksh}{space 1}{c |}{space 1}{ralign 9:{res:{sf:     6095}}}{space 1}{space 1}{ralign 9:{res:{sf: 947954.3}}}{space 1}

{com}.                 eststo blue:            estpost summarize       input_ksh if plot=="_blue"

{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(sum_w)}{space 1}{space 1}{ralign 9:e(mean)}{space 1}{space 1}{ralign 9:e(Var)}{space 1}{space 1}{ralign 9:e(sd)}{space 1}{space 1}{ralign 9:e(min)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:input_ksh}{space 1}{c |}{space 1}{ralign 9:{res:{sf:      760}}}{space 1}{space 1}{ralign 9:{res:{sf:      760}}}{space 1}{space 1}{ralign 9:{res:{sf: 1909.561}}}{space 1}{space 1}{ralign 9:{res:{sf:  81324.3}}}{space 1}{space 1}{ralign 9:{res:{sf: 285.1742}}}{space 1}{space 1}{ralign 9:{res:{sf:    812.5}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(max)}{space 1}{space 1}{ralign 9:e(sum)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:input_ksh}{space 1}{c |}{space 1}{ralign 9:{res:{sf:   3952.5}}}{space 1}{space 1}{ralign 9:{res:{sf:  1451267}}}{space 1}

{com}.                 eststo difference:      estpost ttest           input_ksh, by(plot) unequal

{txt}{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(b)}{space 1}{space 1}{ralign 9:e(count)}{space 1}{space 1}{ralign 9:e(se)}{space 1}{space 1}{ralign 9:e(t)}{space 1}{space 1}{ralign 9:e(df_t)}{space 1}{space 1}{ralign 9:e(p_l)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:input_ksh}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 650.6579}}}{space 1}{space 1}{ralign 9:{res:{sf:     1513}}}{space 1}{space 1}{ralign 9:{res:{sf: 30.28353}}}{space 1}{space 1}{ralign 9:{res:{sf: 21.48553}}}{space 1}{space 1}{ralign 9:{res:{sf: 947.4087}}}{space 1}{space 1}{ralign 9:{res:{sf:        1}}}{space 1}

{space 0}{space 0}{ralign 12:}{space 1}{c |}{space 1}{ralign 9:e(p)}{space 1}{space 1}{ralign 9:e(p_u)}{space 1}{space 1}{ralign 9:e(N_1)}{space 1}{space 1}{ralign 9:e(mu_1)}{space 1}{space 1}{ralign 9:e(N_2)}{space 1}{space 1}{ralign 9:e(mu_2)}{space 1}
{space 0}{hline 13}{c   +}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}{hline 11}
{space 0}{space 0}{ralign 12:input_ksh}{space 1}{c |}{space 1}{ralign 9:{res:{sf: 9.90e-84}}}{space 1}{space 1}{ralign 9:{res:{sf: 4.95e-84}}}{space 1}{space 1}{ralign 9:{res:{sf:      760}}}{space 1}{space 1}{ralign 9:{res:{sf: 1909.561}}}{space 1}{space 1}{ralign 9:{res:{sf:      753}}}{space 1}{space 1}{ralign 9:{res:{sf: 1258.903}}}{space 1}

{com}. 
.                 esttab unmarked blue difference using "Section3_table2_raw.csv", replace  cells("mean(pattern(1 1 0) fmt(%9.2f)) b(pattern(0 0 1) fmt(%9.2f) star)" "sd(pattern(1 1 0) fmt(%9.2f) par) se(pattern(0 0 1) fmt(%9.2f) par)") starlevels(* 0.10 ** 0.05 *** 0.01)  plain 
{res}{txt}(output written to {browse  `"Section3_table2_raw.csv"'})

{com}.         restore
{txt}
{com}. 
. // Calculating rate of return
. gen rate_of_return = ((revenue_blue - revenue_unmarked) - (input_ksh_blue - input_ksh_unmarked)) / (input_ksh_blue - input_ksh_unmarked)
{txt}(626 missing values generated)

{com}. su rate_of_return, d

                       {txt}rate_of_return
{hline 61}
      Percentiles      Smallest
 1%    {res} -43.0784      -303.4385
{txt} 5%    {res} -13.5147      -115.2545
{txt}10%    {res}-7.141827      -82.52691       {txt}Obs         {res}        622
{txt}25%    {res}-1.924888      -70.56084       {txt}Sum of Wgt. {res}        622

{txt}50%    {res} .3028125                      {txt}Mean          {res}  2.10442
                        {txt}Largest       Std. Dev.     {res} 29.47147
{txt}75%    {res}  3.27173       240.9508
{txt}90%    {res} 8.119684       262.5536       {txt}Variance      {res} 868.5675
{txt}95%    {res} 18.81494        313.536       {txt}Skewness      {res} 4.151109
{txt}99%    {res} 77.63403       313.5361       {txt}Kurtosis      {res} 77.86307
{txt}
{com}. 
. // Histograms
. histogram revenue_blue, saving(histogram_revenue_blue, replace) xtitle("revenue (Ksh)") ytitle("percentage of farmers") title("Distribution of revenue on blue plot")
{txt}(bin={res}28{txt}, start={res}0{txt}, width={res}653.48319{txt})
{res}{txt}(file histogram_revenue_blue.gph saved)

{com}. graph export "histogram_revenue_blue.pdf", replace // this line is necessary to save in PDF format
{txt}(file /Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3/histogram_revenue_blue.pdf written in PDF format)

{com}. 
. kdensity revenue_blue, saving(histogram_revenue_blue, replace) xtitle("revenue (Ksh)") ytitle("percentage of farmers") title("Distribution of revenue on blue plot")
{res}{txt}(file histogram_revenue_blue.gph saved)

{com}. graph export "kdensity_revenue_blue.pdf", replace // this line is necessary to save in PDF format
{txt}(file /Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3/kdensity_revenue_blue.pdf written in PDF format)

{com}. 
. // Putting multiple plots into a single graph
. twoway ///
>         (kdensity revenue_blue) ///
>         (kdensity revenue_unmarked, lpattern("-")), ///
>         saving(kdensity_both, replace) ///
>         xtitle("revenue (Ksh)") ytitle("Percentage of farmers") ///
>         legend(order(1 "Blue Plot" 2 "Unmarked plot"))
{res}{txt}(file kdensity_both.gph saved)

{com}. graph export "both_revenue_blue.pdf", replace // this line is necessary to save in PDF format
{txt}(file /Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3/both_revenue_blue.pdf written in PDF format)

{com}. 
. // Dealing with outliers
. su rate_of_return, d

                       {txt}rate_of_return
{hline 61}
      Percentiles      Smallest
 1%    {res} -43.0784      -303.4385
{txt} 5%    {res} -13.5147      -115.2545
{txt}10%    {res}-7.141827      -82.52691       {txt}Obs         {res}        622
{txt}25%    {res}-1.924888      -70.56084       {txt}Sum of Wgt. {res}        622

{txt}50%    {res} .3028125                      {txt}Mean          {res}  2.10442
                        {txt}Largest       Std. Dev.     {res} 29.47147
{txt}75%    {res}  3.27173       240.9508
{txt}90%    {res} 8.119684       262.5536       {txt}Variance      {res} 868.5675
{txt}95%    {res} 18.81494        313.536       {txt}Skewness      {res} 4.151109
{txt}99%    {res} 77.63403       313.5361       {txt}Kurtosis      {res} 77.86307
{txt}
{com}. di `r(p5)'  // 5th-%tile value
{res}-13.514698
{txt}
{com}. di `r(p95)' // 95th-%tile value
{res}18.814936
{txt}
{com}.         
.         // Saving the values for later reference
.         gen rate_of_return_p5 = `r(p5)'
{txt}
{com}.         gen rate_of_return_p95 = `r(p95)'
{txt}
{com}. 
. kdensity rate_of_return if rate_of_return>rate_of_return_p5 & rate_of_return<rate_of_return_p95, xtitle("revenue (Ksh)") ytitle("percentage of farmers") title("Rate of return - excluding top and bottom 5%")
{res}{txt}
{com}. graph export "kdensity_return.pdf", replace // this line is necessary to save in PDF format
{txt}(file /Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3/kdensity_return.pdf written in PDF format)

{com}. 
. // Bonus
. twoway ///
>         (kdensity rate_of_return if rate_of_return>rate_of_return_p5 & rate_of_return<rate_of_return_p95 & training==1, lpattern(solid)) ///
>         (kdensity rate_of_return if rate_of_return>rate_of_return_p5 & rate_of_return<rate_of_return_p95 & training==0, lpattern(dash)), ///
>         xtitle("revenue (Ksh)") ytitle("Percentage of farmers") legend(order(1 "Training group" 2 "Control group"))
{res}{txt}
{com}. graph export "kdensity_return_training.pdf", replace 
{txt}(file /Users/DSP/Google Drive/UCSC/Teaching/Econ120_F20/SectionNotes/Section3/kdensity_return_training.pdf written in PDF format)

{com}. sss
{err}command {bf}sss{sf} is unrecognized
{txt}{search r(199):r(199);}

end of do-file

{search r(199):r(199);}

{com}. exit, clear
